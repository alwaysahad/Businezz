var St=Object.defineProperty;var Ct=(t,i,p)=>i in t?St(t,i,{enumerable:!0,configurable:!0,writable:!0,value:p}):t[i]=p;var Qe=(t,i,p)=>Ct(t,typeof i!="symbol"?i+"":i,p);import{r as R,a as Pt,N as Dt,u as Tt,b as be,L as G,g as At,c as Ee,d as lt,B as kt,R as Ke,e as te,f as It}from"./vendor-yPSHqVck.js";import{c as Et}from"./supabase-DfwcnzK-.js";import{R as _e,P as se,L as Ft,F as fe,a as ot,U as ct,S as Rt,C as le,b as ye,c as He,d as Xe,e as dt,X as Be,M as _t,I as Ht,f as ht,A as pe,g as Se,T as Ze,j as Wt,E as Ot,h as ze,i as Lt,k as et,l as tt,m as Mt,n as mt,o as je,D as Ue,p as Ne,q as Te,r as Ae,s as We,t as Bt,u as zt,v as Ut,w as xe,x as Yt,B as $t,H as st,y as Gt,z as Oe,G as Jt,J as at,K as Le,N as nt}from"./ui-DcaoBth_.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))r(P);new MutationObserver(P=>{for(const k of P)if(k.type==="childList")for(const _ of k.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&r(_)}).observe(document,{childList:!0,subtree:!0});function p(P){const k={};return P.integrity&&(k.integrity=P.integrity),P.referrerPolicy&&(k.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?k.credentials="include":P.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function r(P){if(P.ep)return;P.ep=!0;const k=p(P);fetch(P.href,k)}})();var ut={exports:{}},ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=R,Vt=Symbol.for("react.element"),Qt=Symbol.for("react.fragment"),Kt=Object.prototype.hasOwnProperty,Xt=qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zt={key:!0,ref:!0,__self:!0,__source:!0};function xt(t,i,p){var r,P={},k=null,_=null;p!==void 0&&(k=""+p),i.key!==void 0&&(k=""+i.key),i.ref!==void 0&&(_=i.ref);for(r in i)Kt.call(i,r)&&!Zt.hasOwnProperty(r)&&(P[r]=i[r]);if(t&&t.defaultProps)for(r in i=t.defaultProps,i)P[r]===void 0&&(P[r]=i[r]);return{$$typeof:Vt,type:t,key:k,ref:_,props:P,_owner:Xt.current}}ke.Fragment=Qt;ke.jsx=xt;ke.jsxs=xt;ut.exports=ke;var e=ut.exports,Me={},it=Pt;Me.createRoot=it.createRoot,Me.hydrateRoot=it.hydrateRoot;const es="https://kkcalkiqfdykbmitaqcb.supabase.co",ft="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrY2Fsa2lxZmR5a2JtaXRhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ1MTksImV4cCI6MjA4NTQwMDUxOX0.hkDQS1mVtO2lgYlQXYNkbNpIF9crkotYMVaxe5gmLkc",Q=!!ft,M=Q?Et(es,ft):null,ee={INVOICES:"invoices",CUSTOMERS:"customers",PRODUCTS:"products",BUSINESS:"business_profile",SETTINGS:"settings"},gt=R.createContext(void 0);function ts({children:t}){const[i,p]=R.useState(null),[r,P]=R.useState(null),[k,_]=R.useState(!0);R.useEffect(()=>{if(!M){_(!1);return}M.auth.getSession().then(({data:{session:c}})=>{P(c),p((c==null?void 0:c.user)??null),_(!1)});const{data:{subscription:g}}=M.auth.onAuthStateChange((c,o)=>{P(o),p((o==null?void 0:o.user)??null),_(!1)});return()=>g.unsubscribe()},[]);const y={user:i,session:r,loading:k,signUp:async(g,c)=>{if(!M)return{error:{message:"Supabase not configured"}};const{error:o}=await M.auth.signUp({email:g,password:c});return{error:o}},signIn:async(g,c)=>{if(!M)return{error:{message:"Supabase not configured"}};const{error:o}=await M.auth.signInWithPassword({email:g,password:c});return{error:o}},signOut:async()=>{M&&await M.auth.signOut()},resetPassword:async g=>{if(!M)return{error:{message:"Supabase not configured"}};const{error:c}=await M.auth.resetPasswordForEmail(g,{redirectTo:`${window.location.origin}/reset-password`});return{error:c}}};return e.jsx(gt.Provider,{value:y,children:t})}function ve(){const t=R.useContext(gt);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const pt=R.createContext(void 0);function ss({children:t}){const{user:i}=ve(),[p]=R.useState(!1),[r]=R.useState(null),[P]=R.useState("idle"),[k]=R.useState(null);R.useEffect(()=>{if(!M||!Q||!i)return;const c=M.channel("invoices-changes").on("postgres_changes",{event:"*",schema:"public",table:"invoices",filter:`user_id=eq.${i.id}`},()=>{_()}).subscribe(),o=M.channel("customers-changes").on("postgres_changes",{event:"*",schema:"public",table:"customers",filter:`user_id=eq.${i.id}`},()=>{N()}).subscribe(),A=M.channel("products-changes").on("postgres_changes",{event:"*",schema:"public",table:"products",filter:`user_id=eq.${i.id}`},()=>{b()}).subscribe(),w=M.channel("business-changes").on("postgres_changes",{event:"*",schema:"public",table:"business_profile",filter:`user_id=eq.${i.id}`},()=>{f()}).subscribe(),m=M.channel("settings-changes").on("postgres_changes",{event:"*",schema:"public",table:"settings",filter:`user_id=eq.${i.id}`},()=>{E()}).subscribe();return()=>{c.unsubscribe(),o.unsubscribe(),A.unsubscribe(),w.unsubscribe(),m.unsubscribe()}},[i]);const _=async()=>{if(M)try{const{data:c}=await M.from("invoices").select("*").order("created_at",{ascending:!1});c&&(localStorage.setItem("invoiceflow_invoices",JSON.stringify(c.map(y))),window.dispatchEvent(new Event("storage")))}catch(c){console.error("Error refreshing invoices:",c)}},N=async()=>{if(M)try{const{data:c}=await M.from("customers").select("*").order("name");c&&(localStorage.setItem("invoiceflow_customers",JSON.stringify(c)),window.dispatchEvent(new Event("storage")))}catch(c){console.error("Error refreshing customers:",c)}},b=async()=>{if(M)try{const{data:c}=await M.from("products").select("*").order("name");c&&(localStorage.setItem("invoiceflow_products",JSON.stringify(c)),window.dispatchEvent(new Event("storage")))}catch(c){console.error("Error refreshing products:",c)}},f=async()=>{if(M)try{const{data:c}=await M.from("business_profile").select("*").single();c&&(localStorage.setItem("invoiceflow_business",JSON.stringify(c)),window.dispatchEvent(new Event("storage")))}catch(c){console.error("Error refreshing business:",c)}},E=async()=>{if(M)try{const{data:c}=await M.from("settings").select("*").single();c&&(localStorage.setItem("invoiceflow_settings",JSON.stringify(c)),window.dispatchEvent(new Event("storage")))}catch(c){console.error("Error refreshing settings:",c)}},y=c=>({id:c.id,invoiceNumber:c.invoice_number,date:c.date,customerName:c.customer_name,customerEmail:c.customer_email,customerPhone:c.customer_phone,customerAddress:c.customer_address,items:c.items||[],taxRate:c.tax_rate,discount:c.discount,notes:c.notes,status:c.status,createdAt:c.created_at,updatedAt:c.updated_at}),g={syncing:p,lastSyncTime:r,syncStatus:P,syncError:k};return e.jsx(pt.Provider,{value:g,children:t})}function as(){const t=R.useContext(pt);if(t===void 0)throw new Error("useSync must be used within a SyncProvider");return t}function ns({children:t}){const{user:i,loading:p}=ve();return Q?p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 mb-6 animate-pulse",children:e.jsx(_e,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-display font-bold text-white mb-2",children:"Loading..."}),e.jsx("p",{className:"text-midnight-400",children:"Please wait"})]})}):i?e.jsx(e.Fragment,{children:t}):e.jsx(Dt,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t})}const is=[{path:"/",label:"Dashboard",icon:Ft},{path:"/invoices",label:"Invoices",icon:fe},{path:"/products",label:"Products",icon:ot},{path:"/customers",label:"Customers",icon:ct},{path:"/settings",label:"Settings",icon:Rt}];function rs({children:t}){const[i,p]=R.useState(!1),[r,P]=R.useState(!1),k=Tt(),_=be(),{user:N,signOut:b}=ve(),{syncStatus:f}=as(),E=g=>g==="/"?k.pathname==="/":k.pathname.startsWith(g),y=async()=>{await b(),_("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out lg:transform-none ${i?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col glass rounded-r-2xl lg:rounded-2xl m-0 lg:m-4",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs(G,{to:"/",className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center shadow-glow",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-display font-bold text-white",children:"InvoiceFlow"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Smart Billing"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(G,{to:"/invoices/new",className:"flex items-center justify-center gap-2 w-full btn-primary py-3",onClick:()=>p(!1),children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})}),e.jsx("nav",{className:"flex-1 px-4 py-2 space-y-1 overflow-y-auto",children:is.map(g=>{const c=g.icon,o=E(g.path);return e.jsxs(G,{to:g.path,onClick:()=>p(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${o?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(c,{className:`w-5 h-5 ${o?"text-teal-400":""}`}),e.jsx("span",{className:"font-medium",children:g.label}),o&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-teal-400"})]},g.path)})}),e.jsx("div",{className:"p-4 border-t border-white/10",children:Q&&N?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-midnight-800/50",children:f==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{className:"text-xs text-teal-400",children:"Synced"})]}):f==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 text-blue-400 animate-pulse"}),e.jsx("span",{className:"text-xs text-blue-400",children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 text-midnight-400"}),e.jsx("span",{className:"text-xs text-midnight-400",children:"Idle"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>P(!r),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(He,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:N.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>P(!1)}),e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 glass rounded-lg p-2 z-50 animate-fade-in",children:e.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})]})]}):e.jsx("div",{className:"text-center",children:Q?e.jsxs("div",{className:"space-y-2",children:[e.jsx(dt,{className:"w-6 h-6 text-midnight-500 mx-auto"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Not signed in"})]}):e.jsx("p",{className:"text-xs text-midnight-400",children:"Made with ❤️ for small businesses"})})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen lg:p-4",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 glass safe-area-top sticky top-0 z-30",children:[e.jsxs(G,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-display font-bold text-white text-lg",children:"InvoiceFlow"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Q&&N&&e.jsxs("button",{onClick:()=>P(!r),className:"p-2 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors relative","aria-label":"User menu",children:[e.jsx(He,{className:"w-5 h-5 text-white"}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>P(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 glass rounded-lg p-2 z-50 animate-fade-in min-w-[200px]",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/10 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:N.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]}),e.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:()=>p(!i),className:"p-3 -mr-1 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors","aria-label":"Toggle menu",children:i?e.jsx(Be,{className:"w-6 h-6 text-white"}):e.jsx(_t,{className:"w-6 h-6 text-white"})})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 lg:p-0 safe-area-bottom",children:e.jsx("div",{className:"glass rounded-2xl min-h-full p-4 sm:p-6 lg:p-8 animate-fade-in",children:t})})]})]})}async function we(){if(!M)return null;const{data:{user:t}}=await M.auth.getUser();return(t==null?void 0:t.id)||null}const vt={async getAll(){if(!M)return[];const{data:t,error:i}=await M.from(ee.INVOICES).select("*").order("created_at",{ascending:!1});if(i)throw i;return(t||[]).map(Fe)},async getById(t){if(!M)return null;const{data:i,error:p}=await M.from(ee.INVOICES).select("*").eq("id",t).single();if(p&&p.code!=="PGRST116")throw p;return i?Fe(i):null},async save(t){if(!M)throw new Error("Database not configured");const i=await we();if(!i)throw new Error("User not authenticated");const p={...cs(t),user_id:i},{data:r,error:P}=await M.from(ee.INVOICES).upsert(p,{onConflict:"id"}).select().single();if(P)throw P;return Fe(r)},async delete(t){if(!M)throw new Error("Database not configured");const{error:i}=await M.from(ee.INVOICES).delete().eq("id",t);if(i)throw i}},yt={async getAll(){if(!M)return[];const{data:t,error:i}=await M.from(ee.CUSTOMERS).select("*").order("name");if(i)throw i;return t||[]},async save(t){if(!M)throw new Error("Database not configured");const i=await we();if(!i)throw new Error("User not authenticated");const p={...t,user_id:i},{data:r,error:P}=await M.from(ee.CUSTOMERS).upsert(p,{onConflict:"id"}).select().single();if(P)throw P;return r},async delete(t){if(!M)throw new Error("Database not configured");const{error:i}=await M.from(ee.CUSTOMERS).delete().eq("id",t);if(i)throw i}},jt={async getAll(){if(!M)return[];const{data:t,error:i}=await M.from(ee.PRODUCTS).select("*").order("name");if(i)throw i;return t||[]},async save(t){if(!M)throw new Error("Database not configured");const i=await we();if(!i)throw new Error("User not authenticated");const p={...t,user_id:i},{data:r,error:P}=await M.from(ee.PRODUCTS).upsert(p,{onConflict:"id"}).select().single();if(P)throw P;return r},async delete(t){if(!M)throw new Error("Database not configured");const{error:i}=await M.from(ee.PRODUCTS).delete().eq("id",t);if(i)throw i}},Ye={async get(){if(!M)return null;const{data:t,error:i}=await M.from(ee.BUSINESS).select("*").single();if(i&&i.code!=="PGRST116")throw i;return t},async save(t){if(!M)throw new Error("Database not configured");const i=await we();if(!i)throw new Error("User not authenticated");const p=await Ye.get(),r={...t,id:(p==null?void 0:p.id)||t.id,user_id:i},{data:P,error:k}=await M.from(ee.BUSINESS).upsert(r,{onConflict:"user_id"}).select().single();if(k)throw k;return P}},$e={async get(){if(!M)return null;const{data:t,error:i}=await M.from(ee.SETTINGS).select("*").single();if(i&&i.code!=="PGRST116")throw i;return t},async save(t){if(!M)throw new Error("Database not configured");const i=await we();if(!i)throw new Error("User not authenticated");const p=await $e.get(),r={...t,id:(p==null?void 0:p.id)||t.id,user_id:i},{data:P,error:k}=await M.from(ee.SETTINGS).upsert(r,{onConflict:"user_id"}).select().single();if(k)throw k;return P}};async function ls(t){if(!Q||!M)return{success:!1,message:"Supabase not configured"};try{for(const i of t.invoices)await vt.save(i);for(const i of t.customers)await yt.save(i);for(const i of t.products)await jt.save(i);return t.business.name&&await Ye.save(t.business),await $e.save(t.settings),{success:!0,message:"All data synced to cloud successfully!"}}catch(i){return console.error("Sync to cloud failed:",i),{success:!1,message:`Sync failed: ${i.message}`}}}async function os(){if(!Q||!M)return{success:!1,message:"Supabase not configured"};try{const[t,i,p,r,P]=await Promise.all([vt.getAll(),yt.getAll(),jt.getAll(),Ye.get(),$e.get()]);return{success:!0,message:"Data fetched from cloud successfully!",data:{invoices:t,customers:i,products:p,business:r,settings:P}}}catch(t){return console.error("Sync from cloud failed:",t),{success:!1,message:`Sync failed: ${t.message}`}}}function Fe(t){return{id:t.id,invoiceNumber:t.invoice_number,date:t.date,customerName:t.customer_name,customerEmail:t.customer_email,customerPhone:t.customer_phone,customerAddress:t.customer_address,items:t.items||[],taxRate:t.tax_rate,discount:t.discount,notes:t.notes,status:t.status,createdAt:t.created_at,updatedAt:t.updated_at}}function cs(t){return{id:t.id,invoice_number:t.invoiceNumber,date:t.date,customer_name:t.customerName,customer_email:t.customerEmail,customer_phone:t.customerPhone,customer_address:t.customerAddress,items:t.items,tax_rate:t.taxRate,discount:t.discount,notes:t.notes,status:t.status,created_at:t.createdAt||new Date().toISOString(),updated_at:new Date().toISOString()}}const q={INVOICES:"invoiceflow_invoices",BUSINESS:"invoiceflow_business",SETTINGS:"invoiceflow_settings",CUSTOMERS:"invoiceflow_customers",PRODUCTS:"invoiceflow_products"},V={get:t=>{try{const i=localStorage.getItem(t);return i?JSON.parse(i):null}catch(i){return console.error(`Error reading from storage: ${t}`,i),null}},set:(t,i)=>{try{return localStorage.setItem(t,JSON.stringify(i)),!0}catch(p){return console.error(`Error writing to storage: ${t}`,p),!1}},remove:t=>{try{return localStorage.removeItem(t),!0}catch(i){return console.error(`Error removing from storage: ${t}`,i),!1}}},Z={getAll:()=>V.get(q.INVOICES)||[],getById:t=>Z.getAll().find(p=>p.id===t)||null,save:t=>{const i=Z.getAll(),p=i.findIndex(P=>P.id===t.id),r=new Date().toISOString();return p>=0?i[p]={...t,updatedAt:r}:i.push({...t,createdAt:r,updatedAt:r}),V.set(q.INVOICES,i)},delete:t=>{const i=Z.getAll().filter(p=>p.id!==t);return V.set(q.INVOICES,i)},getNextInvoiceNumber:()=>{const i=oe.get().invoicePrefix||"INV",p=Z.getAll(),r=new Date().getFullYear(),k=p.filter(_=>_.invoiceNumber&&_.invoiceNumber.startsWith(`${i}-${r}`)).length+1;return`${i}-${r}-${String(k).padStart(4,"0")}`}},ie={get:()=>V.get(q.BUSINESS)||{name:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",taxId:"",logo:null,currency:"₹",taxRate:18},save:t=>V.set(q.BUSINESS,t)},ae={getAll:()=>V.get(q.CUSTOMERS)||[],save:t=>{const i=ae.getAll(),p=i.findIndex(r=>r.id===t.id);return p>=0?i[p]=t:i.push(t),V.set(q.CUSTOMERS,i)},delete:t=>{const i=ae.getAll().filter(p=>p.id!==t);return V.set(q.CUSTOMERS,i)}},ne={getAll:()=>V.get(q.PRODUCTS)||[],save:t=>{const i=ne.getAll(),p=i.findIndex(r=>r.id===t.id);return p>=0?i[p]=t:i.push(t),V.set(q.PRODUCTS,i)},delete:t=>{const i=ne.getAll().filter(p=>p.id!==t);return V.set(q.PRODUCTS,i)}},oe={get:()=>V.get(q.SETTINGS)||{currency:"₹",taxRate:18,invoicePrefix:"INV",defaultPaymentTerms:"Due on receipt",showLogo:!0,taxLabel:"GST"},save:t=>V.set(q.SETTINGS,t)};function ds(){return Q}async function bt(){if(!Q)return{success:!1,message:"Cloud sync not configured. Please add Supabase credentials."};const t={invoices:Z.getAll(),customers:ae.getAll(),products:ne.getAll(),business:ie.get(),settings:oe.get()};return ls(t)}async function Nt(){if(!Q)return{success:!1,message:"Cloud sync not configured. Please add Supabase credentials."};const t=await os();if(!t.success||!t.data)return{success:!1,message:t.message};const{data:i}=t,p=Z.getAll(),r=Re(p,i.invoices);V.set(q.INVOICES,r);const P=ae.getAll(),k=Re(P,i.customers);V.set(q.CUSTOMERS,k);const _=ne.getAll(),N=Re(_,i.products);return V.set(q.PRODUCTS,N),i.business&&V.set(q.BUSINESS,i.business),i.settings&&V.set(q.SETTINGS,i.settings),{success:!0,message:`Synced! ${r.length} invoices, ${k.length} customers, ${N.length} products.`}}async function hs(){const t=await Nt();if(!t.success)return t;const i=await bt();return i.success?{success:!0,message:"Two-way sync completed successfully!"}:i}const Pe={isAvailable:ds,uploadToCloud:bt,downloadFromCloud:Nt,fullSync:hs};function Re(t,i){const p=new Map;for(const r of t)p.set(r.id,r);for(const r of i){const P=p.get(r.id);if(!P)p.set(r.id,r);else{const k=P.updatedAt?new Date(P.updatedAt).getTime():0;(r.updatedAt?new Date(r.updatedAt).getTime():0)>=k&&p.set(r.id,r)}}return Array.from(p.values())}const ue=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,J=(t,i="₹")=>{const p=parseFloat(String(t))||0;return`${i}${p.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`},ge=(t,i="short")=>{if(!t)return"";const p=new Date(t);return i==="short"?p.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):i==="long"?p.toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}):i==="input"?p.toISOString().split("T")[0]:p.toLocaleDateString()},ce=(t,i=0,p=0)=>{const r=t.reduce((b,f)=>b+(parseFloat(String(f.quantity))||0)*(parseFloat(String(f.price))||0),0),P=r*(parseFloat(String(p))||0)/100,k=r-P,_=k*(parseFloat(String(i))||0)/100,N=k+_;return{subtotal:r,discountAmount:P,taxableAmount:k,taxAmount:_,total:N}},Ge=t=>{const i={draft:"bg-midnight-600 text-midnight-200",pending:"bg-gold-500/20 text-gold-400",paid:"bg-teal-500/20 text-teal-400",overdue:"bg-coral-500/20 text-coral-400",cancelled:"bg-midnight-700 text-midnight-400"};return i[t]||i.draft},Je=t=>({draft:"Draft",pending:"Pending",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled"})[t]||"Unknown",ms=t=>{const i=new Date,p=new Date(t),r=i.getTime()-p.getTime(),P=Math.floor(r/1e3),k=Math.floor(P/60),_=Math.floor(k/60),N=Math.floor(_/24);return N>30?ge(t,"short"):N>1?`${N} days ago`:N===1?"Yesterday":_>1?`${_} hours ago`:_===1?"1 hour ago":k>1?`${k} minutes ago`:"Just now"},de=t=>{const i=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],p=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(t===0)return"Zero";if(t<0)return"Minus "+de(-t);let r="";return Math.floor(t/1e7)>0&&(r+=de(Math.floor(t/1e7))+" Crore ",t%=1e7),Math.floor(t/1e5)>0&&(r+=de(Math.floor(t/1e5))+" Lakh ",t%=1e5),Math.floor(t/1e3)>0&&(r+=de(Math.floor(t/1e3))+" Thousand ",t%=1e3),Math.floor(t/100)>0&&(r+=de(Math.floor(t/100))+" Hundred ",t%=100),t>0&&(r!==""&&(r+="and "),t<20?r+=i[t]:(r+=p[Math.floor(t/10)],t%10>0&&(r+="-"+i[t%10]))),r.trim()};function Ce({icon:t,label:i,value:p,subtext:r,color:P,delay:k}){return e.jsx("div",{className:"glass rounded-2xl p-6 card-hover animate-slide-up",style:{animationDelay:`${k}ms`},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-midnight-400 text-sm font-medium",children:i}),e.jsx("p",{className:"text-3xl font-display font-bold text-white mt-2",children:p}),r&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1",children:r})]}),e.jsx("div",{className:`p-3 rounded-xl ${P}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})}function us(){const t=ie.get(),i=Z.getAll(),p=R.useMemo(()=>{const P=new Date,k=P.getMonth(),_=P.getFullYear();let N=0,b=0,f=0,E=0,y=0,g=0;return i.forEach(c=>{const o=ce(c.items,c.taxRate,c.discount),A=new Date(c.date);c.status==="paid"?(N+=o.total,f++,A.getMonth()===k&&A.getFullYear()===_&&(g+=o.total)):c.status==="pending"?(b+=o.total,E++):c.status==="overdue"&&(b+=o.total,y++)}),{totalInvoices:i.length,totalRevenue:N,pendingAmount:b,paidCount:f,pendingCount:E,overdueCount:y,thisMonthRevenue:g}},[i]),r=R.useMemo(()=>[...i].sort((P,k)=>new Date(k.createdAt||"").getTime()-new Date(P.createdAt||"").getTime()).slice(0,5),[i]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-white",children:["Welcome back",t.name?`, ${t.name.split(" ")[0]}`:"","!"]}),e.jsx("p",{className:"text-midnight-400 mt-1",children:"Here's what's happening with your invoices today."})]}),e.jsxs(G,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ce,{icon:fe,label:"Total Invoices",value:p.totalInvoices,subtext:`${p.paidCount} paid`,color:"bg-teal-500/20 text-teal-400",delay:0}),e.jsx(Ce,{icon:Ht,label:"Total Revenue",value:J(p.totalRevenue,t.currency),subtext:`This month: ${J(p.thisMonthRevenue,t.currency)}`,color:"bg-gold-500/20 text-gold-400",delay:100}),e.jsx(Ce,{icon:ht,label:"Pending",value:p.pendingCount,subtext:J(p.pendingAmount,t.currency),color:"bg-midnight-500/50 text-midnight-300",delay:200}),e.jsx(Ce,{icon:pe,label:"Overdue",value:p.overdueCount,subtext:"Need attention",color:"bg-coral-500/20 text-coral-400",delay:300})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"400ms"},children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(G,{to:"/invoices/new",className:"flex items-center gap-3 p-4 rounded-xl bg-teal-500/10 hover:bg-teal-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(se,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Create Invoice"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Generate a new invoice"})]}),e.jsx(Se,{className:"w-5 h-5 text-teal-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(G,{to:"/products",className:"flex items-center gap-3 p-4 rounded-xl bg-gold-500/10 hover:bg-gold-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gold-500/20",children:e.jsx(Ze,{className:"w-5 h-5 text-gold-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Add or edit products"})]}),e.jsx(Se,{className:"w-5 h-5 text-gold-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(G,{to:"/settings",className:"flex items-center gap-3 p-4 rounded-xl bg-midnight-600/50 hover:bg-midnight-600 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-500",children:e.jsx(le,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Business Profile"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Update your details"})]}),e.jsx(Se,{className:"w-5 h-5 text-midnight-300 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"500ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white",children:"Recent Invoices"}),e.jsxs(G,{to:"/invoices",className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:["View all ",e.jsx(Se,{className:"w-4 h-4"})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-12 h-12 text-midnight-500 mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"No invoices yet"}),e.jsx(G,{to:"/invoices/new",className:"text-teal-400 text-sm hover:text-teal-300 mt-2 inline-block",children:"Create your first invoice"})]}):e.jsx("div",{className:"space-y-3",children:r.map(P=>{const k=ce(P.items,P.taxRate,P.discount);return e.jsxs(G,{to:`/invoices/view/${P.id}`,className:"flex items-center gap-4 p-4 rounded-xl bg-midnight-800/50 hover:bg-midnight-800 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white truncate",children:P.customerName}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ge(P.status)}`,children:Je(P.status)})]}),e.jsxs("p",{className:"text-sm text-midnight-400 mt-1",children:[P.invoiceNumber," • ",ms(P.createdAt||"")]})]}),e.jsx("p",{className:"font-mono font-semibold text-white",children:J(k.total,t.currency)})]},P.id)})})]})]}),!t.name&&i.length===0&&e.jsxs("div",{className:"glass rounded-2xl p-8 text-center animate-slide-up",style:{animationDelay:"600ms"},children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center mx-auto mb-4 shadow-glow",children:e.jsx(Ze,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"Get Started"}),e.jsx("p",{className:"text-midnight-400 max-w-md mx-auto mb-6",children:"Set up your business profile and start creating professional invoices in minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(G,{to:"/settings",className:"btn-primary flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),"Set Up Business Profile"]}),e.jsxs(G,{to:"/invoices/new",className:"btn-secondary flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Create First Invoice"]})]})]})]})}var xs={exports:{}};const fs=At(Wt);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,i){(function(r,P){t.exports=P(function(){try{return fs}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Ee<"u"?Ee:typeof window<"u"?window:typeof self<"u"?self:Ee,function(p){return function(){var r={172:function(N,b){var f=this&&this.__extends||function(){var g=function(c,o){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var m in w)Object.prototype.hasOwnProperty.call(w,m)&&(A[m]=w[m])},g(c,o)};return function(c,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");g(c,o);function A(){this.constructor=c}c.prototype=o===null?Object.create(o):(A.prototype=o.prototype,new A)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CellHookData=b.HookData=void 0;var E=function(){function g(c,o,A){this.table=o,this.pageNumber=o.pageNumber,this.pageCount=this.pageNumber,this.settings=o.settings,this.cursor=A,this.doc=c.getDocument()}return g}();b.HookData=E;var y=function(g){f(c,g);function c(o,A,w,m,h,s){var l=g.call(this,o,A,s)||this;return l.cell=w,l.row=m,l.column=h,l.section=m.section,l}return c}(E);b.CellHookData=y},340:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0});var E=f(4),y=f(136),g=f(744),c=f(776),o=f(664),A=f(972);function w(m){m.API.autoTable=function(){for(var h=[],s=0;s<arguments.length;s++)h[s]=arguments[s];var l;h.length===1?l=h[0]:(console.error("Use of deprecated autoTable initiation"),l=h[2]||{},l.columns=h[0],l.body=h[1]);var v=(0,c.parseInput)(this,l),n=(0,A.createTable)(this,v);return(0,o.drawTable)(this,n),this},m.API.lastAutoTable=!1,m.API.previousAutoTable=!1,m.API.autoTable.previous=!1,m.API.autoTableText=function(h,s,l,v){(0,y.default)(h,s,l,v,this)},m.API.autoTableSetDefaults=function(h){return g.DocHandler.setDefaults(h,this),this},m.autoTableSetDefaults=function(h,s){g.DocHandler.setDefaults(h,s)},m.API.autoTableHtmlToJson=function(h,s){var l;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var v=new g.DocHandler(this),n=(0,E.parseHtml)(v,h,window,s,!1),a=n.head,x=n.body,S=((l=a[0])===null||l===void 0?void 0:l.map(function(D){return D.content}))||[];return{columns:S,rows:x,data:x}},m.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var h=this.lastAutoTable;return h&&h.finalY?h.finalY:0},m.API.autoTableAddPageContent=function(h){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),m.API.autoTable.globalDefaults||(m.API.autoTable.globalDefaults={}),m.API.autoTable.globalDefaults.addPageContent=h,this},m.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}b.default=w},136:function(N,b){Object.defineProperty(b,"__esModule",{value:!0});function f(E,y,g,c,o){c=c||{};var A=1.15,w=o.internal.scaleFactor,m=o.internal.getFontSize()/w,h=o.getLineHeightFactor?o.getLineHeightFactor():A,s=m*h,l=/\r\n|\r|\n/g,v="",n=1;if((c.valign==="middle"||c.valign==="bottom"||c.halign==="center"||c.halign==="right")&&(v=typeof E=="string"?E.split(l):E,n=v.length||1),g+=m*(2-A),c.valign==="middle"?g-=n/2*s:c.valign==="bottom"&&(g-=n*s),c.halign==="center"||c.halign==="right"){var a=m;if(c.halign==="center"&&(a*=.5),v&&n>=1){for(var x=0;x<v.length;x++)o.text(v[x],y-o.getStringUnitWidth(v[x])*a,g),g+=s;return o}y-=o.getStringUnitWidth(E)*a}return c.halign==="justify"?o.text(E,y,g,{maxWidth:c.maxWidth||100,align:"justify"}):o.text(E,y,g),o}b.default=f},420:function(N,b){Object.defineProperty(b,"__esModule",{value:!0}),b.getPageAvailableWidth=b.parseSpacing=b.getFillStyle=b.addTableBorder=b.getStringWidth=void 0;function f(o,A,w){w.applyStyles(A,!0);var m=Array.isArray(o)?o:[o],h=m.map(function(s){return w.getTextWidth(s)}).reduce(function(s,l){return Math.max(s,l)},0);return h}b.getStringWidth=f;function E(o,A,w,m){var h=A.settings.tableLineWidth,s=A.settings.tableLineColor;o.applyStyles({lineWidth:h,lineColor:s});var l=y(h,!1);l&&o.rect(w.x,w.y,A.getWidth(o.pageSize().width),m.y-w.y,l)}b.addTableBorder=E;function y(o,A){var w=o>0,m=A||A===0;return w&&m?"DF":w?"S":m?"F":null}b.getFillStyle=y;function g(o,A){var w,m,h,s;if(o=o||A,Array.isArray(o)){if(o.length>=4)return{top:o[0],right:o[1],bottom:o[2],left:o[3]};if(o.length===3)return{top:o[0],right:o[1],bottom:o[2],left:o[1]};if(o.length===2)return{top:o[0],right:o[1],bottom:o[0],left:o[1]};o.length===1?o=o[0]:o=A}return typeof o=="object"?(typeof o.vertical=="number"&&(o.top=o.vertical,o.bottom=o.vertical),typeof o.horizontal=="number"&&(o.right=o.horizontal,o.left=o.horizontal),{left:(w=o.left)!==null&&w!==void 0?w:A,top:(m=o.top)!==null&&m!==void 0?m:A,right:(h=o.right)!==null&&h!==void 0?h:A,bottom:(s=o.bottom)!==null&&s!==void 0?s:A}):(typeof o!="number"&&(o=A),{top:o,right:o,bottom:o,left:o})}b.parseSpacing=g;function c(o,A){var w=g(A.settings.margin,0);return o.pageSize().width-(w.left+w.right)}b.getPageAvailableWidth=c},796:function(N,b){var f=this&&this.__extends||function(){var c=function(o,A){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,m){w.__proto__=m}||function(w,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(w[h]=m[h])},c(o,A)};return function(o,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");c(o,A);function w(){this.constructor=o}o.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.getTheme=b.defaultStyles=b.HtmlRowInput=void 0;var E=function(c){f(o,c);function o(A){var w=c.call(this)||this;return w._element=A,w}return o}(Array);b.HtmlRowInput=E;function y(c){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/c,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}b.defaultStyles=y;function g(c){var o={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return o[c]}b.getTheme=g},903:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.parseCss=void 0;var E=f(420);function y(w,m,h,s,l){var v={},n=1.3333333333333333,a=c(m,function(C){return l.getComputedStyle(C).backgroundColor});a!=null&&(v.fillColor=a);var x=c(m,function(C){return l.getComputedStyle(C).color});x!=null&&(v.textColor=x);var S=A(s,h);S&&(v.cellPadding=S);var D="borderTopColor",T=n*h,j=s.borderTopWidth;if(s.borderBottomWidth===j&&s.borderRightWidth===j&&s.borderLeftWidth===j){var F=(parseFloat(j)||0)/T;F&&(v.lineWidth=F)}else v.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/T,right:(parseFloat(s.borderRightWidth)||0)/T,bottom:(parseFloat(s.borderBottomWidth)||0)/T,left:(parseFloat(s.borderLeftWidth)||0)/T},v.lineWidth.top||(v.lineWidth.right?D="borderRightColor":v.lineWidth.bottom?D="borderBottomColor":v.lineWidth.left&&(D="borderLeftColor"));var O=c(m,function(C){return l.getComputedStyle(C)[D]});O!=null&&(v.lineColor=O);var U=["left","right","center","justify"];U.indexOf(s.textAlign)!==-1&&(v.halign=s.textAlign),U=["middle","bottom","top"],U.indexOf(s.verticalAlign)!==-1&&(v.valign=s.verticalAlign);var d=parseInt(s.fontSize||"");isNaN(d)||(v.fontSize=d/n);var u=g(s);u&&(v.fontStyle=u);var I=(s.fontFamily||"").toLowerCase();return w.indexOf(I)!==-1&&(v.font=I),v}b.parseCss=y;function g(w){var m="";return(w.fontWeight==="bold"||w.fontWeight==="bolder"||parseInt(w.fontWeight)>=700)&&(m="bold"),(w.fontStyle==="italic"||w.fontStyle==="oblique")&&(m+="italic"),m}function c(w,m){var h=o(w,m);if(!h)return null;var s=h.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var l=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],v=parseInt(s[4]);return v===0||isNaN(l[0])||isNaN(l[1])||isNaN(l[2])?null:l}function o(w,m){var h=m(w);return h==="rgba(0, 0, 0, 0)"||h==="transparent"||h==="initial"||h==="inherit"?w.parentElement==null?null:o(w.parentElement,m):h}function A(w,m){var h=[w.paddingTop,w.paddingRight,w.paddingBottom,w.paddingLeft],s=96/(72/m),l=(parseInt(w.lineHeight)-parseInt(w.fontSize))/m/2,v=h.map(function(a){return parseInt(a||"0")/s}),n=(0,E.parseSpacing)(v,0);return l>n.top&&(n.top=l),l>n.bottom&&(n.bottom=l),n}},744:function(N,b){Object.defineProperty(b,"__esModule",{value:!0}),b.DocHandler=void 0;var f={},E=function(){function y(g){this.jsPDFDocument=g,this.userStyles={textColor:g.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:g.internal.getFontSize(),fontStyle:g.internal.getFont().fontStyle,font:g.internal.getFont().fontName,lineWidth:g.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:g.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return y.setDefaults=function(g,c){c===void 0&&(c=null),c?c.__autoTableDocumentDefaults=g:f=g},y.unifyColor=function(g){return Array.isArray(g)?g:typeof g=="number"?[g,g,g]:typeof g=="string"?[g]:null},y.prototype.applyStyles=function(g,c){var o,A,w;c===void 0&&(c=!1),g.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(g.fontStyle);var m=this.jsPDFDocument.internal.getFont(),h=m.fontStyle,s=m.fontName;if(g.font&&(s=g.font),g.fontStyle){h=g.fontStyle;var l=this.getFontList()[s];l&&l.indexOf(h)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(l[0]),h=l[0])}if(this.jsPDFDocument.setFont(s,h),g.fontSize&&this.jsPDFDocument.setFontSize(g.fontSize),!c){var v=y.unifyColor(g.fillColor);v&&(o=this.jsPDFDocument).setFillColor.apply(o,v),v=y.unifyColor(g.textColor),v&&(A=this.jsPDFDocument).setTextColor.apply(A,v),v=y.unifyColor(g.lineColor),v&&(w=this.jsPDFDocument).setDrawColor.apply(w,v),typeof g.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(g.lineWidth)}},y.prototype.splitTextToSize=function(g,c,o){return this.jsPDFDocument.splitTextToSize(g,c,o)},y.prototype.rect=function(g,c,o,A,w){return this.jsPDFDocument.rect(g,c,o,A,w)},y.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},y.prototype.getTextWidth=function(g){return this.jsPDFDocument.getTextWidth(g)},y.prototype.getDocument=function(){return this.jsPDFDocument},y.prototype.setPage=function(g){this.jsPDFDocument.setPage(g)},y.prototype.addPage=function(){return this.jsPDFDocument.addPage()},y.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},y.prototype.getGlobalOptions=function(){return f||{}},y.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},y.prototype.pageSize=function(){var g=this.jsPDFDocument.internal.pageSize;return g.width==null&&(g={width:g.getWidth(),height:g.getHeight()}),g},y.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},y.prototype.getLineHeightFactor=function(){var g=this.jsPDFDocument;return g.getLineHeightFactor?g.getLineHeightFactor():1.15},y.prototype.getLineHeight=function(g){return g/this.scaleFactor()*this.getLineHeightFactor()},y.prototype.pageNumber=function(){var g=this.jsPDFDocument.internal.getCurrentPageInfo();return g?g.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},y}();b.DocHandler=E},4:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.parseHtml=void 0;var E=f(903),y=f(796);function g(A,w,m,h,s){var l,v;h===void 0&&(h=!1),s===void 0&&(s=!1);var n;typeof w=="string"?n=m.document.querySelector(w):n=w;var a=Object.keys(A.getFontList()),x=A.scaleFactor(),S=[],D=[],T=[];if(!n)return console.error("Html table could not be found with input: ",w),{head:S,body:D,foot:T};for(var j=0;j<n.rows.length;j++){var F=n.rows[j],O=(v=(l=F==null?void 0:F.parentElement)===null||l===void 0?void 0:l.tagName)===null||v===void 0?void 0:v.toLowerCase(),U=c(a,x,m,F,h,s);U&&(O==="thead"?S.push(U):O==="tfoot"?T.push(U):D.push(U))}return{head:S,body:D,foot:T}}b.parseHtml=g;function c(A,w,m,h,s,l){for(var v=new y.HtmlRowInput(h),n=0;n<h.cells.length;n++){var a=h.cells[n],x=m.getComputedStyle(a);if(s||x.display!=="none"){var S=void 0;l&&(S=(0,E.parseCss)(A,a,w,x,m)),v.push({rowSpan:a.rowSpan,colSpan:a.colSpan,styles:S,_element:a,content:o(a)})}}var D=m.getComputedStyle(h);if(v.length>0&&(s||D.display!=="none"))return v}function o(A){var w=A.cloneNode(!0);return w.innerHTML=w.innerHTML.replace(/\n/g,"").replace(/ +/g," "),w.innerHTML=w.innerHTML.split(/<br.*?>/).map(function(m){return m.trim()}).join(`
`),w.innerText||w.textContent||""}},776:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.parseInput=void 0;var E=f(4),y=f(356),g=f(420),c=f(744),o=f(792);function A(n,a){var x=new c.DocHandler(n),S=x.getDocumentOptions(),D=x.getGlobalOptions();(0,o.default)(x,D,S,a);var T=(0,y.assign)({},D,S,a),j;typeof window<"u"&&(j=window);var F=w(D,S,a),O=m(D,S,a),U=h(x,T),d=l(x,T,j);return{id:a.tableId,content:d,hooks:O,styles:F,settings:U}}b.parseInput=A;function w(n,a,x){for(var S={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},D=function(O){if(O==="columnStyles"){var U=n[O],d=a[O],u=x[O];S.columnStyles=(0,y.assign)({},U,d,u)}else{var I=[n,a,x],C=I.map(function(H){return H[O]||{}});S[O]=(0,y.assign)({},C[0],C[1],C[2])}},T=0,j=Object.keys(S);T<j.length;T++){var F=j[T];D(F)}return S}function m(n,a,x){for(var S=[n,a,x],D={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},T=0,j=S;T<j.length;T++){var F=j[T];F.didParseCell&&D.didParseCell.push(F.didParseCell),F.willDrawCell&&D.willDrawCell.push(F.willDrawCell),F.didDrawCell&&D.didDrawCell.push(F.didDrawCell),F.willDrawPage&&D.willDrawPage.push(F.willDrawPage),F.didDrawPage&&D.didDrawPage.push(F.didDrawPage)}return D}function h(n,a){var x,S,D,T,j,F,O,U,d,u,I,C,H=(0,g.parseSpacing)(a.margin,40/n.scaleFactor()),W=(x=s(n,a.startY))!==null&&x!==void 0?x:H.top,L;a.showFoot===!0?L="everyPage":a.showFoot===!1?L="never":L=(S=a.showFoot)!==null&&S!==void 0?S:"everyPage";var B;a.showHead===!0?B="everyPage":a.showHead===!1?B="never":B=(D=a.showHead)!==null&&D!==void 0?D:"everyPage";var $=(T=a.useCss)!==null&&T!==void 0?T:!1,Y=a.theme||($?"plain":"striped"),z=!!a.horizontalPageBreak,K=(j=a.horizontalPageBreakRepeat)!==null&&j!==void 0?j:null;return{includeHiddenHtml:(F=a.includeHiddenHtml)!==null&&F!==void 0?F:!1,useCss:$,theme:Y,startY:W,margin:H,pageBreak:(O=a.pageBreak)!==null&&O!==void 0?O:"auto",rowPageBreak:(U=a.rowPageBreak)!==null&&U!==void 0?U:"auto",tableWidth:(d=a.tableWidth)!==null&&d!==void 0?d:"auto",showHead:B,showFoot:L,tableLineWidth:(u=a.tableLineWidth)!==null&&u!==void 0?u:0,tableLineColor:(I=a.tableLineColor)!==null&&I!==void 0?I:200,horizontalPageBreak:z,horizontalPageBreakRepeat:K,horizontalPageBreakBehaviour:(C=a.horizontalPageBreakBehaviour)!==null&&C!==void 0?C:"afterAllRows"}}function s(n,a){var x=n.getLastAutoTable(),S=n.scaleFactor(),D=n.pageNumber(),T=!1;if(x&&x.startPageNumber){var j=x.startPageNumber+x.pageNumber-1;T=j===D}return typeof a=="number"?a:(a==null||a===!1)&&T&&(x==null?void 0:x.finalY)!=null?x.finalY+20/S:null}function l(n,a,x){var S=a.head||[],D=a.body||[],T=a.foot||[];if(a.html){var j=a.includeHiddenHtml;if(x){var F=(0,E.parseHtml)(n,a.html,x,j,a.useCss)||{};S=F.head||S,D=F.body||S,T=F.foot||S}else console.error("Cannot parse html in non browser environment")}var O=a.columns||v(S,D,T);return{columns:O,head:S,body:D,foot:T}}function v(n,a,x){var S=n[0]||a[0]||x[0]||[],D=[];return Object.keys(S).filter(function(T){return T!=="_element"}).forEach(function(T){var j=1,F;Array.isArray(S)?F=S[parseInt(T)]:F=S[T],typeof F=="object"&&!Array.isArray(F)&&(j=(F==null?void 0:F.colSpan)||1);for(var O=0;O<j;O++){var U=void 0;Array.isArray(S)?U=D.length:U=T+(O>0?"_".concat(O):"");var d={dataKey:U};D.push(d)}}),D}},792:function(N,b){Object.defineProperty(b,"__esModule",{value:!0});function f(y,g,c,o){for(var A=function(s){s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),typeof s.extendWidth<"u"&&(s.tableWidth=s.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof s.margins<"u"&&(typeof s.margin>"u"&&(s.margin=s.margins),console.error("Use of deprecated option: margins, use margin instead.")),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY),!s.didDrawPage&&(s.afterPageContent||s.beforePageContent||s.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),s.didDrawPage=function(T){y.applyStyles(y.userStyles),s.beforePageContent&&s.beforePageContent(T),y.applyStyles(y.userStyles),s.afterPageContent&&s.afterPageContent(T),y.applyStyles(y.userStyles),s.afterPageAdd&&T.pageNumber>1&&T.afterPageAdd(T),y.applyStyles(y.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(T){s[T]&&console.error('The "'.concat(T,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(T){var j=T[0],F=T[1];s[F]&&(console.error("Use of deprecated option ".concat(F,". Use ").concat(j," instead")),s[j]=s[F])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(T){var j=typeof T=="string"?T:T[0],F=typeof T=="string"?T:T[1];typeof s[j]<"u"&&(typeof s.styles[F]>"u"&&(s.styles[F]=s[j]),console.error("Use of deprecated option: "+j+", use the style "+F+" instead."))});for(var l=0,v=["styles","bodyStyles","headStyles","footStyles"];l<v.length;l++){var n=v[l];E(s[n]||{})}for(var a=s.columnStyles||{},x=0,S=Object.keys(a);x<S.length;x++){var D=S[x];E(a[D]||{})}},w=0,m=[g,c,o];w<m.length;w++){var h=m[w];A(h)}}b.default=f;function E(y){y.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),y.minCellHeight||(y.minCellHeight=y.rowHeight)):y.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),y.cellWidth||(y.cellWidth=y.columnWidth))}},260:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.Column=b.Cell=b.Row=b.Table=void 0;var E=f(796),y=f(172),g=f(420),c=function(){function m(h,s){this.pageNumber=1,this.pageCount=1,this.id=h.id,this.settings=h.settings,this.styles=h.styles,this.hooks=h.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return m.prototype.getHeadHeight=function(h){return this.head.reduce(function(s,l){return s+l.getMaxCellHeight(h)},0)},m.prototype.getFootHeight=function(h){return this.foot.reduce(function(s,l){return s+l.getMaxCellHeight(h)},0)},m.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},m.prototype.callCellHooks=function(h,s,l,v,n,a){for(var x=0,S=s;x<S.length;x++){var D=S[x],T=new y.CellHookData(h,this,l,v,n,a),j=D(T)===!1;if(l.text=Array.isArray(l.text)?l.text:[l.text],j)return!1}return!0},m.prototype.callEndPageHooks=function(h,s){h.applyStyles(h.userStyles);for(var l=0,v=this.hooks.didDrawPage;l<v.length;l++){var n=v[l];n(new y.HookData(h,this,s))}},m.prototype.callWillDrawPageHooks=function(h,s){for(var l=0,v=this.hooks.willDrawPage;l<v.length;l++){var n=v[l];n(new y.HookData(h,this,s))}},m.prototype.getWidth=function(h){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(v,n){return v+n.wrappedWidth},0);return s}else{var l=this.settings.margin;return h-l.left-l.right}},m}();b.Table=c;var o=function(){function m(h,s,l,v,n){n===void 0&&(n=!1),this.height=0,this.raw=h,h instanceof E.HtmlRowInput&&(this.raw=h._element,this.element=h._element),this.index=s,this.section=l,this.cells=v,this.spansMultiplePages=n}return m.prototype.getMaxCellHeight=function(h){var s=this;return h.reduce(function(l,v){var n;return Math.max(l,((n=s.cells[v.index])===null||n===void 0?void 0:n.height)||0)},0)},m.prototype.hasRowSpan=function(h){var s=this;return h.filter(function(l){var v=s.cells[l.index];return v?v.rowSpan>1:!1}).length>0},m.prototype.canEntireRowFit=function(h,s){return this.getMaxCellHeight(s)<=h},m.prototype.getMinimumRowHeight=function(h,s){var l=this;return h.reduce(function(v,n){var a=l.cells[n.index];if(!a)return 0;var x=s.getLineHeight(a.styles.fontSize),S=a.padding("vertical"),D=S+x;return D>v?D:v},0)},m}();b.Row=o;var A=function(){function m(h,s,l){var v,n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=l,this.raw=h;var a=h;h!=null&&typeof h=="object"&&!Array.isArray(h)?(this.rowSpan=h.rowSpan||1,this.colSpan=h.colSpan||1,a=(n=(v=h.content)!==null&&v!==void 0?v:h.title)!==null&&n!==void 0?n:h,h._element&&(this.raw=h._element)):(this.rowSpan=1,this.colSpan=1);var x=a!=null?""+a:"",S=/\r\n|\r|\n/g;this.text=x.split(S)}return m.prototype.getTextPos=function(){var h;if(this.styles.valign==="top")h=this.y+this.padding("top");else if(this.styles.valign==="bottom")h=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");h=this.y+s/2+this.padding("top")}var l;if(this.styles.halign==="right")l=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var v=this.width-this.padding("horizontal");l=this.x+v/2+this.padding("left")}else l=this.x+this.padding("left");return{x:l,y:h}},m.prototype.getContentHeight=function(h,s){s===void 0&&(s=1.15);var l=Array.isArray(this.text)?this.text.length:1,v=this.styles.fontSize/h*s,n=l*v+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},m.prototype.padding=function(h){var s=(0,g.parseSpacing)(this.styles.cellPadding,0);return h==="vertical"?s.top+s.bottom:h==="horizontal"?s.left+s.right:s[h]},m}();b.Cell=A;var w=function(){function m(h,s,l){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=h,this.raw=s,this.index=l}return m.prototype.getMaxCustomCellWidth=function(h){for(var s=0,l=0,v=h.allRows();l<v.length;l++){var n=v[l],a=n.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(s=Math.max(s,a.styles.cellWidth))}return s},m}();b.Column=w},356:function(N,b){Object.defineProperty(b,"__esModule",{value:!0}),b.assign=void 0;function f(E,y,g,c,o){if(E==null)throw new TypeError("Cannot convert undefined or null to object");for(var A=Object(E),w=1;w<arguments.length;w++){var m=arguments[w];if(m!=null)for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(A[h]=m[h])}return A}b.assign=f},972:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.createTable=void 0;var E=f(744),y=f(260),g=f(324),c=f(796),o=f(356);function A(n,a){var x=new E.DocHandler(n),S=w(a,x.scaleFactor()),D=new y.Table(a,S);return(0,g.calculateWidths)(x,D),x.applyStyles(x.userStyles),D}b.createTable=A;function w(n,a){var x=n.content,S=l(x.columns);if(x.head.length===0){var D=h(S,"head");D&&x.head.push(D)}if(x.foot.length===0){var D=h(S,"foot");D&&x.foot.push(D)}var T=n.settings.theme,j=n.styles;return{columns:S,head:m("head",x.head,S,j,T,a),body:m("body",x.body,S,j,T,a),foot:m("foot",x.foot,S,j,T,a)}}function m(n,a,x,S,D,T){var j={},F=a.map(function(O,U){for(var d=0,u={},I=0,C=0,H=0,W=x;H<W.length;H++){var L=W[H];if(j[L.index]==null||j[L.index].left===0)if(C===0){var B=void 0;Array.isArray(O)?B=O[L.index-I-d]:B=O[L.dataKey];var $={};typeof B=="object"&&!Array.isArray(B)&&($=(B==null?void 0:B.styles)||{});var Y=v(n,L,U,D,S,T,$),z=new y.Cell(B,Y,n);u[L.dataKey]=z,u[L.index]=z,C=z.colSpan-1,j[L.index]={left:z.rowSpan-1,times:C}}else C--,I++;else j[L.index].left--,C=j[L.index].times,d++}return new y.Row(O,U,n,u)});return F}function h(n,a){var x={};return n.forEach(function(S){if(S.raw!=null){var D=s(a,S.raw);D!=null&&(x[S.dataKey]=D)}}),Object.keys(x).length>0?x:null}function s(n,a){if(n==="head"){if(typeof a=="object")return a.header||a.title||null;if(typeof a=="string"||typeof a=="number")return a}else if(n==="foot"&&typeof a=="object")return a.footer;return null}function l(n){return n.map(function(a,x){var S,D,T;return typeof a=="object"?T=(D=(S=a.dataKey)!==null&&S!==void 0?S:a.key)!==null&&D!==void 0?D:x:T=x,new y.Column(T,a,x)})}function v(n,a,x,S,D,T,j){var F=(0,c.getTheme)(S),O;n==="head"?O=D.headStyles:n==="body"?O=D.bodyStyles:n==="foot"&&(O=D.footStyles);var U=(0,o.assign)({},F.table,F[n],D.styles,O),d=D.columnStyles[a.dataKey]||D.columnStyles[a.index]||{},u=n==="body"?d:{},I=n==="body"&&x%2===0?(0,o.assign)({},F.alternateRow,D.alternateRowStyles):{},C=(0,c.defaultStyles)(T),H=(0,o.assign)({},C,U,I,u);return(0,o.assign)(H,j)}},664:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.addPage=b.drawTable=void 0;var E=f(420),y=f(260),g=f(744),c=f(356),o=f(136),A=f(224);function w(d,u){var I=u.settings,C=I.startY,H=I.margin,W={x:H.left,y:C},L=u.getHeadHeight(u.columns)+u.getFootHeight(u.columns),B=C+H.bottom+L;if(I.pageBreak==="avoid"){var $=u.body,Y=$.reduce(function(X,re){return X+re.height},0);B+=Y}var z=new g.DocHandler(d);(I.pageBreak==="always"||I.startY!=null&&B>z.pageSize().height)&&(U(z),W.y=H.top),u.callWillDrawPageHooks(z,W);var K=(0,c.assign)({},W);u.startPageNumber=z.pageNumber(),I.horizontalPageBreak?m(z,u,K,W):(z.applyStyles(z.userStyles),(I.showHead==="firstPage"||I.showHead==="everyPage")&&u.head.forEach(function(X){return D(z,u,X,W,u.columns)}),z.applyStyles(z.userStyles),u.body.forEach(function(X,re){var he=re===u.body.length-1;S(z,u,X,he,K,W,u.columns)}),z.applyStyles(z.userStyles),(I.showFoot==="lastPage"||I.showFoot==="everyPage")&&u.foot.forEach(function(X){return D(z,u,X,W,u.columns)})),(0,E.addTableBorder)(z,u,K,W),u.callEndPageHooks(z,W),u.finalY=W.y,d.lastAutoTable=u,d.previousAutoTable=u,d.autoTable&&(d.autoTable.previous=u),z.applyStyles(z.userStyles)}b.drawTable=w;function m(d,u,I,C){var H=(0,A.calculateAllColumnsCanFitInPage)(d,u),W=u.settings;if(W.horizontalPageBreakBehaviour==="afterAllRows")H.forEach(function(Y,z){d.applyStyles(d.userStyles),z>0?O(d,u,I,C,Y.columns,!0):h(d,u,C,Y.columns),s(d,u,I,C,Y.columns),v(d,u,C,Y.columns)});else for(var L=-1,B=H[0],$=function(){var Y=L;if(B){d.applyStyles(d.userStyles);var z=B.columns;L>=0?O(d,u,I,C,z,!0):h(d,u,C,z),Y=l(d,u,L+1,C,z),v(d,u,C,z)}var K=Y-L;H.slice(1).forEach(function(X){d.applyStyles(d.userStyles),O(d,u,I,C,X.columns,!0),l(d,u,L+1,C,X.columns,K),v(d,u,C,X.columns)}),L=Y};L<u.body.length-1;)$()}function h(d,u,I,C){var H=u.settings;d.applyStyles(d.userStyles),(H.showHead==="firstPage"||H.showHead==="everyPage")&&u.head.forEach(function(W){return D(d,u,W,I,C)})}function s(d,u,I,C,H){d.applyStyles(d.userStyles),u.body.forEach(function(W,L){var B=L===u.body.length-1;S(d,u,W,B,I,C,H)})}function l(d,u,I,C,H,W){d.applyStyles(d.userStyles),W=W??u.body.length;var L=Math.min(I+W,u.body.length),B=-1;return u.body.slice(I,L).forEach(function($,Y){var z=I+Y===u.body.length-1,K=F(d,u,z,C);$.canEntireRowFit(K,H)&&(D(d,u,$,C,H),B=I+Y)}),B}function v(d,u,I,C){var H=u.settings;d.applyStyles(d.userStyles),(H.showFoot==="lastPage"||H.showFoot==="everyPage")&&u.foot.forEach(function(W){return D(d,u,W,I,C)})}function n(d,u,I){var C=I.getLineHeight(d.styles.fontSize),H=d.padding("vertical"),W=Math.floor((u-H)/C);return Math.max(0,W)}function a(d,u,I,C){var H={};d.spansMultiplePages=!0,d.height=0;for(var W=0,L=0,B=I.columns;L<B.length;L++){var $=B[L],Y=d.cells[$.index];if(Y){Array.isArray(Y.text)||(Y.text=[Y.text]);var z=new y.Cell(Y.raw,Y.styles,Y.section);z=(0,c.assign)(z,Y),z.text=[];var K=n(Y,u,C);Y.text.length>K&&(z.text=Y.text.splice(K,Y.text.length));var X=C.scaleFactor(),re=C.getLineHeightFactor();Y.contentHeight=Y.getContentHeight(X,re),Y.contentHeight>=u&&(Y.contentHeight=u,z.styles.minCellHeight-=u),Y.contentHeight>d.height&&(d.height=Y.contentHeight),z.contentHeight=z.getContentHeight(X,re),z.contentHeight>W&&(W=z.contentHeight),H[$.index]=z}}var he=new y.Row(d.raw,-1,d.section,H,!0);he.height=W;for(var Ie=0,Ve=I.columns;Ie<Ve.length;Ie++){var $=Ve[Ie],z=he.cells[$.index];z&&(z.height=he.height);var Y=d.cells[$.index];Y&&(Y.height=d.height)}return he}function x(d,u,I,C){var H=d.pageSize().height,W=C.settings.margin,L=W.top+W.bottom,B=H-L;u.section==="body"&&(B-=C.getHeadHeight(C.columns)+C.getFootHeight(C.columns));var $=u.getMinimumRowHeight(C.columns,d),Y=$<I;if($>B)return console.error("Will not be able to print row ".concat(u.index," correctly since it's minimum height is larger than page height")),!0;if(!Y)return!1;var z=u.hasRowSpan(C.columns),K=u.getMaxCellHeight(C.columns)>B;return K?(z&&console.error("The content of row ".concat(u.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(z||C.settings.rowPageBreak==="avoid")}function S(d,u,I,C,H,W,L){var B=F(d,u,C,W);if(I.canEntireRowFit(B,L))D(d,u,I,W,L);else if(x(d,I,B,u)){var $=a(I,B,u,d);D(d,u,I,W,L),O(d,u,H,W,L),S(d,u,$,C,H,W,L)}else O(d,u,H,W,L),S(d,u,I,C,H,W,L)}function D(d,u,I,C,H){C.x=u.settings.margin.left;for(var W=0,L=H;W<L.length;W++){var B=L[W],$=I.cells[B.index];if(!$){C.x+=B.width;continue}d.applyStyles($.styles),$.x=C.x,$.y=C.y;var Y=u.callCellHooks(d,u.hooks.willDrawCell,$,I,B,C);if(Y===!1){C.x+=B.width;continue}T(d,$,C);var z=$.getTextPos();(0,o.default)($.text,z.x,z.y,{halign:$.styles.halign,valign:$.styles.valign,maxWidth:Math.ceil($.width-$.padding("left")-$.padding("right"))},d.getDocument()),u.callCellHooks(d,u.hooks.didDrawCell,$,I,B,C),C.x+=B.width}C.y+=I.height}function T(d,u,I){var C=u.styles;if(d.getDocument().setFillColor(d.getDocument().getFillColor()),typeof C.lineWidth=="number"){var H=(0,E.getFillStyle)(C.lineWidth,C.fillColor);H&&d.rect(u.x,I.y,u.width,u.height,H)}else typeof C.lineWidth=="object"&&(C.fillColor&&d.rect(u.x,I.y,u.width,u.height,"F"),j(d,u,I,C.lineWidth))}function j(d,u,I,C){var H,W,L,B;C.top&&(H=I.x,W=I.y,L=I.x+u.width,B=I.y,C.right&&(L+=.5*C.right),C.left&&(H-=.5*C.left),$(C.top,H,W,L,B)),C.bottom&&(H=I.x,W=I.y+u.height,L=I.x+u.width,B=I.y+u.height,C.right&&(L+=.5*C.right),C.left&&(H-=.5*C.left),$(C.bottom,H,W,L,B)),C.left&&(H=I.x,W=I.y,L=I.x,B=I.y+u.height,C.top&&(W-=.5*C.top),C.bottom&&(B+=.5*C.bottom),$(C.left,H,W,L,B)),C.right&&(H=I.x+u.width,W=I.y,L=I.x+u.width,B=I.y+u.height,C.top&&(W-=.5*C.top),C.bottom&&(B+=.5*C.bottom),$(C.right,H,W,L,B));function $(Y,z,K,X,re){d.getDocument().setLineWidth(Y),d.getDocument().line(z,K,X,re,"S")}}function F(d,u,I,C){var H=u.settings.margin.bottom,W=u.settings.showFoot;return(W==="everyPage"||W==="lastPage"&&I)&&(H+=u.getFootHeight(u.columns)),d.pageSize().height-C.y-H}function O(d,u,I,C,H,W){H===void 0&&(H=[]),W===void 0&&(W=!1),d.applyStyles(d.userStyles),u.settings.showFoot==="everyPage"&&!W&&u.foot.forEach(function(B){return D(d,u,B,C,H)}),u.callEndPageHooks(d,C);var L=u.settings.margin;(0,E.addTableBorder)(d,u,I,C),U(d),u.pageNumber++,u.pageCount++,C.x=L.left,C.y=L.top,I.y=L.top,u.callWillDrawPageHooks(d,C),u.settings.showHead==="everyPage"&&(u.head.forEach(function(B){return D(d,u,B,C,H)}),d.applyStyles(d.userStyles))}b.addPage=O;function U(d){var u=d.pageNumber();d.setPage(u+1);var I=d.pageNumber();return I===u?(d.addPage(),!0):!1}},224:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.calculateAllColumnsCanFitInPage=void 0;var E=f(420);function y(c,o,A){var w;A===void 0&&(A={});var m=(0,E.getPageAvailableWidth)(c,o),h=new Map,s=[],l=[],v=[];o.settings.horizontalPageBreakRepeat,Array.isArray(o.settings.horizontalPageBreakRepeat)?v=o.settings.horizontalPageBreakRepeat:(typeof o.settings.horizontalPageBreakRepeat=="string"||typeof o.settings.horizontalPageBreakRepeat=="number")&&(v=[o.settings.horizontalPageBreakRepeat]),v.forEach(function(S){var D=o.columns.find(function(T){return T.dataKey===S||T.index===S});D&&!h.has(D.index)&&(h.set(D.index,!0),s.push(D.index),l.push(o.columns[D.index]),m-=D.wrappedWidth)});for(var n=!0,a=(w=A==null?void 0:A.start)!==null&&w!==void 0?w:0;a<o.columns.length;){if(h.has(a)){a++;continue}var x=o.columns[a].wrappedWidth;if(n||m>=x)n=!1,s.push(a),l.push(o.columns[a]),m-=x;else break;a++}return{colIndexes:s,columns:l,lastIndex:a-1}}function g(c,o){for(var A=[],w=0;w<o.columns.length;w++){var m=y(c,o,{start:w});m.columns.length&&(A.push(m),w=m.lastIndex)}return A}b.calculateAllColumnsCanFitInPage=g},324:function(N,b,f){Object.defineProperty(b,"__esModule",{value:!0}),b.ellipsize=b.resizeColumns=b.calculateWidths=void 0;var E=f(420);function y(s,l){g(s,l);var v=[],n=0;l.columns.forEach(function(x){var S=x.getMaxCustomCellWidth(l);S?x.width=S:(x.width=x.wrappedWidth,v.push(x)),n+=x.width});var a=l.getWidth(s.pageSize().width)-n;a&&(a=c(v,a,function(x){return Math.max(x.minReadableWidth,x.minWidth)})),a&&(a=c(v,a,function(x){return x.minWidth})),a=Math.abs(a),!l.settings.horizontalPageBreak&&a>.1/s.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),A(l),w(l,s),o(l)}b.calculateWidths=y;function g(s,l){var v=s.scaleFactor(),n=l.settings.horizontalPageBreak,a=(0,E.getPageAvailableWidth)(s,l);l.allRows().forEach(function(x){for(var S=0,D=l.columns;S<D.length;S++){var T=D[S],j=x.cells[T.index];if(j){var F=l.hooks.didParseCell;l.callCellHooks(s,F,j,x,T,null);var O=j.padding("horizontal");j.contentWidth=(0,E.getStringWidth)(j.text,j.styles,s)+O;var U=(0,E.getStringWidth)(j.text.join(" ").split(/[^\S\u00A0]+/),j.styles,s);if(j.minReadableWidth=U+j.padding("horizontal"),typeof j.styles.cellWidth=="number")j.minWidth=j.styles.cellWidth,j.wrappedWidth=j.styles.cellWidth;else if(j.styles.cellWidth==="wrap"||n===!0)j.contentWidth>a?(j.minWidth=a,j.wrappedWidth=a):(j.minWidth=j.contentWidth,j.wrappedWidth=j.contentWidth);else{var d=10/v;j.minWidth=j.styles.minCellWidth||d,j.wrappedWidth=j.contentWidth,j.minWidth>j.wrappedWidth&&(j.wrappedWidth=j.minWidth)}}}}),l.allRows().forEach(function(x){for(var S=0,D=l.columns;S<D.length;S++){var T=D[S],j=x.cells[T.index];if(j&&j.colSpan===1)T.wrappedWidth=Math.max(T.wrappedWidth,j.wrappedWidth),T.minWidth=Math.max(T.minWidth,j.minWidth),T.minReadableWidth=Math.max(T.minReadableWidth,j.minReadableWidth);else{var F=l.styles.columnStyles[T.dataKey]||l.styles.columnStyles[T.index]||{},O=F.cellWidth||F.minCellWidth;O&&typeof O=="number"&&(T.minWidth=O,T.wrappedWidth=O)}j&&(j.colSpan>1&&!T.minWidth&&(T.minWidth=j.minWidth),j.colSpan>1&&!T.wrappedWidth&&(T.wrappedWidth=j.minWidth))}})}function c(s,l,v){for(var n=l,a=s.reduce(function(d,u){return d+u.wrappedWidth},0),x=0;x<s.length;x++){var S=s[x],D=S.wrappedWidth/a,T=n*D,j=S.width+T,F=v(S),O=j<F?F:j;l-=O-S.width,S.width=O}if(l=Math.round(l*1e10)/1e10,l){var U=s.filter(function(d){return l<0?d.width>v(d):!0});U.length&&(l=c(U,l,v))}return l}b.resizeColumns=c;function o(s){for(var l={},v=1,n=s.allRows(),a=0;a<n.length;a++)for(var x=n[a],S=0,D=s.columns;S<D.length;S++){var T=D[S],j=l[T.index];if(v>1)v--,delete x.cells[T.index];else if(j)j.cell.height+=x.height,v=j.cell.colSpan,delete x.cells[T.index],j.left--,j.left<=1&&delete l[T.index];else{var F=x.cells[T.index];if(!F)continue;if(F.height=x.height,F.rowSpan>1){var O=n.length-a,U=F.rowSpan>O?O:F.rowSpan;l[T.index]={cell:F,left:U,row:x}}}}}function A(s){for(var l=s.allRows(),v=0;v<l.length;v++)for(var n=l[v],a=null,x=0,S=0,D=0;D<s.columns.length;D++){var T=s.columns[D];if(S-=1,S>1&&s.columns[D+1])x+=T.width,delete n.cells[T.index];else if(a){var j=a;delete n.cells[T.index],a=null,j.width=T.width+x}else{var j=n.cells[T.index];if(!j)continue;if(S=j.colSpan,x=0,j.colSpan>1){a=j,x+=T.width;continue}j.width=T.width+x}}}function w(s,l){for(var v={count:0,height:0},n=0,a=s.allRows();n<a.length;n++){for(var x=a[n],S=0,D=s.columns;S<D.length;S++){var T=D[S],j=x.cells[T.index];if(j){l.applyStyles(j.styles,!0);var F=j.width-j.padding("horizontal");if(j.styles.overflow==="linebreak")j.text=l.splitTextToSize(j.text,F+1/l.scaleFactor(),{fontSize:j.styles.fontSize});else if(j.styles.overflow==="ellipsize")j.text=m(j.text,F,j.styles,l,"...");else if(j.styles.overflow==="hidden")j.text=m(j.text,F,j.styles,l,"");else if(typeof j.styles.overflow=="function"){var O=j.styles.overflow(j.text,F);typeof O=="string"?j.text=[O]:j.text=O}j.contentHeight=j.getContentHeight(l.scaleFactor(),l.getLineHeightFactor());var U=j.contentHeight/j.rowSpan;j.rowSpan>1&&v.count*v.height<U*j.rowSpan?v={height:U,count:j.rowSpan}:v&&v.count>0&&v.height>U&&(U=v.height),U>x.height&&(x.height=U)}}v.count--}}function m(s,l,v,n,a){return s.map(function(x){return h(x,l,v,n,a)})}b.ellipsize=m;function h(s,l,v,n,a){var x=1e4*n.scaleFactor();if(l=Math.ceil(l*x)/x,l>=(0,E.getStringWidth)(s,v,n))return s;for(;l<(0,E.getStringWidth)(s+a,v,n)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+a}},964:function(N){if(typeof p>"u"){var b=new Error("Cannot find module 'undefined'");throw b.code="MODULE_NOT_FOUND",b}N.exports=p}},P={};function k(N){var b=P[N];if(b!==void 0)return b.exports;var f=P[N]={exports:{}};return r[N].call(f.exports,f,f.exports,k),f.exports}var _={};return function(){var N=_;Object.defineProperty(N,"__esModule",{value:!0}),N.Cell=N.Column=N.Row=N.Table=N.CellHookData=N.__drawTable=N.__createTable=N.applyPlugin=void 0;var b=k(340),f=k(776),E=k(664),y=k(972),g=k(260);Object.defineProperty(N,"Table",{enumerable:!0,get:function(){return g.Table}});var c=k(172);Object.defineProperty(N,"CellHookData",{enumerable:!0,get:function(){return c.CellHookData}});var o=k(260);Object.defineProperty(N,"Cell",{enumerable:!0,get:function(){return o.Cell}}),Object.defineProperty(N,"Column",{enumerable:!0,get:function(){return o.Column}}),Object.defineProperty(N,"Row",{enumerable:!0,get:function(){return o.Row}});function A(l){(0,b.default)(l)}N.applyPlugin=A;function w(l,v){var n=(0,f.parseInput)(l,v),a=(0,y.createTable)(l,n);(0,E.drawTable)(l,a)}function m(l,v){var n=(0,f.parseInput)(l,v);return(0,y.createTable)(l,n)}N.__createTable=m;function h(l,v){(0,E.drawTable)(l,v)}N.__drawTable=h;try{var s=k(964);s.jsPDF&&(s=s.jsPDF),A(s)}catch{}N.default=w}(),_}()})})(xs);const me=(t,i="Rs.")=>{const p=parseFloat(String(t))||0;return`${i==="₹"?"Rs.":i} ${p.toFixed(2)}`},qe=(t,i,p={})=>{const r=new Ot,P=r.internal.pageSize.getWidth(),k=20,_=P-2*k;let N=20;const b=p.taxLabel||"Tax",f=ce(t.items,t.taxRate,t.discount),E=i.currency||"Rs.";r.setFontSize(16),r.setFont("helvetica","bold"),r.text(i.name||"Business Name",k,N),r.setFontSize(12),r.text("INVOICE",P-k,N,{align:"right"}),N+=7,r.setFontSize(10),r.setFont("helvetica","normal"),r.text(t.invoiceNumber,P-k,N,{align:"right"}),N=30,r.setFontSize(9);const y=[];i.address&&y.push(i.address),(i.city||i.state)&&y.push(`${i.city||""}${i.city&&i.state?", ":""}${i.state||""} ${i.pincode||""}`.trim()),i.phone&&y.push(`Phone: ${i.phone}`),i.email&&y.push(`Email: ${i.email}`),i.taxId&&y.push(`${b} ID: ${i.taxId}`),y.forEach(s=>{r.text(s,k,N),N+=4}),N+=5,r.setLineWidth(.5),r.line(k,N,P-k,N),N+=10,r.setFont("helvetica","bold"),r.text("Bill To:",k,N),r.text("Invoice Details:",P/2+10,N),N+=6,r.setFont("helvetica","normal");const g=N;r.text(t.customerName||"Customer",k,g);let c=g+4;if(t.customerAddress){const s=r.splitTextToSize(t.customerAddress,_/2-20);r.text(s,k,c),c+=s.length*4}t.customerPhone&&(r.text(`Phone: ${t.customerPhone}`,k,c),c+=4),t.customerEmail&&r.text(`Email: ${t.customerEmail}`,k,c);const o=P/2+10;r.text(`Date: ${ge(t.date)}`,o,g),N=Math.max(c,g+12)+10;const A=t.items.map((s,l)=>[(l+1).toString(),s.name,s.quantity.toString(),me(s.price,E),me(s.quantity*s.price,E)]);r.autoTable({startY:N,head:[["#","Description","Qty","Rate","Amount"]],body:A,margin:{left:k,right:k},tableWidth:_,styles:{fontSize:9,cellPadding:4,lineColor:[0,0,0],lineWidth:.1,textColor:[0,0,0]},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.3},bodyStyles:{fillColor:[255,255,255]},columnStyles:{0:{cellWidth:12,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:20,halign:"center"},3:{cellWidth:30,halign:"right"},4:{cellWidth:35,halign:"right"}}}),N=r.lastAutoTable.finalY+10;const w=P-k-80,m=P-k;if(r.setFontSize(9),r.text("Subtotal:",w,N),r.text(me(f.subtotal,E),m,N,{align:"right"}),t.discount>0&&(N+=6,r.text(`Discount (${t.discount}%):`,w,N),r.text(`-${me(f.discountAmount,E)}`,m,N,{align:"right"})),t.taxRate>0&&(N+=6,r.text(`${b} (${t.taxRate}%):`,w,N),r.text(me(f.taxAmount,E),m,N,{align:"right"})),N+=4,r.setLineWidth(.3),r.line(w-5,N,m,N),N+=6,r.setFont("helvetica","bold"),r.setFontSize(11),r.text("TOTAL:",w,N),r.text(me(f.total,E),m,N,{align:"right"}),N+=15,r.setFont("helvetica","normal"),r.setFontSize(9),r.text("Amount in Words:",k,N),N+=5,r.setFont("helvetica","bold"),r.text(`${de(Math.floor(f.total))} Only`,k,N),t.notes){N+=12,r.setFont("helvetica","normal"),r.setFontSize(9),r.text("Notes:",k,N),N+=5;const s=r.splitTextToSize(t.notes,_);r.text(s,k,N)}const h=r.internal.pageSize.getHeight()-20;return r.setLineWidth(.3),r.line(k,h-5,P-k,h-5),r.setFont("helvetica","normal"),r.setFontSize(8),r.text("Thank you for your business!",P/2,h,{align:"center"}),r},De=(t,i,p)=>{qe(t,i,p).save(`${t.invoiceNumber}.pdf`)},gs=(t,i,p)=>qe(t,i,p).output("blob"),ps=(t,i,p)=>{const P=qe(t,i,p).output("blob"),k=URL.createObjectURL(P);window.open(k,"_blank")};function vs(){const t=ie.get(),i=oe.get(),[p,r]=R.useState(()=>Z.getAll()),[P,k]=R.useState(""),[_,N]=R.useState("all"),[b,f]=R.useState("date"),[E,y]=R.useState("desc"),[g,c]=R.useState(null),[o,A]=R.useState(null),w=R.useMemo(()=>{let n=[...p];if(P){const a=P.toLowerCase();n=n.filter(x=>{var S,D,T,j;return((S=x.customerName)==null?void 0:S.toLowerCase().includes(a))||((D=x.invoiceNumber)==null?void 0:D.toLowerCase().includes(a))||((T=x.customerEmail)==null?void 0:T.toLowerCase().includes(a))||((j=x.customerPhone)==null?void 0:j.includes(a))})}return _!=="all"&&(n=n.filter(a=>a.status===_)),n.sort((a,x)=>{var T,j;let S,D;if(b==="date")S=new Date(a.createdAt||a.date).getTime(),D=new Date(x.createdAt||x.date).getTime();else if(b==="amount"){const F=ce(a.items,a.taxRate,a.discount),O=ce(x.items,x.taxRate,x.discount);S=F.total,D=O.total}else b==="customer"?(S=((T=a.customerName)==null?void 0:T.toLowerCase())||"",D=((j=x.customerName)==null?void 0:j.toLowerCase())||""):(S=a.invoiceNumber,D=x.invoiceNumber);return E==="asc"?S>D?1:-1:S<D?1:-1}),n},[p,P,_,b,E]),m=R.useMemo(()=>({total:p.length,draft:p.filter(n=>n.status==="draft").length,pending:p.filter(n=>n.status==="pending").length,paid:p.filter(n=>n.status==="paid").length,overdue:p.filter(n=>n.status==="overdue").length}),[p]),h=n=>{Z.delete(n),r(Z.getAll()),A(null),c(null)},s=n=>{De(n,t,i),c(null)},l=n=>{b===n?y(E==="asc"?"desc":"asc"):(f(n),y("desc"))},v=n=>{k(n.target.value)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Invoices"}),e.jsxs("p",{className:"text-midnight-400",children:[w.length," of ",p.length," invoices"]})]}),e.jsxs(G,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All",count:m.total},{key:"draft",label:"Draft",count:m.draft},{key:"pending",label:"Pending",count:m.pending},{key:"paid",label:"Paid",count:m.paid},{key:"overdue",label:"Overdue",count:m.overdue}].map(n=>e.jsxs("button",{onClick:()=>N(n.key),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${_===n.key?"bg-teal-500/20 text-teal-400":"bg-midnight-700/50 text-midnight-300 hover:bg-midnight-700"}`,children:[n.label,e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-midnight-800",children:n.count})]},n.key))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices...",value:P,onChange:v,className:"input-field pl-12"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>l("date"),className:`btn-secondary flex items-center gap-2 ${b==="date"?"border-teal-500":""}`,children:[e.jsx(Lt,{className:"w-4 h-4"}),"Date",b==="date"&&(E==="asc"?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}))]}),e.jsxs("button",{onClick:()=>l("amount"),className:`btn-secondary flex items-center gap-2 ${b==="amount"?"border-teal-500":""}`,children:["Amount",b==="amount"&&(E==="asc"?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}))]})]})]}),w.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(fe,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:P||_!=="all"?"Try adjusting your search or filters":"Create your first invoice to get started"}),!P&&_==="all"&&e.jsxs(G,{to:"/invoices/new",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Create Invoice"]})]}):e.jsx("div",{className:"space-y-3",children:w.map(n=>{const a=ce(n.items,n.taxRate,n.discount);return e.jsx("div",{className:"glass rounded-xl p-4 sm:p-6 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(G,{to:`/invoices/view/${n.id}`,className:"text-lg font-semibold text-white hover:text-teal-400 transition-colors truncate",children:n.customerName}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Ge(n.status)}`,children:Je(n.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-midnight-400",children:[e.jsx("span",{className:"font-mono",children:n.invoiceNumber}),e.jsx("span",{children:"•"}),e.jsx("span",{children:ge(n.date)}),n.items.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[n.items.length," item",n.items.length>1?"s":""]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:J(a.total,t.currency)})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(g===n.id?null:n.id),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx(Mt,{className:"w-5 h-5 text-midnight-400"})}),g===n.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(null)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:[e.jsxs(G,{to:`/invoices/view/${n.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>c(null),children:[e.jsx(mt,{className:"w-4 h-4 text-midnight-400"}),"View Invoice"]}),e.jsxs(G,{to:`/invoices/edit/${n.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>c(null),children:[e.jsx(je,{className:"w-4 h-4 text-midnight-400"}),"Edit Invoice"]}),e.jsxs("button",{onClick:()=>s(n),className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors w-full",children:[e.jsx(Ue,{className:"w-4 h-4 text-midnight-400"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>{A(n.id),c(null)},className:"flex items-center gap-3 px-4 py-3 text-coral-400 hover:bg-coral-500/10 transition-colors w-full",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Delete"]})]})]})]})]})]})},n.id)})}),o&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Invoice?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>A(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>h(o),className:"btn-danger",children:"Delete"})]})]})})]})}function rt(){const t=be(),{id:i}=lt(),p=!!i,r=ie.get(),P=oe.get(),[k,_]=R.useState([]),[N,b]=R.useState([]);R.useEffect(()=>{_(ae.getAll()),b(ne.getAll())},[]);const[f,E]=R.useState({id:ue(),invoiceNumber:Z.getNextInvoiceNumber(),date:ge(new Date,"input"),customerName:"",customerEmail:"",customerPhone:"",customerAddress:"",items:[{id:ue(),name:"",quantity:1,price:0}],taxRate:r.taxRate||P.taxRate||0,discount:0,notes:"",status:"draft"}),[y,g]=R.useState(!1),[c,o]=R.useState(null),[A,w]=R.useState(""),[m,h]=R.useState(""),[s,l]=R.useState({});R.useEffect(()=>{if(p&&i){const d=Z.getById(i);d?E({...d,date:ge(d.date,"input")}):t("/invoices")}},[i,p,t]);const v=R.useMemo(()=>ce(f.items,f.taxRate,f.discount),[f.items,f.taxRate,f.discount]),n=R.useMemo(()=>A?k.filter(d=>{var u;return d.name.toLowerCase().includes(A.toLowerCase())||((u=d.phone)==null?void 0:u.includes(A))}).slice(0,5):k.slice(0,5),[k,A]),a=R.useMemo(()=>m?N.filter(d=>d.name.toLowerCase().includes(m.toLowerCase())).slice(0,5):N.slice(0,5),[N,m]),x=d=>{const{name:u,value:I}=d.target;E(C=>({...C,[u]:I})),s[u]&&l(C=>({...C,[u]:null}))},S=(d,u,I)=>{E(C=>({...C,items:C.items.map(H=>H.id===d?{...H,[u]:I}:H)}))},D=()=>{E(d=>({...d,items:[...d.items,{id:ue(),name:"",quantity:1,price:0}]}))},T=d=>{f.items.length>1&&E(u=>({...u,items:u.items.filter(I=>I.id!==d)}))},j=d=>{E(u=>({...u,customerName:d.name,customerEmail:d.email||"",customerPhone:d.phone||"",customerAddress:d.address||""})),g(!1),w("")},F=(d,u)=>{E(I=>({...I,items:I.items.map(C=>C.id===u?{...C,name:d.name,price:d.price}:C)})),o(null),h("")},O=()=>{const d={};return f.customerName.trim()||(d.customerName="Customer name is required"),f.items.some(u=>!u.name.trim())&&(d.items="All items must have a name"),f.items.some(u=>u.quantity<=0)&&(d.items="Quantity must be greater than 0"),l(d),Object.keys(d).length===0},U=(d="draft")=>{if(!O())return;const u={...f,status:d,date:new Date(f.date).toISOString()};Z.save(u),f.customerName&&!k.find(I=>I.name===f.customerName)&&ae.save({id:ue(),name:f.customerName,email:f.customerEmail,phone:f.customerPhone,address:f.customerAddress}),t(`/invoices/view/${f.id}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2.5 -ml-1 rounded-lg hover:bg-midnight-700 active:bg-midnight-600 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-display font-bold text-white truncate",children:p?"Edit Invoice":"Create Invoice"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:f.invoiceNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:()=>U("draft"),className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Draft"})]}),e.jsxs("button",{onClick:()=>U("pending"),className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Save & Preview"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(He,{className:"w-5 h-5 text-teal-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Customer Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"customerName",value:f.customerName,onChange:d=>{x(d),w(d.target.value),g(!0)},onFocus:()=>g(!0),className:`input-field ${s.customerName?"border-coral-500":""}`,placeholder:"Enter customer name"}),y&&n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:n.map(d=>e.jsxs("button",{type:"button",onClick:()=>j(d),className:"w-full px-4 py-3 text-left hover:bg-midnight-700 transition-colors",children:[e.jsx("p",{className:"text-white font-medium",children:d.name}),d.phone&&e.jsx("p",{className:"text-midnight-400 text-sm",children:d.phone})]},d.id))})]})]}),s.customerName&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:s.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone"}),e.jsx("input",{type:"tel",name:"customerPhone",value:f.customerPhone,onChange:x,className:"input-field",placeholder:"Phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email"}),e.jsx("input",{type:"email",name:"customerEmail",value:f.customerEmail,onChange:x,className:"input-field",placeholder:"Email address"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"customerAddress",value:f.customerAddress,onChange:x,className:"input-field min-h-[60px] resize-none",placeholder:"Customer address"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Items"}),e.jsxs("button",{type:"button",onClick:D,className:"text-teal-400 hover:text-teal-300 flex items-center gap-1 text-sm",children:[e.jsx(se,{className:"w-4 h-4"}),"Add Item"]})]}),s.items&&e.jsx("p",{className:"text-coral-400 text-sm mb-4",children:s.items}),e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-12 gap-2 pb-2 border-b border-midnight-600 mb-2",children:[e.jsx("div",{className:"col-span-1 text-midnight-400 text-xs font-medium",children:"#"}),e.jsx("div",{className:"col-span-5 text-midnight-400 text-xs font-medium",children:"Item Name"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-center",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Price"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Amount"})]}),e.jsx("div",{className:"space-y-2",children:f.items.map((d,u)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 py-2 border-b border-midnight-700/50 items-center",children:[e.jsx("div",{className:"hidden sm:flex col-span-1 text-midnight-400 text-sm items-center",children:u+1}),e.jsxs("div",{className:"sm:col-span-5 relative",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Item Name"}),e.jsx("input",{type:"text",value:d.name,onChange:I=>{S(d.id,"name",I.target.value),h(I.target.value),o(d.id)},onFocus:()=>o(d.id),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all",placeholder:"Enter item name"}),c===d.id&&a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(null)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:a.map(I=>e.jsxs("button",{type:"button",onClick:()=>F(I,d.id),className:"w-full px-4 py-2 text-left hover:bg-midnight-700 transition-colors flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:I.name}),e.jsx("span",{className:"text-teal-400 font-mono text-sm",children:J(I.price,r.currency)})]},I.id))})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:d.quantity,onChange:I=>S(d.id,"quantity",parseInt(I.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-center focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Price"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:d.price,onChange:I=>S(d.id,"price",parseFloat(I.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-right focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all font-mono"})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center justify-between sm:justify-end gap-2",children:[e.jsx("div",{className:"sm:hidden text-midnight-400 text-xs",children:"Amount:"}),e.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:J(d.quantity*d.price,r.currency)}),f.items.length>1&&e.jsx("button",{type:"button",onClick:()=>T(d.id),className:"p-1.5 text-coral-400 hover:bg-coral-500/20 rounded-lg transition-colors ml-2",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]},d.id))}),e.jsxs("button",{type:"button",onClick:D,className:"mt-4 w-full py-2.5 border-2 border-dashed border-midnight-600 rounded-xl text-midnight-400 hover:text-teal-400 hover:border-teal-500/50 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(se,{className:"w-4 h-4"}),"Add Item"]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("label",{className:"input-label",children:"Notes"}),e.jsx("textarea",{name:"notes",value:f.notes,onChange:x,className:"input-field min-h-[80px] resize-none",placeholder:"Add any notes..."})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-2xl p-6 sticky top-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Number"}),e.jsx("input",{type:"text",name:"invoiceNumber",value:f.invoiceNumber,onChange:x,className:"input-field font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Date"}),e.jsx("input",{type:"date",name:"date",value:f.date,onChange:x,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"input-label",children:[P.taxLabel||"Tax"," Rate (%)"]}),e.jsx("input",{type:"number",min:"0",max:"100",name:"taxRate",value:f.taxRate,onChange:x,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Discount (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",name:"discount",value:f.discount,onChange:x,className:"input-field"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-midnight-600 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:J(v.subtotal,r.currency)})]}),f.discount>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:["Discount (",f.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-coral-400",children:["-",J(v.discountAmount,r.currency)]})]}),f.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:[P.taxLabel||"Tax"," (",f.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:J(v.taxAmount,r.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t border-midnight-600",children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-400",children:J(v.total,r.currency)})]})]})]})})]})]})}function ys(){const t=be(),{id:i}=lt(),p=R.useRef(null),[r,P]=R.useState(null),[k,_]=R.useState(!1),[N,b]=R.useState(!1),f=ie.get(),E=oe.get();if(R.useEffect(()=>{if(i){const m=Z.getById(i);m?P(m):t("/invoices")}},[i,t]),!r)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-teal-500 border-t-transparent rounded-full"})});const y=ce(r.items,r.taxRate,r.discount),g=()=>{De(r,f,E)},c=()=>{ps(r,f,E)},o=m=>{const h={...r,status:m};Z.save(h),P(h),_(!1)},A=async()=>{b(!0);try{const m=gs(r,f,E),h=new File([m],`${r.invoiceNumber}.pdf`,{type:"application/pdf"});navigator.share&&navigator.canShare({files:[h]})?await navigator.share({title:`Invoice ${r.invoiceNumber}`,text:`Invoice for ${r.customerName} - ${J(y.total,f.currency)}`,files:[h]}):De(r,f,E)}catch(m){m.name!=="AbortError"&&(console.error("Error sharing:",m),De(r,f,E))}b(!1)},w=[{value:"draft",label:"Draft",icon:je,color:"text-midnight-400"},{value:"pending",label:"Pending",icon:ht,color:"text-gold-400"},{value:"paid",label:"Paid",icon:le,color:"text-teal-400"},{value:"overdue",label:"Overdue",icon:pe,color:"text-coral-400"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/invoices"),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:r.invoiceNumber}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>_(!k),className:`px-3 py-1 rounded-full text-sm font-medium ${Ge(r.status)} hover:opacity-80 transition-opacity`,children:Je(r.status)}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>_(!1)}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-40 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:w.map(m=>{const h=m.icon;return e.jsxs("button",{onClick:()=>o(m.value),className:`flex items-center gap-3 px-4 py-3 w-full hover:bg-midnight-700 transition-colors ${r.status===m.value?"bg-midnight-700":""}`,children:[e.jsx(h,{className:`w-4 h-4 ${m.color}`}),e.jsx("span",{className:"text-white",children:m.label}),r.status===m.value&&e.jsx(We,{className:"w-4 h-4 text-teal-400 ml-auto"})]},m.value)})})]})]})]}),e.jsx("p",{className:"text-midnight-400",children:r.customerName})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs(G,{to:`/invoices/edit/${r.id}`,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs("button",{onClick:g,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Download"})]}),e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Print"})]}),e.jsxs("button",{onClick:A,disabled:N,className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none disabled:opacity-50",children:[e.jsx(zt,{className:`w-4 h-4 ${N?"animate-pulse":""}`}),N?"Sharing...":"Share PDF"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",ref:p,children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-bold",children:f.name||"Your Business Name"}),f.address&&e.jsx("p",{className:"text-teal-100 mt-1 text-sm",children:f.address}),f.city&&e.jsxs("p",{className:"text-teal-100 text-sm",children:[f.city,f.state&&`, ${f.state}`,f.pincode&&` - ${f.pincode}`]}),f.phone&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Phone: ",f.phone]}),f.email&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Email: ",f.email]}),f.taxId&&e.jsxs("p",{className:"text-teal-100 text-sm font-mono",children:[E.taxLabel||"Tax"," ID: ",f.taxId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-teal-200 text-sm uppercase tracking-wide",children:"Invoice"}),e.jsx("p",{className:"text-xl font-mono font-bold mt-1",children:r.invoiceNumber}),e.jsxs("p",{className:"text-teal-100 text-sm mt-2",children:["Date: ",ge(r.date)]})]})]})}),e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Bill To"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:r.customerName}),r.customerAddress&&e.jsx("p",{className:"text-gray-600 text-sm",children:r.customerAddress}),r.customerPhone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Phone: ",r.customerPhone]}),r.customerEmail&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Email: ",r.customerEmail]})]}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs w-12",children:"#"}),e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs",children:"Item"}),e.jsx("th",{className:"text-center py-3 text-gray-500 font-medium text-xs w-20",children:"Qty"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Price"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Amount"})]})}),e.jsx("tbody",{children:r.items.map((m,h)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-4 text-gray-400 text-sm",children:h+1}),e.jsx("td",{className:"py-4 text-gray-900 font-medium",children:m.name}),e.jsx("td",{className:"py-4 text-gray-600 text-center",children:m.quantity}),e.jsx("td",{className:"py-4 text-gray-600 text-right font-mono text-sm",children:J(m.price,f.currency)}),e.jsx("td",{className:"py-4 text-gray-900 text-right font-mono font-medium",children:J(m.quantity*m.price,f.currency)})]},m.id))})]})}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-full sm:w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:J(y.subtotal,f.currency)})]}),r.discount>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Discount (",r.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-red-500",children:["-",J(y.discountAmount,f.currency)]})]}),r.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:[E.taxLabel||"Tax"," (",r.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:J(y.taxAmount,f.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t-2 border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-600",children:J(y.total,f.currency)})]})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide",children:"Amount in Words"}),e.jsxs("p",{className:"text-gray-700 font-medium",children:[de(Math.floor(y.total))," Only"]})]})]}),r.notes&&e.jsxs("div",{className:"px-8 py-6 border-t border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:r.notes})]}),e.jsx("div",{className:"px-8 py-6 bg-gray-50 text-center border-t border-gray-100",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Thank you for your business!"})})]})]})}const js=["piece","kg","g","liter","ml","dozen","box","pack","unit","hour","service"];function bs(){const t=ie.get(),[i,p]=R.useState(()=>ne.getAll()),[r,P]=R.useState(""),[k,_]=R.useState(!1),[N,b]=R.useState(null),[f,E]=R.useState(null),[y,g]=R.useState({name:"",description:"",price:"",unit:"piece"}),[c,o]=R.useState({}),A=i.filter(n=>{var a;return n.name.toLowerCase().includes(r.toLowerCase())||((a=n.description)==null?void 0:a.toLowerCase().includes(r.toLowerCase()))}),w=(n=null)=>{n?(b(n),g({name:n.name,description:n.description||"",price:n.price.toString(),unit:n.unit||"piece"})):(b(null),g({name:"",description:"",price:"",unit:"piece"})),o({}),_(!0)},m=()=>{_(!1),b(null),g({name:"",description:"",price:"",unit:"piece"}),o({})},h=n=>{const{name:a,value:x}=n.target;g(S=>({...S,[a]:x})),c[a]&&o(S=>({...S,[a]:null}))},s=()=>{const n={};return y.name.trim()||(n.name="Product name is required"),(!y.price||parseFloat(y.price)<0)&&(n.price="Valid price is required"),o(n),Object.keys(n).length===0},l=()=>{if(!s())return;const n={id:(N==null?void 0:N.id)||ue(),name:y.name.trim(),description:y.description.trim(),price:parseFloat(y.price),unit:y.unit};ne.save(n),p(ne.getAll()),m()},v=n=>{ne.delete(n),p(ne.getAll()),E(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Products & Services"}),e.jsxs("p",{className:"text-midnight-400",children:[i.length," items"]})]}),e.jsxs("button",{onClick:()=>w(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Product"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:r,onChange:n=>P(n.target.value),className:"input-field pl-12"})]}),A.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ot,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:r?"No products found":"No products yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:r?"Try adjusting your search":"Add products to quickly add them to invoices"}),!r&&e.jsxs("button",{onClick:()=>w(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Add Product"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(n=>e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:n.name}),n.description&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1 line-clamp-2",children:n.description}),e.jsxs("div",{className:"mt-3 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-mono font-bold text-teal-400",children:J(n.price,t.currency)}),n.unit&&e.jsxs("span",{className:"text-midnight-400 text-sm",children:["/ ",n.unit]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>w(n),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(n.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})},n.id))}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:N?"Edit Product":"Add Product"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Be,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:y.name,onChange:h,className:`input-field ${c.name?"border-coral-500":""}`,placeholder:"e.g., Notebook, Pen, Cake"}),c.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Description"}),e.jsx("textarea",{name:"description",value:y.description,onChange:h,className:"input-field min-h-[80px] resize-none",placeholder:"Brief description of the product"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Price *"}),e.jsx("input",{type:"number",name:"price",min:"0",step:"0.01",value:y.price,onChange:h,className:`input-field ${c.price?"border-coral-500":""}`,placeholder:"0.00"}),c.price&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:c.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Unit"}),e.jsx("select",{name:"unit",value:y.unit,onChange:h,className:"input-field",children:js.map(n=>e.jsx("option",{value:n,children:n},n))})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:m,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:l,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),N?"Update":"Add Product"]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Product?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This product will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>E(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>v(f),className:"btn-danger",children:"Delete"})]})]})})]})}function Ns(){const[t,i]=R.useState(()=>ae.getAll()),p=Z.getAll(),[r,P]=R.useState(""),[k,_]=R.useState(!1),[N,b]=R.useState(null),[f,E]=R.useState(null),[y,g]=R.useState({name:"",phone:"",email:"",address:""}),[c,o]=R.useState({}),A=a=>p.filter(x=>x.customerName===a).length,w=t.filter(a=>{var x,S;return a.name.toLowerCase().includes(r.toLowerCase())||((x=a.phone)==null?void 0:x.includes(r))||((S=a.email)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))}),m=(a=null)=>{a?(b(a),g({name:a.name,phone:a.phone||"",email:a.email||"",address:a.address||""})):(b(null),g({name:"",phone:"",email:"",address:""})),o({}),_(!0)},h=()=>{_(!1),b(null),g({name:"",phone:"",email:"",address:""}),o({})},s=a=>{const{name:x,value:S}=a.target;g(D=>({...D,[x]:S})),c[x]&&o(D=>({...D,[x]:null}))},l=()=>{const a={};return y.name.trim()||(a.name="Customer name is required"),o(a),Object.keys(a).length===0},v=()=>{if(!l())return;const a={id:(N==null?void 0:N.id)||ue(),name:y.name.trim(),phone:y.phone.trim(),email:y.email.trim(),address:y.address.trim()};ae.save(a),i(ae.getAll()),h()},n=a=>{ae.delete(a),i(ae.getAll()),E(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Customers"}),e.jsxs("p",{className:"text-midnight-400",children:[t.length," customers"]})]}),e.jsxs("button",{onClick:()=>m(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Customer"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:r,onChange:a=>P(a.target.value),className:"input-field pl-12"})]}),w.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ct,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:r?"No customers found":"No customers yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:r?"Try adjusting your search":"Customers are automatically added when you create invoices"}),!r&&e.jsxs("button",{onClick:()=>m(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Add Customer"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:w.map(a=>{const x=A(a.name);return e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-teal-400 font-semibold",children:a.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:a.name}),x>0&&e.jsxs(G,{to:`/invoices?search=${encodeURIComponent(a.name)}`,className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),x," invoice",x>1?"s":""]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[a.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${a.phone}`,className:"hover:text-white",children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("a",{href:`mailto:${a.email}`,className:"hover:text-white truncate",children:a.email})]}),a.address&&e.jsxs("div",{className:"flex items-start gap-2 text-midnight-400 text-sm",children:[e.jsx(Yt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"line-clamp-2",children:a.address})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>m(a),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(a.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})},a.id)})}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:N?"Edit Customer":"Add Customer"}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Be,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsx("input",{type:"text",name:"name",value:y.name,onChange:s,className:`input-field ${c.name?"border-coral-500":""}`,placeholder:"Full name"}),c.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:y.phone,onChange:s,className:"input-field",placeholder:"Mobile number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:y.email,onChange:s,className:"input-field",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:y.address,onChange:s,className:"input-field min-h-[80px] resize-none",placeholder:"Full address"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:h,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:v,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),N?"Update":"Add Customer"]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Customer?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This customer will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>E(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>n(f),className:"btn-danger",children:"Delete"})]})]})})]})}const ws=[{symbol:"₹",name:"Indian Rupee (INR)"},{symbol:"$",name:"US Dollar (USD)"},{symbol:"€",name:"Euro (EUR)"},{symbol:"£",name:"British Pound (GBP)"},{symbol:"¥",name:"Japanese Yen (JPY)"}],Ss=[{id:"business",label:"Business Profile",icon:$t},{id:"invoice",label:"Invoice Settings",icon:fe},{id:"sync",label:"Cloud Sync",icon:ye}];function Cs(){const[t,i]=R.useState(()=>ie.get()),[p,r]=R.useState(()=>oe.get()),[P,k]=R.useState(!1),[_,N]=R.useState("business"),[b,f]=R.useState(!1),[E,y]=R.useState(null),g=s=>{const{name:l,value:v}=s.target;i(n=>({...n,[l]:v}))},c=s=>{const{name:l,value:v,type:n}=s.target;r(a=>({...a,[l]:n==="number"?parseFloat(v)||0:v}))},o=()=>{ie.save(t),oe.save(p),k(!0),setTimeout(()=>k(!1),2e3)},A=s=>{var v;const l=(v=s.target.files)==null?void 0:v[0];if(l){const n=new FileReader;n.onloadend=()=>{i(a=>({...a,logo:n.result}))},n.readAsDataURL(l)}},w=()=>{i(s=>({...s,logo:null}))},m=()=>{r(s=>({...s,showLogo:!s.showLogo}))},h=async s=>{f(!0),y(null);try{let l;switch(s){case"upload":l=await Pe.uploadToCloud();break;case"download":l=await Pe.downloadFromCloud();break;case"full":l=await Pe.fullSync();break}y({type:l.success?"success":"error",text:l.message}),l.success&&(s==="download"||s==="full")&&(i(ie.get()),r(oe.get()))}catch(l){y({type:"error",text:`Sync failed: ${l.message}`})}finally{f(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-midnight-400",children:"Manage your business profile and settings"})]}),e.jsx("button",{onClick:o,className:`btn-primary flex items-center gap-2 self-start transition-all ${P?"bg-teal-600":""}`,children:P?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5"}),"Save Changes"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-midnight-700 pb-4",children:Ss.map(s=>{const l=s.icon;return e.jsxs("button",{onClick:()=>N(s.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-colors ${_===s.id?"bg-teal-500/20 text-teal-400":"text-midnight-400 hover:text-white hover:bg-midnight-700"}`,children:[e.jsx(l,{className:"w-5 h-5"}),s.label]},s.id)})}),_==="business"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Business Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:g,className:"input-field",placeholder:"Your business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:t.address,onChange:g,className:"input-field min-h-[80px] resize-none",placeholder:"Business address"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"City"}),e.jsx("input",{type:"text",name:"city",value:t.city,onChange:g,className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"State"}),e.jsx("input",{type:"text",name:"state",value:t.state,onChange:g,className:"input-field",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"PIN Code"}),e.jsx("input",{type:"text",name:"pincode",value:t.pincode,onChange:g,className:"input-field",placeholder:"PIN Code"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:g,className:"input-field",placeholder:"Business phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:g,className:"input-field",placeholder:"business@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax ID / Registration Number"}),e.jsx("input",{type:"text",name:"taxId",value:t.taxId,onChange:g,className:"input-field font-mono",placeholder:"Tax registration number"})]})]})]}),e.jsx("div",{className:"glass rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(st,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Local Storage"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"All data is saved locally in your browser"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Logo"}),t.logo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.logo,alt:"Business logo",className:"w-full h-40 object-contain bg-white rounded-xl"}),e.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-2 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors",children:e.jsx(Ne,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-midnight-600 rounded-xl cursor-pointer hover:border-teal-500/50 transition-colors",children:[e.jsx(Gt,{className:"w-8 h-8 text-midnight-500 mb-2"}),e.jsx("span",{className:"text-midnight-400 text-sm",children:"Upload logo"}),e.jsx("span",{className:"text-midnight-500 text-xs mt-1",children:"PNG, JPG up to 2MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Currency"}),e.jsx("div",{className:"space-y-2",children:ws.map(s=>e.jsxs("button",{onClick:()=>i(l=>({...l,currency:s.symbol})),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${t.currency===s.symbol?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-midnight-700"}`,children:[e.jsx("span",{className:"text-xl font-mono",children:s.symbol}),e.jsx("span",{className:"text-sm",children:s.name}),t.currency===s.symbol&&e.jsx(We,{className:"w-4 h-4 ml-auto"})]},s.symbol))})]})]})]}),_==="invoice"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Prefix"}),e.jsx("input",{type:"text",name:"invoicePrefix",value:p.invoicePrefix,onChange:c,className:"input-field font-mono",placeholder:"INV"}),e.jsxs("p",{className:"text-midnight-500 text-xs mt-1",children:["Your invoices will be numbered like ",p.invoicePrefix,"-2026-0001"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",name:"taxRate",min:"0",max:"100",value:p.taxRate,onChange:c,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax Label"}),e.jsx("input",{type:"text",name:"taxLabel",value:p.taxLabel||"",onChange:c,className:"input-field",placeholder:"e.g., GST, VAT, Tax"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Display"}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-midnight-800/50 rounded-xl cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Show Business Logo"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Display your logo on invoices"})]}),e.jsx("div",{className:`w-12 h-7 rounded-full transition-colors ${p.showLogo?"bg-teal-500":"bg-midnight-600"}`,onClick:m,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform mt-1 ${p.showLogo?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Preview"}),e.jsxs("div",{className:"bg-white rounded-xl p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[p.showLogo&&t.logo&&e.jsx("img",{src:t.logo,alt:"Logo",className:"h-12 mb-2"}),e.jsx("h3",{className:"font-bold text-lg",children:t.name||"Your Business Name"}),e.jsx("p",{className:"text-gray-500 text-sm",children:t.address||"Business Address"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm uppercase",children:"Invoice"}),e.jsxs("p",{className:"font-mono font-bold",children:[p.invoicePrefix,"-2026-0001"]})]})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:[p.taxLabel||"Tax"," Rate: ",p.taxRate,"%"]})})]})]})]}),_==="sync"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${Q?"bg-teal-500/20":"bg-coral-500/20"}`,children:Q?e.jsx(ye,{className:"w-6 h-6 text-teal-400"}):e.jsx(dt,{className:"w-6 h-6 text-coral-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Cloud Sync Status"}),e.jsx("p",{className:`text-sm ${Q?"text-teal-400":"text-coral-400"}`,children:Q?"Connected to Supabase":"Not Configured"})]})]}),!Q&&e.jsxs("div",{className:"bg-midnight-800/50 rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"text-midnight-300 text-sm",children:"To sync invoices across devices, set up Supabase:"}),e.jsxs("ol",{className:"text-midnight-400 text-sm list-decimal list-inside space-y-2",children:[e.jsxs("li",{children:["Create a free account at ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:underline",children:"supabase.com"})]}),e.jsx("li",{children:"Create a new project and run the database schema"}),e.jsxs("li",{children:["Add these environment variables to your deployment:",e.jsxs("div",{className:"mt-2 bg-midnight-900 rounded-lg p-3 font-mono text-xs",children:[e.jsx("div",{children:"VITE_SUPABASE_URL=your_project_url"}),e.jsx("div",{children:"VITE_SUPABASE_ANON_KEY=your_anon_key"})]})]}),e.jsx("li",{children:"Redeploy your application"})]})]})]}),Q&&e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Sync Actions"}),E&&e.jsx("div",{className:`mb-4 p-4 rounded-xl ${E.type==="success"?"bg-teal-500/20 text-teal-400":"bg-coral-500/20 text-coral-400"}`,children:E.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>h("full"),disabled:b,className:"w-full flex items-center gap-4 p-4 bg-teal-500/10 hover:bg-teal-500/20 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-500/20",children:e.jsx(Oe,{className:`w-6 h-6 text-teal-400 ${b?"animate-spin":""}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Full Sync"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Download from cloud, then upload local changes"})]})]}),e.jsxs("button",{onClick:()=>h("upload"),disabled:b,className:"w-full flex items-center gap-4 p-4 bg-midnight-800/50 hover:bg-midnight-700/50 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/20",children:e.jsx(Jt,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Upload to Cloud"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Push all local data to cloud storage"})]})]}),e.jsxs("button",{onClick:()=>h("download"),disabled:b,className:"w-full flex items-center gap-4 p-4 bg-midnight-800/50 hover:bg-midnight-700/50 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/20",children:e.jsx(Ue,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Download from Cloud"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Get latest data from cloud storage"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"How Cloud Sync Works"}),e.jsxs("div",{className:"space-y-4 text-midnight-300 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(st,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Local-First"}),e.jsx("p",{children:"Your data is always saved locally in your browser. The app works offline."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(ye,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Cloud Backup"}),e.jsx("p",{children:"When you sync, your data is stored in Supabase (PostgreSQL database)."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(Oe,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Multi-Device"}),e.jsx("p",{children:"Sync on any device to get your latest invoices, customers, and products."})]})]})]})]})]})]})}function Ps(){const t=be(),{signIn:i}=ve(),[p,r]=R.useState(""),[P,k]=R.useState(""),[_,N]=R.useState(""),[b,f]=R.useState(!1),E=async y=>{y.preventDefault(),N(""),f(!0);try{const{error:g}=await i(p,P);g?N(g.message):t("/")}catch{N("An unexpected error occurred")}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(at,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-midnight-400",children:"Sign in to access your invoices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[_&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(pe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:p,onChange:y=>r(y.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:P,onChange:y=>k(y.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"current-password"})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-5 h-5"}),"Sign In"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-center",children:[e.jsx(G,{to:"/forgot-password",className:"block text-sm text-teal-400 hover:text-teal-300 transition-colors",children:"Forgot your password?"}),e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Don't have an account?"," ",e.jsx(G,{to:"/signup",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign up"})]})]})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"Your data is securely synced across all your devices"})]})})}function Ds(){const t=be(),{signUp:i}=ve(),[p,r]=R.useState(""),[P,k]=R.useState(""),[_,N]=R.useState(""),[b,f]=R.useState(""),[E,y]=R.useState(!1),g=async c=>{if(c.preventDefault(),f(""),P.length<6){f("Password must be at least 6 characters long");return}if(P!==_){f("Passwords do not match");return}y(!0);try{const{error:o}=await i(p,P);if(o)f(o.message);else{try{await Pe.uploadToCloud()}catch(A){console.error("Failed to sync local data:",A)}t("/")}}catch{f("An unexpected error occurred")}finally{y(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 mb-4",children:e.jsx(nt,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Create Account"}),e.jsx("p",{className:"text-midnight-400",children:"Start managing your invoices across all devices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[b&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(pe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:p,onChange:c=>r(c.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:P,onChange:c=>k(c.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password",minLength:6})]}),e.jsx("p",{className:"text-midnight-500 text-xs mt-1",children:"At least 6 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:_,onChange:c=>N(c.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password"})]})]}),e.jsxs("div",{className:"bg-midnight-800/50 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(le,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Sync across all your devices"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(le,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Secure cloud backup"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(le,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Access from anywhere"})]})]}),e.jsx("button",{type:"submit",disabled:E,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"w-5 h-5"}),"Create Account"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Already have an account?"," ",e.jsx(G,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign in"})]})})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})]})})}function Ts(){const{resetPassword:t}=ve(),[i,p]=R.useState(""),[r,P]=R.useState(""),[k,_]=R.useState(!1),[N,b]=R.useState(!1),f=async E=>{E.preventDefault(),P(""),b(!0);try{const{error:y}=await t(i);y?P(y.message):_(!0)}catch{P("An unexpected error occurred")}finally{b(!1)}};return k?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(le,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-midnight-400",children:["We've sent password reset instructions to ",e.jsx("strong",{className:"text-white",children:i})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-8 space-y-4",children:[e.jsx("p",{className:"text-midnight-300 text-sm",children:"Click the link in the email to reset your password. If you don't see the email, check your spam folder."}),e.jsxs(G,{to:"/login",className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Back to Login"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 mb-4",children:e.jsx(xe,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-midnight-400",children:"Enter your email to reset your password"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(pe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:i,onChange:E=>p(E.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsx("button",{type:"submit",disabled:N,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-5 h-5"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(G,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300 transition-colors",children:[e.jsx(Te,{className:"w-4 h-4"}),"Back to Login"]})})]}),e.jsxs("p",{className:"text-center text-midnight-500 text-sm mt-8",children:["Remember your password?"," ",e.jsx(G,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors",children:"Sign in"})]})]})})}function As(){return e.jsx(kt,{children:e.jsx(ts,{children:e.jsx(ss,{children:e.jsxs(Ke,{children:[e.jsx(te,{path:"/login",element:e.jsx(Ps,{})}),e.jsx(te,{path:"/signup",element:e.jsx(Ds,{})}),e.jsx(te,{path:"/forgot-password",element:e.jsx(Ts,{})}),e.jsx(te,{path:"/*",element:e.jsx(ns,{children:e.jsx(rs,{children:e.jsxs(Ke,{children:[e.jsx(te,{path:"/",element:e.jsx(us,{})}),e.jsx(te,{path:"/invoices",element:e.jsx(vs,{})}),e.jsx(te,{path:"/invoices/new",element:e.jsx(rt,{})}),e.jsx(te,{path:"/invoices/edit/:id",element:e.jsx(rt,{})}),e.jsx(te,{path:"/invoices/view/:id",element:e.jsx(ys,{})}),e.jsx(te,{path:"/products",element:e.jsx(bs,{})}),e.jsx(te,{path:"/customers",element:e.jsx(Ns,{})}),e.jsx(te,{path:"/settings",element:e.jsx(Cs,{})})]})})})})]})})})})}class ks extends R.Component{constructor(){super(...arguments);Qe(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(p){return{hasError:!0,error:p}}componentDidCatch(p,r){console.error("Uncaught error:",p,r)}render(){var p;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-coral-500/20 mb-6",children:e.jsx(pe,{className:"w-8 h-8 text-coral-400"})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:((p=this.state.error)==null?void 0:p.message)||"An unexpected error occurred. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const wt=document.getElementById("root");if(!wt)throw new Error("Failed to find root element");Me.createRoot(wt).render(e.jsx(It.StrictMode,{children:e.jsx(ks,{children:e.jsx(As,{})})}));
