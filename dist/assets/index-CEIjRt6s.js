const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BRRYYAKw.js","assets/react-query-BSlkKaxv.js","assets/react-vendor-DCAT8MD5.js","assets/helpers-nstW7FaL.js","assets/useData-DA7kAvo6.js","assets/database-DI5YpnAh.js","assets/ui-libs-BRCIjeTj.js","assets/supabase-DfwcnzK-.js","assets/Invoices-CvupjenY.js","assets/usePDFGenerator-D8Z-rg1M.js","assets/CreateInvoice-rXfFk3hS.js","assets/ViewInvoice-BrHjJDYJ.js","assets/Products-TiTBIcGB.js","assets/Customers-C9JFcec3.js","assets/Settings-DIJD-K9Z.js","assets/Login-B-jJiJZJ.js","assets/Signup-G5FaF9Sb.js","assets/ForgotPassword-C3uGqRhh.js"])))=>i.map(i=>d[i]);
var M=Object.defineProperty;var B=(i,a,n)=>a in i?M(i,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[a]=n;var E=(i,a,n)=>B(i,typeof a!="symbol"?a+"":a,n);import{j as e,_ as m,Q,a as J,R as X}from"./react-query-BSlkKaxv.js";import{a as q,r as s,N as Y,u as W,b as Z,L as y,B as G,R as O,c as u,d as K}from"./react-vendor-DCAT8MD5.js";import{c as H}from"./supabase-DfwcnzK-.js";import{R as S,P as ee,L as te,F as se,a as ae,U as ne,S as ie,C as re,b as P,c as R,d as $,e as le,f as oe,g as ce,X as de,M as ue,h as he,A as xe,i as me}from"./ui-libs-BRCIjeTj.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();var _={},L=q;_.createRoot=L.createRoot,_.hydrateRoot=L.hydrateRoot;const ge="https://kkcalkiqfdykbmitaqcb.supabase.co",T="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrY2Fsa2lxZmR5a2JtaXRhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ1MTksImV4cCI6MjA4NTQwMDUxOX0.hkDQS1mVtO2lgYlQXYNkbNpIF9crkotYMVaxe5gmLkc",b=!!T,d=b?H(ge,T):null,Fe={INVOICES:"invoices",CUSTOMERS:"customers",PRODUCTS:"products",BUSINESS:"business_profile",SETTINGS:"settings"},z=s.createContext(void 0);function pe({children:i}){const[a,n]=s.useState(null),[o,t]=s.useState(null),[r,c]=s.useState(!0);s.useEffect(()=>{if(!d){c(!1);return}d.auth.getSession().then(({data:{session:l}})=>{t(l),n((l==null?void 0:l.user)??null),c(!1)});const{data:{subscription:g}}=d.auth.onAuthStateChange((l,x)=>{t(x),n((x==null?void 0:x.user)??null),c(!1)});return()=>g.unsubscribe()},[]);const w={user:a,session:o,loading:r,signUp:async(g,l)=>{if(!d)return{error:{message:"Supabase not configured"}};const{error:x}=await d.auth.signUp({email:g,password:l});return{error:x}},signIn:async(g,l)=>{if(!d)return{error:{message:"Supabase not configured"}};const{error:x}=await d.auth.signInWithPassword({email:g,password:l});return{error:x}},signOut:async()=>{d&&await d.auth.signOut()},resetPassword:async g=>{if(!d)return{error:{message:"Supabase not configured"}};const{error:l}=await d.auth.resetPasswordForEmail(g,{redirectTo:`${window.location.origin}/reset-password`});return{error:l}}};return e.jsx(z.Provider,{value:w,children:i})}function C(){const i=s.useContext(z);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}const D=s.createContext(void 0);function fe({children:i}){const{user:a}=C(),[n,o]=s.useState(null),[t,r]=s.useState("idle");s.useEffect(()=>{if(!d||!b||!a)return;const v=()=>{console.log("Remote change detected, refreshing data..."),r("syncing"),setTimeout(()=>{o(new Date),r("synced"),setTimeout(()=>r("idle"),2e3)},500)},p=["invoices","customers","products","business_profile","settings"].map(f=>d.channel(`${f}-changes`).on("postgres_changes",{event:"*",schema:"public",table:f,filter:`user_id=eq.${a.id}`},v).subscribe());return()=>{p.forEach(f=>f.unsubscribe())}},[a]);const c={lastSyncTime:n,syncStatus:t};return e.jsx(D.Provider,{value:c,children:i})}function we(){const i=s.useContext(D);if(i===void 0)throw new Error("useSync must be used within a SyncProvider");return i}function je({children:i}){const{user:a,loading:n}=C();return b?n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 mb-6 animate-pulse",children:e.jsx(S,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-display font-bold text-white mb-2",children:"Loading..."}),e.jsx("p",{className:"text-midnight-400",children:"Please wait"})]})}):a?e.jsx(e.Fragment,{children:i}):e.jsx(Y,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:i})}const be=[{path:"/",label:"Dashboard",icon:te},{path:"/invoices",label:"Invoices",icon:se},{path:"/products",label:"Products",icon:ae},{path:"/customers",label:"Customers",icon:ne},{path:"/settings",label:"Settings",icon:ie}];function ve({children:i}){const a=W(),[n,o]=s.useState(!1),[t,r]=s.useState(()=>localStorage.getItem("sidebarCollapsed")==="true"),[c,v]=s.useState(null);s.useEffect(()=>{a.pathname==="/invoices/new"||a.pathname.startsWith("/invoices/edit/")?(c===null&&v(t),r(!0)):c!==null&&(r(c),v(null))},[a.pathname]);const[j,p]=s.useState(!1),f=Z(),{user:w,signOut:g}=C(),{syncStatus:l}=we();s.useEffect(()=>{localStorage.setItem("sidebarCollapsed",String(t))},[t]);const x=h=>h==="/"?a.pathname==="/":a.pathname.startsWith(h),I=async()=>{await g(),f("/login")},U=()=>{r(!t)};return e.jsxs("div",{className:"min-h-screen flex",children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 transform transition-all duration-300 ease-in-out group ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"} ${t?"lg:w-24":"w-72"}`,children:e.jsxs("div",{className:"h-full flex flex-col glass rounded-r-2xl lg:rounded-2xl m-0 lg:m-4 relative",children:[e.jsx("div",{className:`p-6 border-b border-white/10 transition-all duration-300 ${t?"lg:p-4 lg:pb-4":""}`,children:e.jsxs(y,{to:"/",className:`flex items-center ${t?"lg:justify-center":"gap-3"}`,children:[e.jsx("div",{className:`rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center shadow-glow transition-all duration-300 ${t?"lg:w-12 lg:h-12":"w-10 h-10"}`,children:e.jsx(S,{className:`text-white transition-all duration-300 ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`})}),e.jsxs("div",{className:`transition-all duration-300 overflow-hidden ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:[e.jsx("h1",{className:"text-xl font-display font-bold text-white whitespace-nowrap",children:"Businezz"}),e.jsx("p",{className:"text-xs text-midnight-400 whitespace-nowrap",children:"Smart Billing"})]})]})}),e.jsx("div",{className:`p-4 transition-all duration-300 ${t?"lg:px-3 lg:py-4":""}`,children:e.jsxs(y,{to:"/invoices/new",className:`flex items-center justify-center gap-2 btn-primary rounded-xl transition-all duration-300 hover:shadow-glow ${t?"lg:w-12 lg:h-12 lg:p-0 lg:mx-auto":"w-full py-3"}
                }`,onClick:()=>o(!1),title:t?"New Invoice":"",children:[e.jsx(ee,{className:`text-white transition-all duration-300 ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`}),e.jsx("span",{className:`transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"New Invoice"})]})}),e.jsx("nav",{className:`flex-1 py-2 space-y-2 overflow-y-auto transition-all duration-300 ${t?"lg:px-3":"px-4"}`,children:be.map(h=>{const V=h.icon,N=x(h.path);return e.jsxs(y,{to:h.path,onClick:()=>o(!1),className:`flex items-center gap-3 rounded-xl transition-all duration-200 ${N?"bg-teal-500/20 text-teal-400 shadow-lg shadow-teal-500/10":"text-midnight-300 hover:bg-white/5 hover:text-white"} ${t?"lg:justify-center lg:w-12 lg:h-12 lg:p-0":"px-4 py-3"}`,title:t?h.label:"",children:[e.jsx(V,{className:`transition-all duration-200 ${N?"text-teal-400":""} ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`}),e.jsx("span",{className:`font-medium transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:h.label}),N&&!t&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-teal-400 lg:block hidden animate-pulse"})]},h.path)})}),e.jsx("div",{className:`p-4 border-t border-white/10 transition-all duration-300 ${t?"lg:px-3 lg:py-4":""}`,children:b&&w?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center gap-2 rounded-lg bg-midnight-800/50 transition-all duration-300 ${t?"lg:justify-center lg:w-12 lg:h-12 lg:mx-auto":"px-3 py-2"}
                  }`,children:l==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:`text-teal-400 flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-teal-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Synced"})]}):l==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:`text-blue-400 animate-pulse flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-blue-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:`text-midnight-400 flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Idle"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!j),className:`flex items-center gap-3 rounded-lg hover:bg-white/5 transition-all duration-300 ${t?"lg:justify-center lg:w-12 lg:h-12 lg:mx-auto":"w-full px-3 py-2"}
                      }`,title:t?w.email||"Account":"",children:[e.jsx("div",{className:`rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0 transition-all duration-300 ${t?"lg:w-10 lg:h-10":"w-8 h-8"}`,children:e.jsx(R,{className:`text-white transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`})}),e.jsxs("div",{className:`flex-1 text-left transition-all duration-300 overflow-hidden ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:w.email}),e.jsx("p",{className:"text-xs text-midnight-400 whitespace-nowrap",children:"Account"})]})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 glass rounded-lg p-2 z-50 animate-fade-in",children:e.jsxs("button",{onClick:I,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})]})]}):e.jsx("div",{className:`text-center transition-all duration-300 ${t?"lg:px-0":""}`,children:b?e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{className:"w-6 h-6 text-midnight-500 mx-auto"}),e.jsx("p",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden ${t?"lg:h-0 lg:opacity-0":"h-auto opacity-100"}`,children:"Not signed in"})]}):e.jsx("p",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden ${t?"lg:h-0 lg:opacity-0":"h-auto opacity-100"}`,children:"Made with ❤️ for small businesses"})})}),e.jsx("button",{onClick:U,className:"hidden lg:flex absolute -right-3 top-4 items-center justify-center w-6 h-12 rounded-r-lg glass hover:bg-white/10 transition-all duration-300 shadow-lg opacity-0 group-hover:opacity-100 hover:!opacity-100 border-l-0","aria-label":"Toggle sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?e.jsx(oe,{className:"w-4 h-4 text-white"}):e.jsx(ce,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen lg:p-4",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 glass safe-area-top sticky top-0 z-30",children:[e.jsxs(y,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-display font-bold text-white text-lg",children:"Businezz"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b&&w&&e.jsxs("button",{onClick:()=>p(!j),className:"p-2 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors relative","aria-label":"User menu",children:[e.jsx(R,{className:"w-5 h-5 text-white"}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 glass rounded-lg p-2 z-50 animate-fade-in min-w-[200px]",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/10 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:w.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]}),e.jsxs("button",{onClick:I,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:()=>o(!n),className:"p-3 -mr-1 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors","aria-label":"Toggle menu",children:n?e.jsx(de,{className:"w-6 h-6 text-white"}):e.jsx(ue,{className:"w-6 h-6 text-white"})})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 lg:p-0 safe-area-bottom",children:e.jsx("div",{className:"glass rounded-2xl min-h-full p-4 sm:p-6 lg:p-8 animate-fade-in",children:i})})]})]})}const ye=s.lazy(()=>m(()=>import("./Dashboard-BRRYYAKw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Ne=s.lazy(()=>m(()=>import("./Invoices-CvupjenY.js"),__vite__mapDeps([8,1,2,4,5,9,3,6,7]))),k=s.lazy(()=>m(()=>import("./CreateInvoice-rXfFk3hS.js"),__vite__mapDeps([10,1,2,3,4,5,6,7]))),Se=s.lazy(()=>m(()=>import("./ViewInvoice-BrHjJDYJ.js"),__vite__mapDeps([11,1,2,3,9,4,5,6,7]))),_e=s.lazy(()=>m(()=>import("./Products-TiTBIcGB.js"),__vite__mapDeps([12,1,2,3,4,5,6,7]))),Ce=s.lazy(()=>m(()=>import("./Customers-C9JFcec3.js"),__vite__mapDeps([13,1,2,3,4,5,6,7]))),Ie=s.lazy(()=>m(()=>import("./Settings-DIJD-K9Z.js"),__vite__mapDeps([14,1,2,4,5,6,7]))),Ee=s.lazy(()=>m(()=>import("./Login-B-jJiJZJ.js"),__vite__mapDeps([15,1,2,6,7]))),Oe=s.lazy(()=>m(()=>import("./Signup-G5FaF9Sb.js"),__vite__mapDeps([16,1,2,5,3,6,7]))),Pe=s.lazy(()=>m(()=>import("./ForgotPassword-C3uGqRhh.js"),__vite__mapDeps([17,1,2,6,7])));function A(){return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading..."})]})})}function Re(){return e.jsx(G,{children:e.jsx(pe,{children:e.jsx(fe,{children:e.jsx(s.Suspense,{fallback:e.jsx(A,{}),children:e.jsxs(O,{children:[e.jsx(u,{path:"/login",element:e.jsx(Ee,{})}),e.jsx(u,{path:"/signup",element:e.jsx(Oe,{})}),e.jsx(u,{path:"/forgot-password",element:e.jsx(Pe,{})}),e.jsx(u,{path:"/*",element:e.jsx(je,{children:e.jsx(ve,{children:e.jsx(s.Suspense,{fallback:e.jsx(A,{}),children:e.jsxs(O,{children:[e.jsx(u,{path:"/",element:e.jsx(ye,{})}),e.jsx(u,{path:"/invoices",element:e.jsx(Ne,{})}),e.jsx(u,{path:"/invoices/new",element:e.jsx(k,{})}),e.jsx(u,{path:"/invoices/edit/:id",element:e.jsx(k,{})}),e.jsx(u,{path:"/invoices/view/:id",element:e.jsx(Se,{})}),e.jsx(u,{path:"/products",element:e.jsx(_e,{})}),e.jsx(u,{path:"/customers",element:e.jsx(Ce,{})}),e.jsx(u,{path:"/settings",element:e.jsx(Ie,{})})]})})})})})]})})})})})}class $e extends s.Component{constructor(){super(...arguments);E(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,o){console.error("Uncaught error:",n,o)}render(){var n;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-coral-500/20 mb-6",children:e.jsx(xe,{className:"w-8 h-8 text-coral-400"})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const Le=new Q({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:1,retryDelay:1e3},mutations:{retry:1}}}),F=document.getElementById("root");if(!F)throw new Error("Failed to find root element");_.createRoot(F).render(e.jsx(K.StrictMode,{children:e.jsxs(J,{client:Le,children:[e.jsx($e,{children:e.jsx(Re,{})}),e.jsx(X,{initialIsOpen:!1})]})}));export{Fe as T,C as a,b as i,d as s,we as u};
