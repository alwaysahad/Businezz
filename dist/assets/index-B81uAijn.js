const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Landing-1x-c_AHQ.js","assets/react-query-BSlkKaxv.js","assets/react-vendor-DCAT8MD5.js","assets/ui-libs-x-WnpP75.js","assets/supabase-DfwcnzK-.js","assets/Dashboard-CbJARUCR.js","assets/helpers-nstW7FaL.js","assets/useData-C719uELZ.js","assets/database-BiwIQAmA.js","assets/Invoices-DAWk395r.js","assets/usePDFGenerator-D8Z-rg1M.js","assets/CreateInvoice-QV7jPY3I.js","assets/ViewInvoice-B8gtaphS.js","assets/Products-BIWDN5Pf.js","assets/Customers-HufBNi07.js","assets/Settings-CF7kwHOJ.js","assets/Login-B8cqM3Zt.js","assets/Signup-i3-dftM9.js","assets/ForgotPassword-BwpVIPd_.js"])))=>i.map(i=>d[i]);
var Q=Object.defineProperty;var J=(i,a,n)=>a in i?Q(i,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[a]=n;var k=(i,a,n)=>J(i,typeof a!="symbol"?a+"":a,n);import{j as e,_ as x,Q as X,a as q,R as Y}from"./react-query-BSlkKaxv.js";import{a as W,r as s,N as Z,u as G,b as K,L as _,B as H,R,c as d,d as ee}from"./react-vendor-DCAT8MD5.js";import{c as te}from"./supabase-DfwcnzK-.js";import{R as I,P as se,L as ae,F as ne,a as ie,U as re,S as le,C as oe,b as $,c as L,d as A,e as ce,f as de,g as ue,X as he,M as xe,h as me,A as ge,i as pe}from"./ui-libs-x-WnpP75.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();var E={},T=W;E.createRoot=T.createRoot,E.hydrateRoot=T.hydrateRoot;const fe="https://kkcalkiqfdykbmitaqcb.supabase.co",D="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrY2Fsa2lxZmR5a2JtaXRhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ1MTksImV4cCI6MjA4NTQwMDUxOX0.hkDQS1mVtO2lgYlQXYNkbNpIF9crkotYMVaxe5gmLkc",v=!!D,u=v?te(fe,D):null,Ue={INVOICES:"invoices",CUSTOMERS:"customers",PRODUCTS:"products",BUSINESS:"business_profile",SETTINGS:"settings"},F=s.createContext(void 0);function je({children:i}){const[a,n]=s.useState(null),[o,t]=s.useState(null),[r,c]=s.useState(!0);s.useEffect(()=>{if(!u){c(!1);return}u.auth.getSession().then(({data:{session:l}})=>{t(l),n((l==null?void 0:l.user)??null),c(!1)});const{data:{subscription:g}}=u.auth.onAuthStateChange((l,m)=>{t(m),n((m==null?void 0:m.user)??null),c(!1)});return()=>g.unsubscribe()},[]);const j={user:a,session:o,loading:r,signUp:async(g,l)=>{if(!u)return{error:{message:"Supabase not configured"}};const{error:m}=await u.auth.signUp({email:g,password:l});return{error:m}},signIn:async(g,l)=>{if(!u)return{error:{message:"Supabase not configured"}};const{error:m}=await u.auth.signInWithPassword({email:g,password:l});return{error:m}},signOut:async()=>{u&&await u.auth.signOut()},resetPassword:async g=>{if(!u)return{error:{message:"Supabase not configured"}};const{error:l}=await u.auth.resetPasswordForEmail(g,{redirectTo:`${window.location.origin}/reset-password`});return{error:l}}};return e.jsx(F.Provider,{value:j,children:i})}function O(){const i=s.useContext(F);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}const U=s.createContext(void 0);function we({children:i}){const{user:a}=O(),[n,o]=s.useState(null),[t,r]=s.useState("idle");s.useEffect(()=>{if(!u||!v||!a)return;const y=()=>{console.log("Remote change detected, refreshing data..."),r("syncing"),setTimeout(()=>{o(new Date),r("synced"),setTimeout(()=>r("idle"),2e3)},500)},p=["invoices","customers","products","business_profile","settings"].map(f=>u.channel(`${f}-changes`).on("postgres_changes",{event:"*",schema:"public",table:f,filter:`user_id=eq.${a.id}`},y).subscribe());return()=>{p.forEach(f=>f.unsubscribe())}},[a]);const c={lastSyncTime:n,syncStatus:t};return e.jsx(U.Provider,{value:c,children:i})}function be(){const i=s.useContext(U);if(i===void 0)throw new Error("useSync must be used within a SyncProvider");return i}function N({children:i}){const{user:a,loading:n}=O();return v?n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 mb-6 animate-pulse",children:e.jsx(I,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-display font-bold text-white mb-2",children:"Loading..."}),e.jsx("p",{className:"text-midnight-400",children:"Please wait"})]})}):a?e.jsx(e.Fragment,{children:i}):e.jsx(Z,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:i})}const ve=[{path:"/dashboard",label:"Dashboard",icon:ae},{path:"/invoices",label:"Invoices",icon:ne},{path:"/products",label:"Products",icon:ie},{path:"/customers",label:"Customers",icon:re},{path:"/settings",label:"Settings",icon:le}];function S({children:i}){const a=G(),[n,o]=s.useState(!1),[t,r]=s.useState(()=>localStorage.getItem("sidebarCollapsed")==="true"),[c,y]=s.useState(null);s.useEffect(()=>{a.pathname==="/invoices/new"||a.pathname.startsWith("/invoices/edit/")?(c===null&&y(t),r(!0)):c!==null&&(r(c),y(null))},[a.pathname]);const[w,p]=s.useState(!1),f=K(),{user:j,signOut:g}=O(),{syncStatus:l}=be();s.useEffect(()=>{localStorage.setItem("sidebarCollapsed",String(t))},[t]);const m=h=>h==="/dashboard"?a.pathname==="/dashboard":a.pathname.startsWith(h),P=async()=>{await g(),f("/")},M=()=>{r(!t)};return e.jsxs("div",{className:"min-h-screen flex",children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 transform transition-all duration-300 ease-in-out group ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"} ${t?"lg:w-24":"w-72"}`,children:e.jsxs("div",{className:"h-full flex flex-col glass rounded-r-2xl lg:rounded-2xl m-0 lg:m-4 relative",children:[e.jsx("div",{className:`p-6 border-b border-white/10 transition-all duration-300 ${t?"lg:p-4 lg:pb-4":""}`,children:e.jsxs(_,{to:"/dashboard",className:`flex items-center ${t?"lg:justify-center":"gap-3"}`,children:[e.jsx("div",{className:`rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center shadow-glow transition-all duration-300 ${t?"lg:w-12 lg:h-12":"w-10 h-10"}`,children:e.jsx(I,{className:`text-white transition-all duration-300 ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`})}),e.jsxs("div",{className:`transition-all duration-300 overflow-hidden ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:[e.jsx("h1",{className:"text-xl font-brand font-bold text-white whitespace-nowrap tracking-tight",children:"Businezz"}),e.jsx("p",{className:"text-xs text-midnight-400 whitespace-nowrap",children:"Smart Billing"})]})]})}),e.jsx("div",{className:`p-4 transition-all duration-300 ${t?"lg:px-3 lg:py-4":""}`,children:e.jsxs(_,{to:"/invoices/new",className:`flex items-center justify-center gap-2 btn-primary rounded-xl transition-all duration-300 hover:shadow-glow ${t?"lg:w-12 lg:h-12 lg:p-0 lg:mx-auto":"w-full py-3"}
                }`,onClick:()=>o(!1),title:t?"New Invoice":"",children:[e.jsx(se,{className:`text-white transition-all duration-300 ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`}),e.jsx("span",{className:`transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"New Invoice"})]})}),e.jsx("nav",{className:`flex-1 py-2 space-y-2 overflow-y-auto transition-all duration-300 ${t?"lg:px-3":"px-4"}`,children:ve.map(h=>{const B=h.icon,C=m(h.path);return e.jsxs(_,{to:h.path,onClick:()=>o(!1),className:`flex items-center gap-3 rounded-xl transition-all duration-200 ${C?"bg-teal-500/20 text-teal-400 shadow-lg shadow-teal-500/10":"text-midnight-300 hover:bg-white/5 hover:text-white"} ${t?"lg:justify-center lg:w-12 lg:h-12 lg:p-0":"px-4 py-3"}`,title:t?h.label:"",children:[e.jsx(B,{className:`transition-all duration-200 ${C?"text-teal-400":""} ${t?"lg:w-6 lg:h-6":"w-5 h-5"}`}),e.jsx("span",{className:`font-medium transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:h.label}),C&&!t&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-teal-400 lg:block hidden animate-pulse"})]},h.path)})}),e.jsx("div",{className:`p-4 border-t border-white/10 transition-all duration-300 ${t?"lg:px-3 lg:py-4":""}`,children:v&&j?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`flex items-center gap-2 rounded-lg bg-midnight-800/50 transition-all duration-300 ${t?"lg:justify-center lg:w-12 lg:h-12 lg:mx-auto":"px-3 py-2"}
                  }`,children:l==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:`text-teal-400 flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-teal-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Synced"})]}):l==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:`text-blue-400 animate-pulse flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-blue-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:`text-midnight-400 flex-shrink-0 transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`}),e.jsx("span",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden whitespace-nowrap ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:"Idle"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!w),className:`flex items-center gap-3 rounded-lg hover:bg-white/5 transition-all duration-300 ${t?"lg:justify-center lg:w-12 lg:h-12 lg:mx-auto":"w-full px-3 py-2"}
                      }`,title:t?j.email||"Account":"",children:[e.jsx("div",{className:`rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0 transition-all duration-300 ${t?"lg:w-10 lg:h-10":"w-8 h-8"}`,children:e.jsx(L,{className:`text-white transition-all duration-300 ${t?"lg:w-5 lg:h-5":"w-4 h-4"}`})}),e.jsxs("div",{className:`flex-1 text-left transition-all duration-300 overflow-hidden ${t?"lg:w-0 lg:opacity-0":"w-auto opacity-100"}`,children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:j.email}),e.jsx("p",{className:"text-xs text-midnight-400 whitespace-nowrap",children:"Account"})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsx("div",{className:`absolute z-50 animate-fade-in glass rounded-lg shadow-lg ${t?"lg:bottom-0 lg:left-[calc(100%+8px)] bottom-full left-0 right-0 mb-2":"bottom-full left-0 right-0 mb-2"}`,children:e.jsxs("button",{onClick:P,className:`flex items-center gap-3 px-4 py-3 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors ${t?"lg:w-auto":"w-full"}`,children:[e.jsx(A,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Sign Out"})]})})]})]})]}):e.jsx("div",{className:`text-center transition-all duration-300 ${t?"lg:px-0":""}`,children:v?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{className:"w-6 h-6 text-midnight-500 mx-auto"}),e.jsx("p",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden ${t?"lg:h-0 lg:opacity-0":"h-auto opacity-100"}`,children:"Not signed in"})]}):e.jsx("p",{className:`text-xs text-midnight-400 transition-all duration-300 overflow-hidden ${t?"lg:h-0 lg:opacity-0":"h-auto opacity-100"}`,children:"Made with ❤️ for small businesses"})})}),e.jsx("button",{onClick:M,className:"hidden lg:flex absolute -right-3 top-4 items-center justify-center w-6 h-12 rounded-r-lg glass hover:bg-white/10 transition-all duration-300 shadow-lg opacity-0 group-hover:opacity-100 hover:!opacity-100 border-l-0","aria-label":"Toggle sidebar",title:t?"Expand sidebar":"Collapse sidebar",children:t?e.jsx(de,{className:"w-4 h-4 text-white"}):e.jsx(ue,{className:"w-4 h-4 text-white"})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen lg:p-4",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 glass safe-area-top sticky top-0 z-30",children:[e.jsxs(_,{to:"/dashboard",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-brand font-bold text-white text-lg tracking-tight",children:"Businezz"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v&&j&&e.jsxs("button",{onClick:()=>p(!w),className:"p-2 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors relative","aria-label":"User menu",children:[e.jsx(L,{className:"w-5 h-5 text-white"}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 glass rounded-lg p-2 z-50 animate-fade-in min-w-[200px]",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/10 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:j.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]}),e.jsxs("button",{onClick:P,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:()=>o(!n),className:"p-3 -mr-1 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors","aria-label":"Toggle menu",children:n?e.jsx(he,{className:"w-6 h-6 text-white"}):e.jsx(xe,{className:"w-6 h-6 text-white"})})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 lg:p-0 safe-area-bottom",children:e.jsx("div",{className:"glass rounded-2xl min-h-full p-4 sm:p-6 lg:p-8 animate-fade-in",children:i})})]})]})}const ye=s.lazy(()=>x(()=>import("./Landing-1x-c_AHQ.js"),__vite__mapDeps([0,1,2,3,4]))),Ne=s.lazy(()=>x(()=>import("./Dashboard-CbJARUCR.js"),__vite__mapDeps([5,1,2,6,7,8,3,4]))),Se=s.lazy(()=>x(()=>import("./Invoices-DAWk395r.js"),__vite__mapDeps([9,1,2,7,8,10,6,3,4]))),z=s.lazy(()=>x(()=>import("./CreateInvoice-QV7jPY3I.js"),__vite__mapDeps([11,1,2,6,7,8,3,4]))),_e=s.lazy(()=>x(()=>import("./ViewInvoice-B8gtaphS.js"),__vite__mapDeps([12,1,2,6,10,7,8,3,4]))),Ce=s.lazy(()=>x(()=>import("./Products-BIWDN5Pf.js"),__vite__mapDeps([13,1,2,6,7,8,3,4]))),Ie=s.lazy(()=>x(()=>import("./Customers-HufBNi07.js"),__vite__mapDeps([14,1,2,6,7,8,3,4]))),Ee=s.lazy(()=>x(()=>import("./Settings-CF7kwHOJ.js"),__vite__mapDeps([15,1,2,7,8,3,4]))),Oe=s.lazy(()=>x(()=>import("./Login-B8cqM3Zt.js"),__vite__mapDeps([16,1,2,3,4]))),Pe=s.lazy(()=>x(()=>import("./Signup-i3-dftM9.js"),__vite__mapDeps([17,1,2,8,6,3,4]))),ke=s.lazy(()=>x(()=>import("./ForgotPassword-BwpVIPd_.js"),__vite__mapDeps([18,1,2,3,4])));function b(){return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(me,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading..."})]})})}function Re(){return e.jsx(H,{children:e.jsx(je,{children:e.jsx(we,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsxs(R,{children:[e.jsx(d,{path:"/",element:e.jsx(ye,{})}),e.jsx(d,{path:"/login",element:e.jsx(Oe,{})}),e.jsx(d,{path:"/signup",element:e.jsx(Pe,{})}),e.jsx(d,{path:"/forgot-password",element:e.jsx(ke,{})}),e.jsx(d,{path:"/dashboard",element:e.jsx(N,{children:e.jsx(S,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Ne,{})})})})}),e.jsx(d,{path:"/invoices/*",element:e.jsx(N,{children:e.jsx(S,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsxs(R,{children:[e.jsx(d,{path:"/",element:e.jsx(Se,{})}),e.jsx(d,{path:"/new",element:e.jsx(z,{})}),e.jsx(d,{path:"/edit/:id",element:e.jsx(z,{})}),e.jsx(d,{path:"/view/:id",element:e.jsx(_e,{})})]})})})})}),e.jsx(d,{path:"/products",element:e.jsx(N,{children:e.jsx(S,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Ce,{})})})})}),e.jsx(d,{path:"/customers",element:e.jsx(N,{children:e.jsx(S,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Ie,{})})})})}),e.jsx(d,{path:"/settings",element:e.jsx(N,{children:e.jsx(S,{children:e.jsx(s.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(Ee,{})})})})})]})})})})})}class $e extends s.Component{constructor(){super(...arguments);k(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,o){console.error("Uncaught error:",n,o)}render(){var n;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-coral-500/20 mb-6",children:e.jsx(ge,{className:"w-8 h-8 text-coral-400"})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const Le=new X({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:1,retryDelay:1e3},mutations:{retry:1}}}),V=document.getElementById("root");if(!V)throw new Error("Failed to find root element");E.createRoot(V).render(e.jsx(ee.StrictMode,{children:e.jsxs(q,{client:Le,children:[e.jsx($e,{children:e.jsx(Re,{})}),e.jsx(Y,{initialIsOpen:!1})]})}));export{Ue as T,be as a,v as i,u as s,O as u};
