var At=Object.defineProperty;var It=(t,s,g)=>s in t?At(t,s,{enumerable:!0,configurable:!0,writable:!0,value:g}):t[s]=g;var tt=(t,s,g)=>It(t,typeof s!="symbol"?s+"":s,g);import{r as F,a as kt,N as Et,u as Ft,b as Se,L as G,g as Rt,c as We,d as ft,B as _t,R as st,e as se,f as Ht}from"./vendor-yPSHqVck.js";import{c as Wt}from"./supabase-DfwcnzK-.js";import{R as Me,P as ie,L as Ot,F as ge,a as gt,U as pt,S as Lt,C as ce,b as Ne,c as Be,d as at,e as vt,X as Ge,M as Mt,I as Bt,f as yt,A as ve,g as De,T as nt,j as Ut,E as zt,h as Je,i as Yt,k as it,l as rt,m as $t,n as jt,o as we,D as Ve,p as Ce,q as Ie,r as Re,s as Ue,t as Gt,u as Jt,v as Vt,w as fe,x as Qt,B as qt,H as lt,y as Kt,z as ze,G as Xt,J as ot,K as Ye,N as ct}from"./ui-DcaoBth_.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))n(p);new MutationObserver(p=>{for(const A of p)if(A.type==="childList")for(const H of A.addedNodes)H.tagName==="LINK"&&H.rel==="modulepreload"&&n(H)}).observe(document,{childList:!0,subtree:!0});function g(p){const A={};return p.integrity&&(A.integrity=p.integrity),p.referrerPolicy&&(A.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?A.credentials="include":p.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(p){if(p.ep)return;p.ep=!0;const A=g(p);fetch(p.href,A)}})();var bt={exports:{}},_e={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=F,es=Symbol.for("react.element"),ts=Symbol.for("react.fragment"),ss=Object.prototype.hasOwnProperty,as=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ns={key:!0,ref:!0,__self:!0,__source:!0};function Nt(t,s,g){var n,p={},A=null,H=null;g!==void 0&&(A=""+g),s.key!==void 0&&(A=""+s.key),s.ref!==void 0&&(H=s.ref);for(n in s)ss.call(s,n)&&!ns.hasOwnProperty(n)&&(p[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)p[n]===void 0&&(p[n]=s[n]);return{$$typeof:es,type:t,key:A,ref:H,props:p,_owner:as.current}}_e.Fragment=ts;_e.jsx=Nt;_e.jsxs=Nt;bt.exports=_e;var e=bt.exports,$e={},dt=kt;$e.createRoot=dt.createRoot,$e.hydrateRoot=dt.hydrateRoot;const is="https://kkcalkiqfdykbmitaqcb.supabase.co",wt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrY2Fsa2lxZmR5a2JtaXRhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ1MTksImV4cCI6MjA4NTQwMDUxOX0.hkDQS1mVtO2lgYlQXYNkbNpIF9crkotYMVaxe5gmLkc",J=!!wt,Y=J?Wt(is,wt):null,ee={INVOICES:"invoices",CUSTOMERS:"customers",PRODUCTS:"products",BUSINESS:"business_profile",SETTINGS:"settings"},St=F.createContext(void 0);function rs({children:t}){const[s,g]=F.useState(null),[n,p]=F.useState(null),[A,H]=F.useState(!0);F.useEffect(()=>{if(!Y){H(!1);return}Y.auth.getSession().then(({data:{session:w}})=>{p(w),g((w==null?void 0:w.user)??null),H(!1)});const{data:{subscription:h}}=Y.auth.onAuthStateChange((w,o)=>{p(o),g((o==null?void 0:o.user)??null),H(!1)});return()=>h.unsubscribe()},[]);const S={user:s,session:n,loading:A,signUp:async(h,w)=>{if(!Y)return{error:{message:"Supabase not configured"}};const{error:o}=await Y.auth.signUp({email:h,password:w});return{error:o}},signIn:async(h,w)=>{if(!Y)return{error:{message:"Supabase not configured"}};const{error:o}=await Y.auth.signInWithPassword({email:h,password:w});return{error:o}},signOut:async()=>{Y&&await Y.auth.signOut()},resetPassword:async h=>{if(!Y)return{error:{message:"Supabase not configured"}};const{error:w}=await Y.auth.resetPasswordForEmail(h,{redirectTo:`${window.location.origin}/reset-password`});return{error:w}}};return e.jsx(St.Provider,{value:S,children:t})}function ye(){const t=F.useContext(St);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}async function Pe(){if(!Y)return null;const{data:{user:t}}=await Y.auth.getUser();return(t==null?void 0:t.id)||null}const ke={async getAll(){if(!Y)return[];const{data:t,error:s}=await Y.from(ee.INVOICES).select("*").order("created_at",{ascending:!1});if(s)throw s;return(t||[]).map(Oe)},async getById(t){if(!Y)return null;const{data:s,error:g}=await Y.from(ee.INVOICES).select("*").eq("id",t).single();if(g&&g.code!=="PGRST116")throw g;return s?Oe(s):null},async save(t){if(!Y)throw new Error("Database not configured");const s=await Pe();if(!s)throw new Error("User not authenticated");const g={...cs(t),user_id:s},{data:n,error:p}=await Y.from(ee.INVOICES).upsert(g,{onConflict:"id"}).select().single();if(p)throw p;return Oe(n)},async delete(t){if(!Y)throw new Error("Database not configured");const{error:s}=await Y.from(ee.INVOICES).delete().eq("id",t);if(s)throw s}},Ee={async getAll(){if(!Y)return[];const{data:t,error:s}=await Y.from(ee.CUSTOMERS).select("*").order("name");if(s)throw s;return t||[]},async save(t){if(!Y)throw new Error("Database not configured");const s=await Pe();if(!s)throw new Error("User not authenticated");const g={...t,user_id:s},{data:n,error:p}=await Y.from(ee.CUSTOMERS).upsert(g,{onConflict:"id"}).select().single();if(p)throw p;return n},async delete(t){if(!Y)throw new Error("Database not configured");const{error:s}=await Y.from(ee.CUSTOMERS).delete().eq("id",t);if(s)throw s}},Fe={async getAll(){if(!Y)return[];const{data:t,error:s}=await Y.from(ee.PRODUCTS).select("*").order("name");if(s)throw s;return t||[]},async save(t){if(!Y)throw new Error("Database not configured");const s=await Pe();if(!s)throw new Error("User not authenticated");const g={...t,user_id:s},{data:n,error:p}=await Y.from(ee.PRODUCTS).upsert(g,{onConflict:"id"}).select().single();if(p)throw p;return n},async delete(t){if(!Y)throw new Error("Database not configured");const{error:s}=await Y.from(ee.PRODUCTS).delete().eq("id",t);if(s)throw s}},Qe={async get(){if(!Y)return null;const{data:t,error:s}=await Y.from(ee.BUSINESS).select("*").single();if(s&&s.code!=="PGRST116")throw s;return t?mt(t):null},async save(t){if(!Y)throw new Error("Database not configured");const s=await Pe();if(!s)throw new Error("User not authenticated");const g={...ds(t),user_id:s},{data:n,error:p}=await Y.from(ee.BUSINESS).upsert(g,{onConflict:"user_id"}).select().single();if(p)throw p;return mt(n)}},qe={async get(){if(!Y)return null;const{data:t,error:s}=await Y.from(ee.SETTINGS).select("*").single();if(s&&s.code!=="PGRST116")throw s;return t?ht(t):null},async save(t){if(!Y)throw new Error("Database not configured");const s=await Pe();if(!s)throw new Error("User not authenticated");const g={...ms(t),user_id:s},{data:n,error:p}=await Y.from(ee.SETTINGS).upsert(g,{onConflict:"user_id"}).select().single();if(p)throw p;return ht(n)}};async function ls(t){if(!J||!Y)return{success:!1,message:"Supabase not configured"};try{for(const s of t.invoices)await ke.save(s);for(const s of t.customers)await Ee.save(s);for(const s of t.products)await Fe.save(s);return t.business.name&&await Qe.save(t.business),await qe.save(t.settings),{success:!0,message:"All data synced to cloud successfully!"}}catch(s){return console.error("Sync to cloud failed:",s),{success:!1,message:`Sync failed: ${s.message}`}}}async function os(){if(!J||!Y)return{success:!1,message:"Supabase not configured"};try{const[t,s,g,n,p]=await Promise.all([ke.getAll(),Ee.getAll(),Fe.getAll(),Qe.get(),qe.get()]);return{success:!0,message:"Data fetched from cloud successfully!",data:{invoices:t,customers:s,products:g,business:n,settings:p}}}catch(t){return console.error("Sync from cloud failed:",t),{success:!1,message:`Sync failed: ${t.message}`}}}function Oe(t){return{id:t.id,invoiceNumber:t.invoice_number,date:t.date,customerName:t.customer_name,customerEmail:t.customer_email,customerPhone:t.customer_phone,customerAddress:t.customer_address,items:t.items||[],taxRate:t.tax_rate,discount:t.discount,notes:t.notes,status:t.status,createdAt:t.created_at,updatedAt:t.updated_at}}function cs(t){return{id:t.id,invoice_number:t.invoiceNumber,date:t.date,customer_name:t.customerName,customer_email:t.customerEmail,customer_phone:t.customerPhone,customer_address:t.customerAddress,items:t.items,tax_rate:t.taxRate,discount:t.discount,notes:t.notes,status:t.status,created_at:t.createdAt||new Date().toISOString(),updated_at:new Date().toISOString()}}function mt(t){return{id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,pincode:t.pincode,phone:t.phone,email:t.email,taxId:t.tax_id,logo:t.logo,currency:t.currency,taxRate:t.tax_rate}}function ds(t){return{id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,pincode:t.pincode,phone:t.phone,email:t.email,tax_id:t.taxId,logo:t.logo,currency:t.currency,tax_rate:t.taxRate,updated_at:new Date().toISOString()}}function ht(t){return{id:t.id,currency:t.currency,taxRate:t.tax_rate,invoicePrefix:t.invoice_prefix,defaultPaymentTerms:t.default_payment_terms,showLogo:t.show_logo,taxLabel:t.tax_label}}function ms(t){return{id:t.id,currency:t.currency,tax_rate:t.taxRate,invoice_prefix:t.invoicePrefix,default_payment_terms:t.defaultPaymentTerms,show_logo:t.showLogo,tax_label:t.taxLabel,updated_at:new Date().toISOString()}}const Q={INVOICES:"invoiceflow_invoices",BUSINESS:"invoiceflow_business",SETTINGS:"invoiceflow_settings",CUSTOMERS:"invoiceflow_customers",PRODUCTS:"invoiceflow_products"},q={get:t=>{try{const s=localStorage.getItem(t);return s?JSON.parse(s):null}catch(s){return console.error(`Error reading from storage: ${t}`,s),null}},set:(t,s)=>{try{return localStorage.setItem(t,JSON.stringify(s)),!0}catch(g){return console.error(`Error writing to storage: ${t}`,g),!1}},remove:t=>{try{return localStorage.removeItem(t),!0}catch(s){return console.error(`Error removing from storage: ${t}`,s),!1}}},K={getAll:()=>q.get(Q.INVOICES)||[],getById:t=>K.getAll().find(g=>g.id===t)||null,save:t=>{const s=K.getAll(),g=s.findIndex(A=>A.id===t.id),n=new Date().toISOString();g>=0?s[g]={...t,updatedAt:n}:s.push({...t,createdAt:n,updatedAt:n});const p=q.set(Q.INVOICES,s);return p&&J&&ke.save(t).catch(A=>console.error("Auto-sync invoice failed:",A)),p},delete:t=>{const s=K.getAll().filter(n=>n.id!==t),g=q.set(Q.INVOICES,s);return g&&J&&ke.delete(t).catch(n=>console.error("Auto-sync delete invoice failed:",n)),g},getNextInvoiceNumber:()=>{const s=le.get().invoicePrefix||"INV",g=K.getAll(),n=new Date().getFullYear(),A=g.filter(H=>H.invoiceNumber&&H.invoiceNumber.startsWith(`${s}-${n}`)).length+1;return`${s}-${n}-${String(A).padStart(4,"0")}`}},re={get:()=>q.get(Q.BUSINESS)||{name:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",taxId:"",logo:null,currency:"₹",taxRate:18},save:t=>{const s=q.set(Q.BUSINESS,t);return s&&J&&Qe.save(t).catch(g=>console.error("Auto-sync business failed:",g)),s}},te={getAll:()=>q.get(Q.CUSTOMERS)||[],save:t=>{const s=te.getAll(),g=s.findIndex(p=>p.id===t.id);g>=0?s[g]=t:s.push(t);const n=q.set(Q.CUSTOMERS,s);return n&&J&&Ee.save(t).catch(p=>console.error("Auto-sync customer failed:",p)),n},delete:t=>{const s=te.getAll().filter(n=>n.id!==t),g=q.set(Q.CUSTOMERS,s);return g&&J&&Ee.delete(t).catch(n=>console.error("Auto-sync delete customer failed:",n)),g}},ae={getAll:()=>q.get(Q.PRODUCTS)||[],save:t=>{const s=ae.getAll(),g=s.findIndex(p=>p.id===t.id);g>=0?s[g]=t:s.push(t);const n=q.set(Q.PRODUCTS,s);return n&&J&&Fe.save(t).catch(p=>console.error("Auto-sync product failed:",p)),n},delete:t=>{const s=ae.getAll().filter(n=>n.id!==t),g=q.set(Q.PRODUCTS,s);return g&&J&&Fe.delete(t).catch(n=>console.error("Auto-sync delete product failed:",n)),g}},le={get:()=>q.get(Q.SETTINGS)||{currency:"₹",taxRate:18,invoicePrefix:"INV",defaultPaymentTerms:"Due on receipt",showLogo:!0,taxLabel:"GST"},save:t=>{const s=q.set(Q.SETTINGS,t);return s&&J&&qe.save(t).catch(g=>console.error("Auto-sync settings failed:",g)),s}};function hs(){return J}async function Ct(){if(!J)return{success:!1,message:"Cloud sync not configured. Please add Supabase credentials."};const t={invoices:K.getAll(),customers:te.getAll(),products:ae.getAll(),business:re.get(),settings:le.get()};return ls(t)}async function Pt(){if(!J)return{success:!1,message:"Cloud sync not configured. Please add Supabase credentials."};const t=await os();if(!t.success||!t.data)return{success:!1,message:t.message};const{data:s}=t,g=K.getAll(),n=Le(g,s.invoices);q.set(Q.INVOICES,n);const p=te.getAll(),A=Le(p,s.customers);q.set(Q.CUSTOMERS,A);const H=ae.getAll(),b=Le(H,s.products);return q.set(Q.PRODUCTS,b),s.business&&q.set(Q.BUSINESS,s.business),s.settings&&q.set(Q.SETTINGS,s.settings),{success:!0,message:`Synced! ${n.length} invoices, ${A.length} customers, ${b.length} products.`}}async function us(){const t=await Pt();if(!t.success)return t;const s=await Ct();return s.success?{success:!0,message:"Two-way sync completed successfully!"}:s}const be={isAvailable:hs,uploadToCloud:Ct,downloadFromCloud:Pt,fullSync:us};function Le(t,s){const g=new Map;for(const n of t)g.set(n.id,n);for(const n of s){const p=g.get(n.id);if(!p)g.set(n.id,n);else{const A=p.updatedAt?new Date(p.updatedAt).getTime():0;(n.updatedAt?new Date(n.updatedAt).getTime():0)>=A&&g.set(n.id,n)}}return Array.from(g.values())}const Dt=F.createContext(void 0);function xs({children:t}){const{user:s}=ye(),[g,n]=F.useState(!1),[p,A]=F.useState(null),[H,b]=F.useState("idle"),[N,m]=F.useState(null);F.useEffect(()=>{s&&J&&E()},[s]);const E=async()=>{if(!g){n(!0),b("syncing");try{const h=await be.downloadFromCloud();h.success?(b("synced"),A(new Date),window.dispatchEvent(new Event("storage"))):(b("error"),m(h.message))}catch(h){b("error"),m(h instanceof Error?h.message:"Unknown error")}finally{n(!1)}}};F.useEffect(()=>{if(!Y||!J||!s)return;const h=()=>{console.log("Remote change detected, syncing..."),E()},o=["invoices","customers","products","business_profile","settings"].map(I=>Y.channel(`${I}-changes`).on("postgres_changes",{event:"*",schema:"public",table:I,filter:`user_id=eq.${s.id}`},h).subscribe());return()=>{o.forEach(I=>I.unsubscribe())}},[s]);const S={syncing:g,lastSyncTime:p,syncStatus:H,syncError:N};return e.jsx(Dt.Provider,{value:S,children:t})}function je(){const t=F.useContext(Dt);if(t===void 0)throw new Error("useSync must be used within a SyncProvider");return t}function fs({children:t}){const{user:s,loading:g}=ye();return J?g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 mb-6 animate-pulse",children:e.jsx(Me,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-display font-bold text-white mb-2",children:"Loading..."}),e.jsx("p",{className:"text-midnight-400",children:"Please wait"})]})}):s?e.jsx(e.Fragment,{children:t}):e.jsx(Et,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t})}const gs=[{path:"/",label:"Dashboard",icon:Ot},{path:"/invoices",label:"Invoices",icon:ge},{path:"/products",label:"Products",icon:gt},{path:"/customers",label:"Customers",icon:pt},{path:"/settings",label:"Settings",icon:Lt}];function ps({children:t}){const[s,g]=F.useState(!1),[n,p]=F.useState(!1),A=Ft(),H=Se(),{user:b,signOut:N}=ye(),{syncStatus:m}=je(),E=h=>h==="/"?A.pathname==="/":A.pathname.startsWith(h),S=async()=>{await N(),H("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>g(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out lg:transform-none ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col glass rounded-r-2xl lg:rounded-2xl m-0 lg:m-4",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs(G,{to:"/",className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center shadow-glow",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-display font-bold text-white",children:"InvoiceFlow"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Smart Billing"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(G,{to:"/invoices/new",className:"flex items-center justify-center gap-2 w-full btn-primary py-3",onClick:()=>g(!1),children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})}),e.jsx("nav",{className:"flex-1 px-4 py-2 space-y-1 overflow-y-auto",children:gs.map(h=>{const w=h.icon,o=E(h.path);return e.jsxs(G,{to:h.path,onClick:()=>g(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${o?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(w,{className:`w-5 h-5 ${o?"text-teal-400":""}`}),e.jsx("span",{className:"font-medium",children:h.label}),o&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-teal-400"})]},h.path)})}),e.jsx("div",{className:"p-4 border-t border-white/10",children:J&&b?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-midnight-800/50",children:m==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{className:"text-xs text-teal-400",children:"Synced"})]}):m==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 text-blue-400 animate-pulse"}),e.jsx("span",{className:"text-xs text-blue-400",children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 text-midnight-400"}),e.jsx("span",{className:"text-xs text-midnight-400",children:"Idle"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!n),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:b.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 glass rounded-lg p-2 z-50 animate-fade-in",children:e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})]})]}):e.jsx("div",{className:"text-center",children:J?e.jsxs("div",{className:"space-y-2",children:[e.jsx(vt,{className:"w-6 h-6 text-midnight-500 mx-auto"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Not signed in"})]}):e.jsx("p",{className:"text-xs text-midnight-400",children:"Made with ❤️ for small businesses"})})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen lg:p-4",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 glass safe-area-top sticky top-0 z-30",children:[e.jsxs(G,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-display font-bold text-white text-lg",children:"InvoiceFlow"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[J&&b&&e.jsxs("button",{onClick:()=>p(!n),className:"p-2 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors relative","aria-label":"User menu",children:[e.jsx(Be,{className:"w-5 h-5 text-white"}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 glass rounded-lg p-2 z-50 animate-fade-in min-w-[200px]",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/10 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:b.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]}),e.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:()=>g(!s),className:"p-3 -mr-1 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors","aria-label":"Toggle menu",children:s?e.jsx(Ge,{className:"w-6 h-6 text-white"}):e.jsx(Mt,{className:"w-6 h-6 text-white"})})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 lg:p-0 safe-area-bottom",children:e.jsx("div",{className:"glass rounded-2xl min-h-full p-4 sm:p-6 lg:p-8 animate-fade-in",children:t})})]})]})}const ne=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t==="x"?s:s&3|8).toString(16)}),V=(t,s="₹")=>{const g=parseFloat(String(t))||0;return`${s}${g.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`},pe=(t,s="short")=>{if(!t)return"";const g=new Date(t);return s==="short"?g.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):s==="long"?g.toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}):s==="input"?g.toISOString().split("T")[0]:g.toLocaleDateString()},de=(t,s=0,g=0)=>{const n=t.reduce((N,m)=>N+(parseFloat(String(m.quantity))||0)*(parseFloat(String(m.price))||0),0),p=n*(parseFloat(String(g))||0)/100,A=n-p,H=A*(parseFloat(String(s))||0)/100,b=A+H;return{subtotal:n,discountAmount:p,taxableAmount:A,taxAmount:H,total:b}},Ke=t=>{const s={draft:"bg-midnight-600 text-midnight-200",pending:"bg-gold-500/20 text-gold-400",paid:"bg-teal-500/20 text-teal-400",overdue:"bg-coral-500/20 text-coral-400",cancelled:"bg-midnight-700 text-midnight-400"};return s[t]||s.draft},Xe=t=>({draft:"Draft",pending:"Pending",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled"})[t]||"Unknown",vs=t=>{const s=new Date,g=new Date(t),n=s.getTime()-g.getTime(),p=Math.floor(n/1e3),A=Math.floor(p/60),H=Math.floor(A/60),b=Math.floor(H/24);return b>30?pe(t,"short"):b>1?`${b} days ago`:b===1?"Yesterday":H>1?`${H} hours ago`:H===1?"1 hour ago":A>1?`${A} minutes ago`:"Just now"},me=t=>{const s=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],g=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(t===0)return"Zero";if(t<0)return"Minus "+me(-t);let n="";return Math.floor(t/1e7)>0&&(n+=me(Math.floor(t/1e7))+" Crore ",t%=1e7),Math.floor(t/1e5)>0&&(n+=me(Math.floor(t/1e5))+" Lakh ",t%=1e5),Math.floor(t/1e3)>0&&(n+=me(Math.floor(t/1e3))+" Thousand ",t%=1e3),Math.floor(t/100)>0&&(n+=me(Math.floor(t/100))+" Hundred ",t%=100),t>0&&(n!==""&&(n+="and "),t<20?n+=s[t]:(n+=g[Math.floor(t/10)],t%10>0&&(n+="-"+s[t%10]))),n.trim()};function Te({icon:t,label:s,value:g,subtext:n,color:p,delay:A}){return e.jsx("div",{className:"glass rounded-2xl p-6 card-hover animate-slide-up",style:{animationDelay:`${A}ms`},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-midnight-400 text-sm font-medium",children:s}),e.jsx("p",{className:"text-3xl font-display font-bold text-white mt-2",children:g}),n&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1",children:n})]}),e.jsx("div",{className:`p-3 rounded-xl ${p}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})}function ys(){const{lastSyncTime:t}=je(),s=F.useMemo(()=>re.get(),[t]),g=F.useMemo(()=>K.getAll(),[t]),n=F.useMemo(()=>{const A=new Date,H=A.getMonth(),b=A.getFullYear();let N=0,m=0,E=0,S=0,h=0,w=0;return g.forEach(o=>{const I=de(o.items,o.taxRate,o.discount),C=new Date(o.date);o.status==="paid"?(N+=I.total,E++,C.getMonth()===H&&C.getFullYear()===b&&(w+=I.total)):o.status==="pending"?(m+=I.total,S++):o.status==="overdue"&&(m+=I.total,h++)}),{totalInvoices:g.length,totalRevenue:N,pendingAmount:m,paidCount:E,pendingCount:S,overdueCount:h,thisMonthRevenue:w}},[g]),p=F.useMemo(()=>[...g].sort((A,H)=>new Date(H.createdAt||"").getTime()-new Date(A.createdAt||"").getTime()).slice(0,5),[g]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-white",children:["Welcome back",s.name?`, ${s.name.split(" ")[0]}`:"","!"]}),e.jsx("p",{className:"text-midnight-400 mt-1",children:"Here's what's happening with your invoices today."})]}),e.jsxs(G,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Te,{icon:ge,label:"Total Invoices",value:n.totalInvoices,subtext:`${n.paidCount} paid`,color:"bg-teal-500/20 text-teal-400",delay:0}),e.jsx(Te,{icon:Bt,label:"Total Revenue",value:V(n.totalRevenue,s.currency),subtext:`This month: ${V(n.thisMonthRevenue,s.currency)}`,color:"bg-gold-500/20 text-gold-400",delay:100}),e.jsx(Te,{icon:yt,label:"Pending",value:n.pendingCount,subtext:V(n.pendingAmount,s.currency),color:"bg-midnight-500/50 text-midnight-300",delay:200}),e.jsx(Te,{icon:ve,label:"Overdue",value:n.overdueCount,subtext:"Need attention",color:"bg-coral-500/20 text-coral-400",delay:300})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"400ms"},children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(G,{to:"/invoices/new",className:"flex items-center gap-3 p-4 rounded-xl bg-teal-500/10 hover:bg-teal-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(ie,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Create Invoice"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Generate a new invoice"})]}),e.jsx(De,{className:"w-5 h-5 text-teal-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(G,{to:"/products",className:"flex items-center gap-3 p-4 rounded-xl bg-gold-500/10 hover:bg-gold-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gold-500/20",children:e.jsx(nt,{className:"w-5 h-5 text-gold-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Add or edit products"})]}),e.jsx(De,{className:"w-5 h-5 text-gold-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(G,{to:"/settings",className:"flex items-center gap-3 p-4 rounded-xl bg-midnight-600/50 hover:bg-midnight-600 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-500",children:e.jsx(ce,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Business Profile"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Update your details"})]}),e.jsx(De,{className:"w-5 h-5 text-midnight-300 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"500ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white",children:"Recent Invoices"}),e.jsxs(G,{to:"/invoices",className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:["View all ",e.jsx(De,{className:"w-4 h-4"})]})]}),p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"w-12 h-12 text-midnight-500 mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"No invoices yet"}),e.jsx(G,{to:"/invoices/new",className:"text-teal-400 text-sm hover:text-teal-300 mt-2 inline-block",children:"Create your first invoice"})]}):e.jsx("div",{className:"space-y-3",children:p.map(A=>{const H=de(A.items,A.taxRate,A.discount);return e.jsxs(G,{to:`/invoices/view/${A.id}`,className:"flex items-center gap-4 p-4 rounded-xl bg-midnight-800/50 hover:bg-midnight-800 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white truncate",children:A.customerName}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ke(A.status)}`,children:Xe(A.status)})]}),e.jsxs("p",{className:"text-sm text-midnight-400 mt-1",children:[A.invoiceNumber," • ",vs(A.createdAt||"")]})]}),e.jsx("p",{className:"font-mono font-semibold text-white",children:V(H.total,s.currency)})]},A.id)})})]})]}),!s.name&&g.length===0&&e.jsxs("div",{className:"glass rounded-2xl p-8 text-center animate-slide-up",style:{animationDelay:"600ms"},children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center mx-auto mb-4 shadow-glow",children:e.jsx(nt,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"Get Started"}),e.jsx("p",{className:"text-midnight-400 max-w-md mx-auto mb-6",children:"Set up your business profile and start creating professional invoices in minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(G,{to:"/settings",className:"btn-primary flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Set Up Business Profile"]}),e.jsxs(G,{to:"/invoices/new",className:"btn-secondary flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Create First Invoice"]})]})]})]})}var js={exports:{}};const bs=Rt(Ut);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,s){(function(n,p){t.exports=p(function(){try{return bs}catch{}}())})(typeof globalThis<"u"?globalThis:typeof We<"u"?We:typeof window<"u"?window:typeof self<"u"?self:We,function(g){return function(){var n={172:function(b,N){var m=this&&this.__extends||function(){var h=function(w,o){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var u in C)Object.prototype.hasOwnProperty.call(C,u)&&(I[u]=C[u])},h(w,o)};return function(w,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");h(w,o);function I(){this.constructor=w}w.prototype=o===null?Object.create(o):(I.prototype=o.prototype,new I)}}();Object.defineProperty(N,"__esModule",{value:!0}),N.CellHookData=N.HookData=void 0;var E=function(){function h(w,o,I){this.table=o,this.pageNumber=o.pageNumber,this.pageCount=this.pageNumber,this.settings=o.settings,this.cursor=I,this.doc=w.getDocument()}return h}();N.HookData=E;var S=function(h){m(w,h);function w(o,I,C,u,d,i){var r=h.call(this,o,I,i)||this;return r.cell=C,r.row=u,r.column=d,r.section=u.section,r}return w}(E);N.CellHookData=S},340:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0});var E=m(4),S=m(136),h=m(744),w=m(776),o=m(664),I=m(972);function C(u){u.API.autoTable=function(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];var r;d.length===1?r=d[0]:(console.error("Use of deprecated autoTable initiation"),r=d[2]||{},r.columns=d[0],r.body=d[1]);var f=(0,w.parseInput)(this,r),v=(0,I.createTable)(this,f);return(0,o.drawTable)(this,v),this},u.API.lastAutoTable=!1,u.API.previousAutoTable=!1,u.API.autoTable.previous=!1,u.API.autoTableText=function(d,i,r,f){(0,S.default)(d,i,r,f,this)},u.API.autoTableSetDefaults=function(d){return h.DocHandler.setDefaults(d,this),this},u.autoTableSetDefaults=function(d,i){h.DocHandler.setDefaults(d,i)},u.API.autoTableHtmlToJson=function(d,i){var r;if(i===void 0&&(i=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var f=new h.DocHandler(this),v=(0,E.parseHtml)(f,d,window,i,!1),a=v.head,l=v.body,j=((r=a[0])===null||r===void 0?void 0:r.map(function(P){return P.content}))||[];return{columns:j,rows:l,data:l}},u.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var d=this.lastAutoTable;return d&&d.finalY?d.finalY:0},u.API.autoTableAddPageContent=function(d){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),u.API.autoTable.globalDefaults||(u.API.autoTable.globalDefaults={}),u.API.autoTable.globalDefaults.addPageContent=d,this},u.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}N.default=C},136:function(b,N){Object.defineProperty(N,"__esModule",{value:!0});function m(E,S,h,w,o){w=w||{};var I=1.15,C=o.internal.scaleFactor,u=o.internal.getFontSize()/C,d=o.getLineHeightFactor?o.getLineHeightFactor():I,i=u*d,r=/\r\n|\r|\n/g,f="",v=1;if((w.valign==="middle"||w.valign==="bottom"||w.halign==="center"||w.halign==="right")&&(f=typeof E=="string"?E.split(r):E,v=f.length||1),h+=u*(2-I),w.valign==="middle"?h-=v/2*i:w.valign==="bottom"&&(h-=v*i),w.halign==="center"||w.halign==="right"){var a=u;if(w.halign==="center"&&(a*=.5),f&&v>=1){for(var l=0;l<f.length;l++)o.text(f[l],S-o.getStringUnitWidth(f[l])*a,h),h+=i;return o}S-=o.getStringUnitWidth(E)*a}return w.halign==="justify"?o.text(E,S,h,{maxWidth:w.maxWidth||100,align:"justify"}):o.text(E,S,h),o}N.default=m},420:function(b,N){Object.defineProperty(N,"__esModule",{value:!0}),N.getPageAvailableWidth=N.parseSpacing=N.getFillStyle=N.addTableBorder=N.getStringWidth=void 0;function m(o,I,C){C.applyStyles(I,!0);var u=Array.isArray(o)?o:[o],d=u.map(function(i){return C.getTextWidth(i)}).reduce(function(i,r){return Math.max(i,r)},0);return d}N.getStringWidth=m;function E(o,I,C,u){var d=I.settings.tableLineWidth,i=I.settings.tableLineColor;o.applyStyles({lineWidth:d,lineColor:i});var r=S(d,!1);r&&o.rect(C.x,C.y,I.getWidth(o.pageSize().width),u.y-C.y,r)}N.addTableBorder=E;function S(o,I){var C=o>0,u=I||I===0;return C&&u?"DF":C?"S":u?"F":null}N.getFillStyle=S;function h(o,I){var C,u,d,i;if(o=o||I,Array.isArray(o)){if(o.length>=4)return{top:o[0],right:o[1],bottom:o[2],left:o[3]};if(o.length===3)return{top:o[0],right:o[1],bottom:o[2],left:o[1]};if(o.length===2)return{top:o[0],right:o[1],bottom:o[0],left:o[1]};o.length===1?o=o[0]:o=I}return typeof o=="object"?(typeof o.vertical=="number"&&(o.top=o.vertical,o.bottom=o.vertical),typeof o.horizontal=="number"&&(o.right=o.horizontal,o.left=o.horizontal),{left:(C=o.left)!==null&&C!==void 0?C:I,top:(u=o.top)!==null&&u!==void 0?u:I,right:(d=o.right)!==null&&d!==void 0?d:I,bottom:(i=o.bottom)!==null&&i!==void 0?i:I}):(typeof o!="number"&&(o=I),{top:o,right:o,bottom:o,left:o})}N.parseSpacing=h;function w(o,I){var C=h(I.settings.margin,0);return o.pageSize().width-(C.left+C.right)}N.getPageAvailableWidth=w},796:function(b,N){var m=this&&this.__extends||function(){var w=function(o,I){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,u){C.__proto__=u}||function(C,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(C[d]=u[d])},w(o,I)};return function(o,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");w(o,I);function C(){this.constructor=o}o.prototype=I===null?Object.create(I):(C.prototype=I.prototype,new C)}}();Object.defineProperty(N,"__esModule",{value:!0}),N.getTheme=N.defaultStyles=N.HtmlRowInput=void 0;var E=function(w){m(o,w);function o(I){var C=w.call(this)||this;return C._element=I,C}return o}(Array);N.HtmlRowInput=E;function S(w){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/w,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}N.defaultStyles=S;function h(w){var o={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return o[w]}N.getTheme=h},903:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.parseCss=void 0;var E=m(420);function S(C,u,d,i,r){var f={},v=1.3333333333333333,a=w(u,function(T){return r.getComputedStyle(T).backgroundColor});a!=null&&(f.fillColor=a);var l=w(u,function(T){return r.getComputedStyle(T).color});l!=null&&(f.textColor=l);var j=I(i,d);j&&(f.cellPadding=j);var P="borderTopColor",D=v*d,y=i.borderTopWidth;if(i.borderBottomWidth===y&&i.borderRightWidth===y&&i.borderLeftWidth===y){var R=(parseFloat(y)||0)/D;R&&(f.lineWidth=R)}else f.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/D,right:(parseFloat(i.borderRightWidth)||0)/D,bottom:(parseFloat(i.borderBottomWidth)||0)/D,left:(parseFloat(i.borderLeftWidth)||0)/D},f.lineWidth.top||(f.lineWidth.right?P="borderRightColor":f.lineWidth.bottom?P="borderBottomColor":f.lineWidth.left&&(P="borderLeftColor"));var O=w(u,function(T){return r.getComputedStyle(T)[P]});O!=null&&(f.lineColor=O);var U=["left","right","center","justify"];U.indexOf(i.textAlign)!==-1&&(f.halign=i.textAlign),U=["middle","bottom","top"],U.indexOf(i.verticalAlign)!==-1&&(f.valign=i.verticalAlign);var c=parseInt(i.fontSize||"");isNaN(c)||(f.fontSize=c/v);var x=h(i);x&&(f.fontStyle=x);var k=(i.fontFamily||"").toLowerCase();return C.indexOf(k)!==-1&&(f.font=k),f}N.parseCss=S;function h(C){var u="";return(C.fontWeight==="bold"||C.fontWeight==="bolder"||parseInt(C.fontWeight)>=700)&&(u="bold"),(C.fontStyle==="italic"||C.fontStyle==="oblique")&&(u+="italic"),u}function w(C,u){var d=o(C,u);if(!d)return null;var i=d.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],f=parseInt(i[4]);return f===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function o(C,u){var d=u(C);return d==="rgba(0, 0, 0, 0)"||d==="transparent"||d==="initial"||d==="inherit"?C.parentElement==null?null:o(C.parentElement,u):d}function I(C,u){var d=[C.paddingTop,C.paddingRight,C.paddingBottom,C.paddingLeft],i=96/(72/u),r=(parseInt(C.lineHeight)-parseInt(C.fontSize))/u/2,f=d.map(function(a){return parseInt(a||"0")/i}),v=(0,E.parseSpacing)(f,0);return r>v.top&&(v.top=r),r>v.bottom&&(v.bottom=r),v}},744:function(b,N){Object.defineProperty(N,"__esModule",{value:!0}),N.DocHandler=void 0;var m={},E=function(){function S(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return S.setDefaults=function(h,w){w===void 0&&(w=null),w?w.__autoTableDocumentDefaults=h:m=h},S.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},S.prototype.applyStyles=function(h,w){var o,I,C;w===void 0&&(w=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var u=this.jsPDFDocument.internal.getFont(),d=u.fontStyle,i=u.fontName;if(h.font&&(i=h.font),h.fontStyle){d=h.fontStyle;var r=this.getFontList()[i];r&&r.indexOf(d)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(r[0]),d=r[0])}if(this.jsPDFDocument.setFont(i,d),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!w){var f=S.unifyColor(h.fillColor);f&&(o=this.jsPDFDocument).setFillColor.apply(o,f),f=S.unifyColor(h.textColor),f&&(I=this.jsPDFDocument).setTextColor.apply(I,f),f=S.unifyColor(h.lineColor),f&&(C=this.jsPDFDocument).setDrawColor.apply(C,f),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},S.prototype.splitTextToSize=function(h,w,o){return this.jsPDFDocument.splitTextToSize(h,w,o)},S.prototype.rect=function(h,w,o,I,C){return this.jsPDFDocument.rect(h,w,o,I,C)},S.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},S.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},S.prototype.getDocument=function(){return this.jsPDFDocument},S.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},S.prototype.addPage=function(){return this.jsPDFDocument.addPage()},S.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},S.prototype.getGlobalOptions=function(){return m||{}},S.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},S.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},S.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},S.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},S.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},S.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},S}();N.DocHandler=E},4:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.parseHtml=void 0;var E=m(903),S=m(796);function h(I,C,u,d,i){var r,f;d===void 0&&(d=!1),i===void 0&&(i=!1);var v;typeof C=="string"?v=u.document.querySelector(C):v=C;var a=Object.keys(I.getFontList()),l=I.scaleFactor(),j=[],P=[],D=[];if(!v)return console.error("Html table could not be found with input: ",C),{head:j,body:P,foot:D};for(var y=0;y<v.rows.length;y++){var R=v.rows[y],O=(f=(r=R==null?void 0:R.parentElement)===null||r===void 0?void 0:r.tagName)===null||f===void 0?void 0:f.toLowerCase(),U=w(a,l,u,R,d,i);U&&(O==="thead"?j.push(U):O==="tfoot"?D.push(U):P.push(U))}return{head:j,body:P,foot:D}}N.parseHtml=h;function w(I,C,u,d,i,r){for(var f=new S.HtmlRowInput(d),v=0;v<d.cells.length;v++){var a=d.cells[v],l=u.getComputedStyle(a);if(i||l.display!=="none"){var j=void 0;r&&(j=(0,E.parseCss)(I,a,C,l,u)),f.push({rowSpan:a.rowSpan,colSpan:a.colSpan,styles:j,_element:a,content:o(a)})}}var P=u.getComputedStyle(d);if(f.length>0&&(i||P.display!=="none"))return f}function o(I){var C=I.cloneNode(!0);return C.innerHTML=C.innerHTML.replace(/\n/g,"").replace(/ +/g," "),C.innerHTML=C.innerHTML.split(/<br.*?>/).map(function(u){return u.trim()}).join(`
`),C.innerText||C.textContent||""}},776:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.parseInput=void 0;var E=m(4),S=m(356),h=m(420),w=m(744),o=m(792);function I(v,a){var l=new w.DocHandler(v),j=l.getDocumentOptions(),P=l.getGlobalOptions();(0,o.default)(l,P,j,a);var D=(0,S.assign)({},P,j,a),y;typeof window<"u"&&(y=window);var R=C(P,j,a),O=u(P,j,a),U=d(l,D),c=r(l,D,y);return{id:a.tableId,content:c,hooks:O,styles:R,settings:U}}N.parseInput=I;function C(v,a,l){for(var j={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},P=function(O){if(O==="columnStyles"){var U=v[O],c=a[O],x=l[O];j.columnStyles=(0,S.assign)({},U,c,x)}else{var k=[v,a,l],T=k.map(function(_){return _[O]||{}});j[O]=(0,S.assign)({},T[0],T[1],T[2])}},D=0,y=Object.keys(j);D<y.length;D++){var R=y[D];P(R)}return j}function u(v,a,l){for(var j=[v,a,l],P={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,y=j;D<y.length;D++){var R=y[D];R.didParseCell&&P.didParseCell.push(R.didParseCell),R.willDrawCell&&P.willDrawCell.push(R.willDrawCell),R.didDrawCell&&P.didDrawCell.push(R.didDrawCell),R.willDrawPage&&P.willDrawPage.push(R.willDrawPage),R.didDrawPage&&P.didDrawPage.push(R.didDrawPage)}return P}function d(v,a){var l,j,P,D,y,R,O,U,c,x,k,T,_=(0,h.parseSpacing)(a.margin,40/v.scaleFactor()),W=(l=i(v,a.startY))!==null&&l!==void 0?l:_.top,L;a.showFoot===!0?L="everyPage":a.showFoot===!1?L="never":L=(j=a.showFoot)!==null&&j!==void 0?j:"everyPage";var M;a.showHead===!0?M="everyPage":a.showHead===!1?M="never":M=(P=a.showHead)!==null&&P!==void 0?P:"everyPage";var $=(D=a.useCss)!==null&&D!==void 0?D:!1,z=a.theme||($?"plain":"striped"),B=!!a.horizontalPageBreak,X=(y=a.horizontalPageBreakRepeat)!==null&&y!==void 0?y:null;return{includeHiddenHtml:(R=a.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:$,theme:z,startY:W,margin:_,pageBreak:(O=a.pageBreak)!==null&&O!==void 0?O:"auto",rowPageBreak:(U=a.rowPageBreak)!==null&&U!==void 0?U:"auto",tableWidth:(c=a.tableWidth)!==null&&c!==void 0?c:"auto",showHead:M,showFoot:L,tableLineWidth:(x=a.tableLineWidth)!==null&&x!==void 0?x:0,tableLineColor:(k=a.tableLineColor)!==null&&k!==void 0?k:200,horizontalPageBreak:B,horizontalPageBreakRepeat:X,horizontalPageBreakBehaviour:(T=a.horizontalPageBreakBehaviour)!==null&&T!==void 0?T:"afterAllRows"}}function i(v,a){var l=v.getLastAutoTable(),j=v.scaleFactor(),P=v.pageNumber(),D=!1;if(l&&l.startPageNumber){var y=l.startPageNumber+l.pageNumber-1;D=y===P}return typeof a=="number"?a:(a==null||a===!1)&&D&&(l==null?void 0:l.finalY)!=null?l.finalY+20/j:null}function r(v,a,l){var j=a.head||[],P=a.body||[],D=a.foot||[];if(a.html){var y=a.includeHiddenHtml;if(l){var R=(0,E.parseHtml)(v,a.html,l,y,a.useCss)||{};j=R.head||j,P=R.body||j,D=R.foot||j}else console.error("Cannot parse html in non browser environment")}var O=a.columns||f(j,P,D);return{columns:O,head:j,body:P,foot:D}}function f(v,a,l){var j=v[0]||a[0]||l[0]||[],P=[];return Object.keys(j).filter(function(D){return D!=="_element"}).forEach(function(D){var y=1,R;Array.isArray(j)?R=j[parseInt(D)]:R=j[D],typeof R=="object"&&!Array.isArray(R)&&(y=(R==null?void 0:R.colSpan)||1);for(var O=0;O<y;O++){var U=void 0;Array.isArray(j)?U=P.length:U=D+(O>0?"_".concat(O):"");var c={dataKey:U};P.push(c)}}),P}},792:function(b,N){Object.defineProperty(N,"__esModule",{value:!0});function m(S,h,w,o){for(var I=function(i){i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),typeof i.extendWidth<"u"&&(i.tableWidth=i.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof i.margins<"u"&&(typeof i.margin>"u"&&(i.margin=i.margins),console.error("Use of deprecated option: margins, use margin instead.")),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY),!i.didDrawPage&&(i.afterPageContent||i.beforePageContent||i.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),i.didDrawPage=function(D){S.applyStyles(S.userStyles),i.beforePageContent&&i.beforePageContent(D),S.applyStyles(S.userStyles),i.afterPageContent&&i.afterPageContent(D),S.applyStyles(S.userStyles),i.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),S.applyStyles(S.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){i[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var y=D[0],R=D[1];i[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(y," instead")),i[y]=i[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var y=typeof D=="string"?D:D[0],R=typeof D=="string"?D:D[1];typeof i[y]<"u"&&(typeof i.styles[R]>"u"&&(i.styles[R]=i[y]),console.error("Use of deprecated option: "+y+", use the style "+R+" instead."))});for(var r=0,f=["styles","bodyStyles","headStyles","footStyles"];r<f.length;r++){var v=f[r];E(i[v]||{})}for(var a=i.columnStyles||{},l=0,j=Object.keys(a);l<j.length;l++){var P=j[l];E(a[P]||{})}},C=0,u=[h,w,o];C<u.length;C++){var d=u[C];I(d)}}N.default=m;function E(S){S.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),S.minCellHeight||(S.minCellHeight=S.rowHeight)):S.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),S.cellWidth||(S.cellWidth=S.columnWidth))}},260:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.Column=N.Cell=N.Row=N.Table=void 0;var E=m(796),S=m(172),h=m(420),w=function(){function u(d,i){this.pageNumber=1,this.pageCount=1,this.id=d.id,this.settings=d.settings,this.styles=d.styles,this.hooks=d.hooks,this.columns=i.columns,this.head=i.head,this.body=i.body,this.foot=i.foot}return u.prototype.getHeadHeight=function(d){return this.head.reduce(function(i,r){return i+r.getMaxCellHeight(d)},0)},u.prototype.getFootHeight=function(d){return this.foot.reduce(function(i,r){return i+r.getMaxCellHeight(d)},0)},u.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},u.prototype.callCellHooks=function(d,i,r,f,v,a){for(var l=0,j=i;l<j.length;l++){var P=j[l],D=new S.CellHookData(d,this,r,f,v,a),y=P(D)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],y)return!1}return!0},u.prototype.callEndPageHooks=function(d,i){d.applyStyles(d.userStyles);for(var r=0,f=this.hooks.didDrawPage;r<f.length;r++){var v=f[r];v(new S.HookData(d,this,i))}},u.prototype.callWillDrawPageHooks=function(d,i){for(var r=0,f=this.hooks.willDrawPage;r<f.length;r++){var v=f[r];v(new S.HookData(d,this,i))}},u.prototype.getWidth=function(d){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var i=this.columns.reduce(function(f,v){return f+v.wrappedWidth},0);return i}else{var r=this.settings.margin;return d-r.left-r.right}},u}();N.Table=w;var o=function(){function u(d,i,r,f,v){v===void 0&&(v=!1),this.height=0,this.raw=d,d instanceof E.HtmlRowInput&&(this.raw=d._element,this.element=d._element),this.index=i,this.section=r,this.cells=f,this.spansMultiplePages=v}return u.prototype.getMaxCellHeight=function(d){var i=this;return d.reduce(function(r,f){var v;return Math.max(r,((v=i.cells[f.index])===null||v===void 0?void 0:v.height)||0)},0)},u.prototype.hasRowSpan=function(d){var i=this;return d.filter(function(r){var f=i.cells[r.index];return f?f.rowSpan>1:!1}).length>0},u.prototype.canEntireRowFit=function(d,i){return this.getMaxCellHeight(i)<=d},u.prototype.getMinimumRowHeight=function(d,i){var r=this;return d.reduce(function(f,v){var a=r.cells[v.index];if(!a)return 0;var l=i.getLineHeight(a.styles.fontSize),j=a.padding("vertical"),P=j+l;return P>f?P:f},0)},u}();N.Row=o;var I=function(){function u(d,i,r){var f,v;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=i,this.section=r,this.raw=d;var a=d;d!=null&&typeof d=="object"&&!Array.isArray(d)?(this.rowSpan=d.rowSpan||1,this.colSpan=d.colSpan||1,a=(v=(f=d.content)!==null&&f!==void 0?f:d.title)!==null&&v!==void 0?v:d,d._element&&(this.raw=d._element)):(this.rowSpan=1,this.colSpan=1);var l=a!=null?""+a:"",j=/\r\n|\r|\n/g;this.text=l.split(j)}return u.prototype.getTextPos=function(){var d;if(this.styles.valign==="top")d=this.y+this.padding("top");else if(this.styles.valign==="bottom")d=this.y+this.height-this.padding("bottom");else{var i=this.height-this.padding("vertical");d=this.y+i/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var f=this.width-this.padding("horizontal");r=this.x+f/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:d}},u.prototype.getContentHeight=function(d,i){i===void 0&&(i=1.15);var r=Array.isArray(this.text)?this.text.length:1,f=this.styles.fontSize/d*i,v=r*f+this.padding("vertical");return Math.max(v,this.styles.minCellHeight)},u.prototype.padding=function(d){var i=(0,h.parseSpacing)(this.styles.cellPadding,0);return d==="vertical"?i.top+i.bottom:d==="horizontal"?i.left+i.right:i[d]},u}();N.Cell=I;var C=function(){function u(d,i,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=d,this.raw=i,this.index=r}return u.prototype.getMaxCustomCellWidth=function(d){for(var i=0,r=0,f=d.allRows();r<f.length;r++){var v=f[r],a=v.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(i=Math.max(i,a.styles.cellWidth))}return i},u}();N.Column=C},356:function(b,N){Object.defineProperty(N,"__esModule",{value:!0}),N.assign=void 0;function m(E,S,h,w,o){if(E==null)throw new TypeError("Cannot convert undefined or null to object");for(var I=Object(E),C=1;C<arguments.length;C++){var u=arguments[C];if(u!=null)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(I[d]=u[d])}return I}N.assign=m},972:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.createTable=void 0;var E=m(744),S=m(260),h=m(324),w=m(796),o=m(356);function I(v,a){var l=new E.DocHandler(v),j=C(a,l.scaleFactor()),P=new S.Table(a,j);return(0,h.calculateWidths)(l,P),l.applyStyles(l.userStyles),P}N.createTable=I;function C(v,a){var l=v.content,j=r(l.columns);if(l.head.length===0){var P=d(j,"head");P&&l.head.push(P)}if(l.foot.length===0){var P=d(j,"foot");P&&l.foot.push(P)}var D=v.settings.theme,y=v.styles;return{columns:j,head:u("head",l.head,j,y,D,a),body:u("body",l.body,j,y,D,a),foot:u("foot",l.foot,j,y,D,a)}}function u(v,a,l,j,P,D){var y={},R=a.map(function(O,U){for(var c=0,x={},k=0,T=0,_=0,W=l;_<W.length;_++){var L=W[_];if(y[L.index]==null||y[L.index].left===0)if(T===0){var M=void 0;Array.isArray(O)?M=O[L.index-k-c]:M=O[L.dataKey];var $={};typeof M=="object"&&!Array.isArray(M)&&($=(M==null?void 0:M.styles)||{});var z=f(v,L,U,P,j,D,$),B=new S.Cell(M,z,v);x[L.dataKey]=B,x[L.index]=B,T=B.colSpan-1,y[L.index]={left:B.rowSpan-1,times:T}}else T--,k++;else y[L.index].left--,T=y[L.index].times,c++}return new S.Row(O,U,v,x)});return R}function d(v,a){var l={};return v.forEach(function(j){if(j.raw!=null){var P=i(a,j.raw);P!=null&&(l[j.dataKey]=P)}}),Object.keys(l).length>0?l:null}function i(v,a){if(v==="head"){if(typeof a=="object")return a.header||a.title||null;if(typeof a=="string"||typeof a=="number")return a}else if(v==="foot"&&typeof a=="object")return a.footer;return null}function r(v){return v.map(function(a,l){var j,P,D;return typeof a=="object"?D=(P=(j=a.dataKey)!==null&&j!==void 0?j:a.key)!==null&&P!==void 0?P:l:D=l,new S.Column(D,a,l)})}function f(v,a,l,j,P,D,y){var R=(0,w.getTheme)(j),O;v==="head"?O=P.headStyles:v==="body"?O=P.bodyStyles:v==="foot"&&(O=P.footStyles);var U=(0,o.assign)({},R.table,R[v],P.styles,O),c=P.columnStyles[a.dataKey]||P.columnStyles[a.index]||{},x=v==="body"?c:{},k=v==="body"&&l%2===0?(0,o.assign)({},R.alternateRow,P.alternateRowStyles):{},T=(0,w.defaultStyles)(D),_=(0,o.assign)({},T,U,k,x);return(0,o.assign)(_,y)}},664:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.addPage=N.drawTable=void 0;var E=m(420),S=m(260),h=m(744),w=m(356),o=m(136),I=m(224);function C(c,x){var k=x.settings,T=k.startY,_=k.margin,W={x:_.left,y:T},L=x.getHeadHeight(x.columns)+x.getFootHeight(x.columns),M=T+_.bottom+L;if(k.pageBreak==="avoid"){var $=x.body,z=$.reduce(function(Z,oe){return Z+oe.height},0);M+=z}var B=new h.DocHandler(c);(k.pageBreak==="always"||k.startY!=null&&M>B.pageSize().height)&&(U(B),W.y=_.top),x.callWillDrawPageHooks(B,W);var X=(0,w.assign)({},W);x.startPageNumber=B.pageNumber(),k.horizontalPageBreak?u(B,x,X,W):(B.applyStyles(B.userStyles),(k.showHead==="firstPage"||k.showHead==="everyPage")&&x.head.forEach(function(Z){return P(B,x,Z,W,x.columns)}),B.applyStyles(B.userStyles),x.body.forEach(function(Z,oe){var he=oe===x.body.length-1;j(B,x,Z,he,X,W,x.columns)}),B.applyStyles(B.userStyles),(k.showFoot==="lastPage"||k.showFoot==="everyPage")&&x.foot.forEach(function(Z){return P(B,x,Z,W,x.columns)})),(0,E.addTableBorder)(B,x,X,W),x.callEndPageHooks(B,W),x.finalY=W.y,c.lastAutoTable=x,c.previousAutoTable=x,c.autoTable&&(c.autoTable.previous=x),B.applyStyles(B.userStyles)}N.drawTable=C;function u(c,x,k,T){var _=(0,I.calculateAllColumnsCanFitInPage)(c,x),W=x.settings;if(W.horizontalPageBreakBehaviour==="afterAllRows")_.forEach(function(z,B){c.applyStyles(c.userStyles),B>0?O(c,x,k,T,z.columns,!0):d(c,x,T,z.columns),i(c,x,k,T,z.columns),f(c,x,T,z.columns)});else for(var L=-1,M=_[0],$=function(){var z=L;if(M){c.applyStyles(c.userStyles);var B=M.columns;L>=0?O(c,x,k,T,B,!0):d(c,x,T,B),z=r(c,x,L+1,T,B),f(c,x,T,B)}var X=z-L;_.slice(1).forEach(function(Z){c.applyStyles(c.userStyles),O(c,x,k,T,Z.columns,!0),r(c,x,L+1,T,Z.columns,X),f(c,x,T,Z.columns)}),L=z};L<x.body.length-1;)$()}function d(c,x,k,T){var _=x.settings;c.applyStyles(c.userStyles),(_.showHead==="firstPage"||_.showHead==="everyPage")&&x.head.forEach(function(W){return P(c,x,W,k,T)})}function i(c,x,k,T,_){c.applyStyles(c.userStyles),x.body.forEach(function(W,L){var M=L===x.body.length-1;j(c,x,W,M,k,T,_)})}function r(c,x,k,T,_,W){c.applyStyles(c.userStyles),W=W??x.body.length;var L=Math.min(k+W,x.body.length),M=-1;return x.body.slice(k,L).forEach(function($,z){var B=k+z===x.body.length-1,X=R(c,x,B,T);$.canEntireRowFit(X,_)&&(P(c,x,$,T,_),M=k+z)}),M}function f(c,x,k,T){var _=x.settings;c.applyStyles(c.userStyles),(_.showFoot==="lastPage"||_.showFoot==="everyPage")&&x.foot.forEach(function(W){return P(c,x,W,k,T)})}function v(c,x,k){var T=k.getLineHeight(c.styles.fontSize),_=c.padding("vertical"),W=Math.floor((x-_)/T);return Math.max(0,W)}function a(c,x,k,T){var _={};c.spansMultiplePages=!0,c.height=0;for(var W=0,L=0,M=k.columns;L<M.length;L++){var $=M[L],z=c.cells[$.index];if(z){Array.isArray(z.text)||(z.text=[z.text]);var B=new S.Cell(z.raw,z.styles,z.section);B=(0,w.assign)(B,z),B.text=[];var X=v(z,x,T);z.text.length>X&&(B.text=z.text.splice(X,z.text.length));var Z=T.scaleFactor(),oe=T.getLineHeightFactor();z.contentHeight=z.getContentHeight(Z,oe),z.contentHeight>=x&&(z.contentHeight=x,B.styles.minCellHeight-=x),z.contentHeight>c.height&&(c.height=z.contentHeight),B.contentHeight=B.getContentHeight(Z,oe),B.contentHeight>W&&(W=B.contentHeight),_[$.index]=B}}var he=new S.Row(c.raw,-1,c.section,_,!0);he.height=W;for(var He=0,et=k.columns;He<et.length;He++){var $=et[He],B=he.cells[$.index];B&&(B.height=he.height);var z=c.cells[$.index];z&&(z.height=c.height)}return he}function l(c,x,k,T){var _=c.pageSize().height,W=T.settings.margin,L=W.top+W.bottom,M=_-L;x.section==="body"&&(M-=T.getHeadHeight(T.columns)+T.getFootHeight(T.columns));var $=x.getMinimumRowHeight(T.columns,c),z=$<k;if($>M)return console.error("Will not be able to print row ".concat(x.index," correctly since it's minimum height is larger than page height")),!0;if(!z)return!1;var B=x.hasRowSpan(T.columns),X=x.getMaxCellHeight(T.columns)>M;return X?(B&&console.error("The content of row ".concat(x.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(B||T.settings.rowPageBreak==="avoid")}function j(c,x,k,T,_,W,L){var M=R(c,x,T,W);if(k.canEntireRowFit(M,L))P(c,x,k,W,L);else if(l(c,k,M,x)){var $=a(k,M,x,c);P(c,x,k,W,L),O(c,x,_,W,L),j(c,x,$,T,_,W,L)}else O(c,x,_,W,L),j(c,x,k,T,_,W,L)}function P(c,x,k,T,_){T.x=x.settings.margin.left;for(var W=0,L=_;W<L.length;W++){var M=L[W],$=k.cells[M.index];if(!$){T.x+=M.width;continue}c.applyStyles($.styles),$.x=T.x,$.y=T.y;var z=x.callCellHooks(c,x.hooks.willDrawCell,$,k,M,T);if(z===!1){T.x+=M.width;continue}D(c,$,T);var B=$.getTextPos();(0,o.default)($.text,B.x,B.y,{halign:$.styles.halign,valign:$.styles.valign,maxWidth:Math.ceil($.width-$.padding("left")-$.padding("right"))},c.getDocument()),x.callCellHooks(c,x.hooks.didDrawCell,$,k,M,T),T.x+=M.width}T.y+=k.height}function D(c,x,k){var T=x.styles;if(c.getDocument().setFillColor(c.getDocument().getFillColor()),typeof T.lineWidth=="number"){var _=(0,E.getFillStyle)(T.lineWidth,T.fillColor);_&&c.rect(x.x,k.y,x.width,x.height,_)}else typeof T.lineWidth=="object"&&(T.fillColor&&c.rect(x.x,k.y,x.width,x.height,"F"),y(c,x,k,T.lineWidth))}function y(c,x,k,T){var _,W,L,M;T.top&&(_=k.x,W=k.y,L=k.x+x.width,M=k.y,T.right&&(L+=.5*T.right),T.left&&(_-=.5*T.left),$(T.top,_,W,L,M)),T.bottom&&(_=k.x,W=k.y+x.height,L=k.x+x.width,M=k.y+x.height,T.right&&(L+=.5*T.right),T.left&&(_-=.5*T.left),$(T.bottom,_,W,L,M)),T.left&&(_=k.x,W=k.y,L=k.x,M=k.y+x.height,T.top&&(W-=.5*T.top),T.bottom&&(M+=.5*T.bottom),$(T.left,_,W,L,M)),T.right&&(_=k.x+x.width,W=k.y,L=k.x+x.width,M=k.y+x.height,T.top&&(W-=.5*T.top),T.bottom&&(M+=.5*T.bottom),$(T.right,_,W,L,M));function $(z,B,X,Z,oe){c.getDocument().setLineWidth(z),c.getDocument().line(B,X,Z,oe,"S")}}function R(c,x,k,T){var _=x.settings.margin.bottom,W=x.settings.showFoot;return(W==="everyPage"||W==="lastPage"&&k)&&(_+=x.getFootHeight(x.columns)),c.pageSize().height-T.y-_}function O(c,x,k,T,_,W){_===void 0&&(_=[]),W===void 0&&(W=!1),c.applyStyles(c.userStyles),x.settings.showFoot==="everyPage"&&!W&&x.foot.forEach(function(M){return P(c,x,M,T,_)}),x.callEndPageHooks(c,T);var L=x.settings.margin;(0,E.addTableBorder)(c,x,k,T),U(c),x.pageNumber++,x.pageCount++,T.x=L.left,T.y=L.top,k.y=L.top,x.callWillDrawPageHooks(c,T),x.settings.showHead==="everyPage"&&(x.head.forEach(function(M){return P(c,x,M,T,_)}),c.applyStyles(c.userStyles))}N.addPage=O;function U(c){var x=c.pageNumber();c.setPage(x+1);var k=c.pageNumber();return k===x?(c.addPage(),!0):!1}},224:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.calculateAllColumnsCanFitInPage=void 0;var E=m(420);function S(w,o,I){var C;I===void 0&&(I={});var u=(0,E.getPageAvailableWidth)(w,o),d=new Map,i=[],r=[],f=[];o.settings.horizontalPageBreakRepeat,Array.isArray(o.settings.horizontalPageBreakRepeat)?f=o.settings.horizontalPageBreakRepeat:(typeof o.settings.horizontalPageBreakRepeat=="string"||typeof o.settings.horizontalPageBreakRepeat=="number")&&(f=[o.settings.horizontalPageBreakRepeat]),f.forEach(function(j){var P=o.columns.find(function(D){return D.dataKey===j||D.index===j});P&&!d.has(P.index)&&(d.set(P.index,!0),i.push(P.index),r.push(o.columns[P.index]),u-=P.wrappedWidth)});for(var v=!0,a=(C=I==null?void 0:I.start)!==null&&C!==void 0?C:0;a<o.columns.length;){if(d.has(a)){a++;continue}var l=o.columns[a].wrappedWidth;if(v||u>=l)v=!1,i.push(a),r.push(o.columns[a]),u-=l;else break;a++}return{colIndexes:i,columns:r,lastIndex:a-1}}function h(w,o){for(var I=[],C=0;C<o.columns.length;C++){var u=S(w,o,{start:C});u.columns.length&&(I.push(u),C=u.lastIndex)}return I}N.calculateAllColumnsCanFitInPage=h},324:function(b,N,m){Object.defineProperty(N,"__esModule",{value:!0}),N.ellipsize=N.resizeColumns=N.calculateWidths=void 0;var E=m(420);function S(i,r){h(i,r);var f=[],v=0;r.columns.forEach(function(l){var j=l.getMaxCustomCellWidth(r);j?l.width=j:(l.width=l.wrappedWidth,f.push(l)),v+=l.width});var a=r.getWidth(i.pageSize().width)-v;a&&(a=w(f,a,function(l){return Math.max(l.minReadableWidth,l.minWidth)})),a&&(a=w(f,a,function(l){return l.minWidth})),a=Math.abs(a),!r.settings.horizontalPageBreak&&a>.1/i.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),I(r),C(r,i),o(r)}N.calculateWidths=S;function h(i,r){var f=i.scaleFactor(),v=r.settings.horizontalPageBreak,a=(0,E.getPageAvailableWidth)(i,r);r.allRows().forEach(function(l){for(var j=0,P=r.columns;j<P.length;j++){var D=P[j],y=l.cells[D.index];if(y){var R=r.hooks.didParseCell;r.callCellHooks(i,R,y,l,D,null);var O=y.padding("horizontal");y.contentWidth=(0,E.getStringWidth)(y.text,y.styles,i)+O;var U=(0,E.getStringWidth)(y.text.join(" ").split(/[^\S\u00A0]+/),y.styles,i);if(y.minReadableWidth=U+y.padding("horizontal"),typeof y.styles.cellWidth=="number")y.minWidth=y.styles.cellWidth,y.wrappedWidth=y.styles.cellWidth;else if(y.styles.cellWidth==="wrap"||v===!0)y.contentWidth>a?(y.minWidth=a,y.wrappedWidth=a):(y.minWidth=y.contentWidth,y.wrappedWidth=y.contentWidth);else{var c=10/f;y.minWidth=y.styles.minCellWidth||c,y.wrappedWidth=y.contentWidth,y.minWidth>y.wrappedWidth&&(y.wrappedWidth=y.minWidth)}}}}),r.allRows().forEach(function(l){for(var j=0,P=r.columns;j<P.length;j++){var D=P[j],y=l.cells[D.index];if(y&&y.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,y.wrappedWidth),D.minWidth=Math.max(D.minWidth,y.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,y.minReadableWidth);else{var R=r.styles.columnStyles[D.dataKey]||r.styles.columnStyles[D.index]||{},O=R.cellWidth||R.minCellWidth;O&&typeof O=="number"&&(D.minWidth=O,D.wrappedWidth=O)}y&&(y.colSpan>1&&!D.minWidth&&(D.minWidth=y.minWidth),y.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=y.minWidth))}})}function w(i,r,f){for(var v=r,a=i.reduce(function(c,x){return c+x.wrappedWidth},0),l=0;l<i.length;l++){var j=i[l],P=j.wrappedWidth/a,D=v*P,y=j.width+D,R=f(j),O=y<R?R:y;r-=O-j.width,j.width=O}if(r=Math.round(r*1e10)/1e10,r){var U=i.filter(function(c){return r<0?c.width>f(c):!0});U.length&&(r=w(U,r,f))}return r}N.resizeColumns=w;function o(i){for(var r={},f=1,v=i.allRows(),a=0;a<v.length;a++)for(var l=v[a],j=0,P=i.columns;j<P.length;j++){var D=P[j],y=r[D.index];if(f>1)f--,delete l.cells[D.index];else if(y)y.cell.height+=l.height,f=y.cell.colSpan,delete l.cells[D.index],y.left--,y.left<=1&&delete r[D.index];else{var R=l.cells[D.index];if(!R)continue;if(R.height=l.height,R.rowSpan>1){var O=v.length-a,U=R.rowSpan>O?O:R.rowSpan;r[D.index]={cell:R,left:U,row:l}}}}}function I(i){for(var r=i.allRows(),f=0;f<r.length;f++)for(var v=r[f],a=null,l=0,j=0,P=0;P<i.columns.length;P++){var D=i.columns[P];if(j-=1,j>1&&i.columns[P+1])l+=D.width,delete v.cells[D.index];else if(a){var y=a;delete v.cells[D.index],a=null,y.width=D.width+l}else{var y=v.cells[D.index];if(!y)continue;if(j=y.colSpan,l=0,y.colSpan>1){a=y,l+=D.width;continue}y.width=D.width+l}}}function C(i,r){for(var f={count:0,height:0},v=0,a=i.allRows();v<a.length;v++){for(var l=a[v],j=0,P=i.columns;j<P.length;j++){var D=P[j],y=l.cells[D.index];if(y){r.applyStyles(y.styles,!0);var R=y.width-y.padding("horizontal");if(y.styles.overflow==="linebreak")y.text=r.splitTextToSize(y.text,R+1/r.scaleFactor(),{fontSize:y.styles.fontSize});else if(y.styles.overflow==="ellipsize")y.text=u(y.text,R,y.styles,r,"...");else if(y.styles.overflow==="hidden")y.text=u(y.text,R,y.styles,r,"");else if(typeof y.styles.overflow=="function"){var O=y.styles.overflow(y.text,R);typeof O=="string"?y.text=[O]:y.text=O}y.contentHeight=y.getContentHeight(r.scaleFactor(),r.getLineHeightFactor());var U=y.contentHeight/y.rowSpan;y.rowSpan>1&&f.count*f.height<U*y.rowSpan?f={height:U,count:y.rowSpan}:f&&f.count>0&&f.height>U&&(U=f.height),U>l.height&&(l.height=U)}}f.count--}}function u(i,r,f,v,a){return i.map(function(l){return d(l,r,f,v,a)})}N.ellipsize=u;function d(i,r,f,v,a){var l=1e4*v.scaleFactor();if(r=Math.ceil(r*l)/l,r>=(0,E.getStringWidth)(i,f,v))return i;for(;r<(0,E.getStringWidth)(i+a,f,v)&&!(i.length<=1);)i=i.substring(0,i.length-1);return i.trim()+a}},964:function(b){if(typeof g>"u"){var N=new Error("Cannot find module 'undefined'");throw N.code="MODULE_NOT_FOUND",N}b.exports=g}},p={};function A(b){var N=p[b];if(N!==void 0)return N.exports;var m=p[b]={exports:{}};return n[b].call(m.exports,m,m.exports,A),m.exports}var H={};return function(){var b=H;Object.defineProperty(b,"__esModule",{value:!0}),b.Cell=b.Column=b.Row=b.Table=b.CellHookData=b.__drawTable=b.__createTable=b.applyPlugin=void 0;var N=A(340),m=A(776),E=A(664),S=A(972),h=A(260);Object.defineProperty(b,"Table",{enumerable:!0,get:function(){return h.Table}});var w=A(172);Object.defineProperty(b,"CellHookData",{enumerable:!0,get:function(){return w.CellHookData}});var o=A(260);Object.defineProperty(b,"Cell",{enumerable:!0,get:function(){return o.Cell}}),Object.defineProperty(b,"Column",{enumerable:!0,get:function(){return o.Column}}),Object.defineProperty(b,"Row",{enumerable:!0,get:function(){return o.Row}});function I(r){(0,N.default)(r)}b.applyPlugin=I;function C(r,f){var v=(0,m.parseInput)(r,f),a=(0,S.createTable)(r,v);(0,E.drawTable)(r,a)}function u(r,f){var v=(0,m.parseInput)(r,f);return(0,S.createTable)(r,v)}b.__createTable=u;function d(r,f){(0,E.drawTable)(r,f)}b.__drawTable=d;try{var i=A(964);i.jsPDF&&(i=i.jsPDF),I(i)}catch{}b.default=C}(),H}()})})(js);const ue=(t,s="Rs.")=>{const g=parseFloat(String(t))||0;return`${s==="₹"?"Rs.":s} ${g.toFixed(2)}`},Ze=(t,s,g={})=>{const n=new zt,p=n.internal.pageSize.getWidth(),A=20,H=p-2*A;let b=20;const N=g.taxLabel||"Tax",m=de(t.items,t.taxRate,t.discount),E=s.currency||"Rs.";n.setFontSize(16),n.setFont("helvetica","bold"),n.text(s.name||"Business Name",A,b),n.setFontSize(12),n.text("INVOICE",p-A,b,{align:"right"}),b+=7,n.setFontSize(10),n.setFont("helvetica","normal"),n.text(t.invoiceNumber,p-A,b,{align:"right"}),b=30,n.setFontSize(9);const S=[];s.address&&S.push(s.address),(s.city||s.state)&&S.push(`${s.city||""}${s.city&&s.state?", ":""}${s.state||""} ${s.pincode||""}`.trim()),s.phone&&S.push(`Phone: ${s.phone}`),s.email&&S.push(`Email: ${s.email}`),s.taxId&&S.push(`${N} ID: ${s.taxId}`),S.forEach(i=>{n.text(i,A,b),b+=4}),b+=5,n.setLineWidth(.5),n.line(A,b,p-A,b),b+=10,n.setFont("helvetica","bold"),n.text("Bill To:",A,b),n.text("Invoice Details:",p/2+10,b),b+=6,n.setFont("helvetica","normal");const h=b;n.text(t.customerName||"Customer",A,h);let w=h+4;if(t.customerAddress){const i=n.splitTextToSize(t.customerAddress,H/2-20);n.text(i,A,w),w+=i.length*4}t.customerPhone&&(n.text(`Phone: ${t.customerPhone}`,A,w),w+=4),t.customerEmail&&n.text(`Email: ${t.customerEmail}`,A,w);const o=p/2+10;n.text(`Date: ${pe(t.date)}`,o,h),b=Math.max(w,h+12)+10;const I=t.items.map((i,r)=>[(r+1).toString(),i.name,i.quantity.toString(),ue(i.price,E),ue(i.quantity*i.price,E)]);n.autoTable({startY:b,head:[["#","Description","Qty","Rate","Amount"]],body:I,margin:{left:A,right:A},tableWidth:H,styles:{fontSize:9,cellPadding:4,lineColor:[0,0,0],lineWidth:.1,textColor:[0,0,0]},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.3},bodyStyles:{fillColor:[255,255,255]},columnStyles:{0:{cellWidth:12,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:20,halign:"center"},3:{cellWidth:30,halign:"right"},4:{cellWidth:35,halign:"right"}}}),b=n.lastAutoTable.finalY+10;const C=p-A-80,u=p-A;if(n.setFontSize(9),n.text("Subtotal:",C,b),n.text(ue(m.subtotal,E),u,b,{align:"right"}),t.discount>0&&(b+=6,n.text(`Discount (${t.discount}%):`,C,b),n.text(`-${ue(m.discountAmount,E)}`,u,b,{align:"right"})),t.taxRate>0&&(b+=6,n.text(`${N} (${t.taxRate}%):`,C,b),n.text(ue(m.taxAmount,E),u,b,{align:"right"})),b+=4,n.setLineWidth(.3),n.line(C-5,b,u,b),b+=6,n.setFont("helvetica","bold"),n.setFontSize(11),n.text("TOTAL:",C,b),n.text(ue(m.total,E),u,b,{align:"right"}),b+=15,n.setFont("helvetica","normal"),n.setFontSize(9),n.text("Amount in Words:",A,b),b+=5,n.setFont("helvetica","bold"),n.text(`${me(Math.floor(m.total))} Only`,A,b),t.notes){b+=12,n.setFont("helvetica","normal"),n.setFontSize(9),n.text("Notes:",A,b),b+=5;const i=n.splitTextToSize(t.notes,H);n.text(i,A,b)}const d=n.internal.pageSize.getHeight()-20;return n.setLineWidth(.3),n.line(A,d-5,p-A,d-5),n.setFont("helvetica","normal"),n.setFontSize(8),n.text("Thank you for your business!",p/2,d,{align:"center"}),n},Ae=(t,s,g)=>{Ze(t,s,g).save(`${t.invoiceNumber}.pdf`)},Ns=(t,s,g)=>Ze(t,s,g).output("blob"),ws=(t,s,g)=>{const p=Ze(t,s,g).output("blob"),A=URL.createObjectURL(p);window.open(A,"_blank")};function Ss(){const{lastSyncTime:t}=je(),s=re.get(),g=le.get(),[n,p]=F.useState(()=>K.getAll());F.useEffect(()=>{p(K.getAll())},[t]);const[A,H]=F.useState(""),[b,N]=F.useState("all"),[m,E]=F.useState("date"),[S,h]=F.useState("desc"),[w,o]=F.useState(null),[I,C]=F.useState(null),u=F.useMemo(()=>{let a=[...n];if(A){const l=A.toLowerCase();a=a.filter(j=>{var P,D,y,R;return((P=j.customerName)==null?void 0:P.toLowerCase().includes(l))||((D=j.invoiceNumber)==null?void 0:D.toLowerCase().includes(l))||((y=j.customerEmail)==null?void 0:y.toLowerCase().includes(l))||((R=j.customerPhone)==null?void 0:R.includes(l))})}return b!=="all"&&(a=a.filter(l=>l.status===b)),a.sort((l,j)=>{var y,R;let P,D;if(m==="date")P=new Date(l.createdAt||l.date).getTime(),D=new Date(j.createdAt||j.date).getTime();else if(m==="amount"){const O=de(l.items,l.taxRate,l.discount),U=de(j.items,j.taxRate,j.discount);P=O.total,D=U.total}else m==="customer"?(P=((y=l.customerName)==null?void 0:y.toLowerCase())||"",D=((R=j.customerName)==null?void 0:R.toLowerCase())||""):(P=l.invoiceNumber,D=j.invoiceNumber);return S==="asc"?P>D?1:-1:P<D?1:-1}),a},[n,A,b,m,S]),d=F.useMemo(()=>({total:n.length,draft:n.filter(a=>a.status==="draft").length,pending:n.filter(a=>a.status==="pending").length,paid:n.filter(a=>a.status==="paid").length,overdue:n.filter(a=>a.status==="overdue").length}),[n]),i=a=>{K.delete(a),p(K.getAll()),C(null),o(null)},r=a=>{Ae(a,s,g),o(null)},f=a=>{m===a?h(S==="asc"?"desc":"asc"):(E(a),h("desc"))},v=a=>{H(a.target.value)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Invoices"}),e.jsxs("p",{className:"text-midnight-400",children:[u.length," of ",n.length," invoices"]})]}),e.jsxs(G,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All",count:d.total},{key:"draft",label:"Draft",count:d.draft},{key:"pending",label:"Pending",count:d.pending},{key:"paid",label:"Paid",count:d.paid},{key:"overdue",label:"Overdue",count:d.overdue}].map(a=>e.jsxs("button",{onClick:()=>N(a.key),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${b===a.key?"bg-teal-500/20 text-teal-400":"bg-midnight-700/50 text-midnight-300 hover:bg-midnight-700"}`,children:[a.label,e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-midnight-800",children:a.count})]},a.key))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Je,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices...",value:A,onChange:v,className:"input-field pl-12"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>f("date"),className:`btn-secondary flex items-center gap-2 ${m==="date"?"border-teal-500":""}`,children:[e.jsx(Yt,{className:"w-4 h-4"}),"Date",m==="date"&&(S==="asc"?e.jsx(it,{className:"w-4 h-4"}):e.jsx(rt,{className:"w-4 h-4"}))]}),e.jsxs("button",{onClick:()=>f("amount"),className:`btn-secondary flex items-center gap-2 ${m==="amount"?"border-teal-500":""}`,children:[e.jsx(Cs,{className:"w-4 h-4"}),"Amount",m==="amount"&&(S==="asc"?e.jsx(it,{className:"w-4 h-4"}):e.jsx(rt,{className:"w-4 h-4"}))]})]})]}),u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ge,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:A||b!=="all"?"Try adjusting your search or filters":"Create your first invoice to get started"}),!A&&b==="all"&&e.jsxs(G,{to:"/invoices/new",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Create Invoice"]})]}):e.jsx("div",{className:"space-y-3",children:u.map(a=>{const l=de(a.items,a.taxRate,a.discount);return e.jsx("div",{className:"glass rounded-xl p-4 sm:p-6 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(G,{to:`/invoices/view/${a.id}`,className:"text-lg font-semibold text-white hover:text-teal-400 transition-colors truncate",children:a.customerName}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Ke(a.status)}`,children:Xe(a.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-midnight-400",children:[e.jsx("span",{className:"font-mono",children:a.invoiceNumber}),e.jsx("span",{children:"•"}),e.jsx("span",{children:pe(a.date)}),a.items.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[a.items.length," item",a.items.length>1?"s":""]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:V(l.total,s.currency)})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(w===a.id?null:a.id),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx($t,{className:"w-5 h-5 text-midnight-400"})}),w===a.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(null)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:[e.jsxs(G,{to:`/invoices/view/${a.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>o(null),children:[e.jsx(jt,{className:"w-4 h-4 text-midnight-400"}),"View Invoice"]}),e.jsxs(G,{to:`/invoices/edit/${a.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>o(null),children:[e.jsx(we,{className:"w-4 h-4 text-midnight-400"}),"Edit Invoice"]}),e.jsxs("button",{onClick:()=>r(a),className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors w-full",children:[e.jsx(Ve,{className:"w-4 h-4 text-midnight-400"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>{C(a.id),o(null)},className:"flex items-center gap-3 px-4 py-3 text-coral-400 hover:bg-coral-500/10 transition-colors w-full",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Delete"]})]})]})]})]})]})},a.id)})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Invoice?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>C(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>i(I),className:"btn-danger",children:"Delete"})]})]})})]})}function Cs(t){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),e.jsx("path",{d:"M12 18V6"})]})}function ut(){const t=Se(),{id:s}=ft(),g=!!s,n=re.get(),p=le.get(),[A,H]=F.useState([]),[b,N]=F.useState([]);F.useEffect(()=>{H(te.getAll()),N(ae.getAll())},[]);const[m,E]=F.useState({id:ne(),invoiceNumber:K.getNextInvoiceNumber(),date:pe(new Date,"input"),customerName:"",customerEmail:"",customerPhone:"",customerAddress:"",items:[{id:ne(),name:"",quantity:1,price:0}],taxRate:n.taxRate||p.taxRate||0,discount:0,notes:"",status:"draft"}),[S,h]=F.useState(!1),[w,o]=F.useState(null),[I,C]=F.useState(""),[u,d]=F.useState(""),[i,r]=F.useState({});F.useEffect(()=>{if(g&&s){const c=K.getById(s);c?E({...c,date:pe(c.date,"input")}):t("/invoices")}},[s,g,t]);const f=F.useMemo(()=>de(m.items,m.taxRate,m.discount),[m.items,m.taxRate,m.discount]),v=F.useMemo(()=>I?A.filter(c=>{var x;return c.name.toLowerCase().includes(I.toLowerCase())||((x=c.phone)==null?void 0:x.includes(I))}).slice(0,5):A.slice(0,5),[A,I]),a=F.useMemo(()=>u?b.filter(c=>c.name.toLowerCase().includes(u.toLowerCase())).slice(0,5):b.slice(0,5),[b,u]),l=c=>{const{name:x,value:k}=c.target;E(T=>({...T,[x]:k})),i[x]&&r(T=>({...T,[x]:null}))},j=(c,x,k)=>{E(T=>({...T,items:T.items.map(_=>_.id===c?{..._,[x]:k}:_)}))},P=()=>{E(c=>({...c,items:[...c.items,{id:ne(),name:"",quantity:1,price:0}]}))},D=c=>{m.items.length>1&&E(x=>({...x,items:x.items.filter(k=>k.id!==c)}))},y=c=>{E(x=>({...x,customerName:c.name,customerEmail:c.email||"",customerPhone:c.phone||"",customerAddress:c.address||""})),h(!1),C("")},R=(c,x)=>{E(k=>({...k,items:k.items.map(T=>T.id===x?{...T,name:c.name,price:c.price}:T)})),o(null),d("")},O=()=>{const c={};return m.customerName.trim()||(c.customerName="Customer name is required"),m.items.some(x=>!x.name.trim())&&(c.items="All items must have a name"),m.items.some(x=>x.quantity<=0)&&(c.items="Quantity must be greater than 0"),r(c),Object.keys(c).length===0},U=(c="draft")=>{if(!O())return;const x={...m,status:c,date:new Date(m.date).toISOString()};K.save(x),m.customerName&&!A.find(k=>k.name===m.customerName)&&te.save({id:ne(),name:m.customerName,email:m.customerEmail,phone:m.customerPhone,address:m.customerAddress}),t(`/invoices/view/${m.id}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2.5 -ml-1 rounded-lg hover:bg-midnight-700 active:bg-midnight-600 transition-colors",children:e.jsx(Ie,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-display font-bold text-white truncate",children:g?"Edit Invoice":"Create Invoice"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:m.invoiceNumber})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:()=>U("draft"),className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Draft"})]}),e.jsxs("button",{onClick:()=>U("pending"),className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Save & Preview"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Be,{className:"w-5 h-5 text-teal-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Customer Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"customerName",value:m.customerName,onChange:c=>{l(c),C(c.target.value),h(!0)},onFocus:()=>h(!0),className:`input-field ${i.customerName?"border-coral-500":""}`,placeholder:"Enter customer name"}),S&&v.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:v.map(c=>e.jsxs("button",{type:"button",onClick:()=>y(c),className:"w-full px-4 py-3 text-left hover:bg-midnight-700 transition-colors",children:[e.jsx("p",{className:"text-white font-medium",children:c.name}),c.phone&&e.jsx("p",{className:"text-midnight-400 text-sm",children:c.phone})]},c.id))})]})]}),i.customerName&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:i.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone"}),e.jsx("input",{type:"tel",name:"customerPhone",value:m.customerPhone,onChange:l,className:"input-field",placeholder:"Phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email"}),e.jsx("input",{type:"email",name:"customerEmail",value:m.customerEmail,onChange:l,className:"input-field",placeholder:"Email address"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"customerAddress",value:m.customerAddress,onChange:l,className:"input-field min-h-[60px] resize-none",placeholder:"Customer address"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Items"}),e.jsxs("button",{type:"button",onClick:P,className:"text-teal-400 hover:text-teal-300 flex items-center gap-1 text-sm",children:[e.jsx(ie,{className:"w-4 h-4"}),"Add Item"]})]}),i.items&&e.jsx("p",{className:"text-coral-400 text-sm mb-4",children:i.items}),e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-12 gap-2 pb-2 border-b border-midnight-600 mb-2",children:[e.jsx("div",{className:"col-span-1 text-midnight-400 text-xs font-medium",children:"#"}),e.jsx("div",{className:"col-span-5 text-midnight-400 text-xs font-medium",children:"Item Name"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-center",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Price"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Amount"})]}),e.jsx("div",{className:"space-y-2",children:m.items.map((c,x)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 py-2 border-b border-midnight-700/50 items-center",children:[e.jsx("div",{className:"hidden sm:flex col-span-1 text-midnight-400 text-sm items-center",children:x+1}),e.jsxs("div",{className:"sm:col-span-5 relative",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Item Name"}),e.jsx("input",{type:"text",value:c.name,onChange:k=>{j(c.id,"name",k.target.value),d(k.target.value),o(c.id)},onFocus:()=>o(c.id),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all",placeholder:"Enter item name"}),w===c.id&&a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(null)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:a.map(k=>e.jsxs("button",{type:"button",onClick:()=>R(k,c.id),className:"w-full px-4 py-2 text-left hover:bg-midnight-700 transition-colors flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:k.name}),e.jsx("span",{className:"text-teal-400 font-mono text-sm",children:V(k.price,n.currency)})]},k.id))})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:c.quantity,onChange:k=>j(c.id,"quantity",parseInt(k.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-center focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Price"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:c.price,onChange:k=>j(c.id,"price",parseFloat(k.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-right focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all font-mono"})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center justify-between sm:justify-end gap-2",children:[e.jsx("div",{className:"sm:hidden text-midnight-400 text-xs",children:"Amount:"}),e.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:V(c.quantity*c.price,n.currency)}),m.items.length>1&&e.jsx("button",{type:"button",onClick:()=>D(c.id),className:"p-1.5 text-coral-400 hover:bg-coral-500/20 rounded-lg transition-colors ml-2",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]},c.id))}),e.jsxs("button",{type:"button",onClick:P,className:"mt-4 w-full py-2.5 border-2 border-dashed border-midnight-600 rounded-xl text-midnight-400 hover:text-teal-400 hover:border-teal-500/50 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(ie,{className:"w-4 h-4"}),"Add Item"]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("label",{className:"input-label",children:"Notes"}),e.jsx("textarea",{name:"notes",value:m.notes,onChange:l,className:"input-field min-h-[80px] resize-none",placeholder:"Add any notes..."})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-2xl p-6 sticky top-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Number"}),e.jsx("input",{type:"text",name:"invoiceNumber",value:m.invoiceNumber,onChange:l,className:"input-field font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Date"}),e.jsx("input",{type:"date",name:"date",value:m.date,onChange:l,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"input-label",children:[p.taxLabel||"Tax"," Rate (%)"]}),e.jsx("input",{type:"number",min:"0",max:"100",name:"taxRate",value:m.taxRate,onChange:l,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Discount (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",name:"discount",value:m.discount,onChange:l,className:"input-field"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-midnight-600 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:V(f.subtotal,n.currency)})]}),m.discount>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:["Discount (",m.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-coral-400",children:["-",V(f.discountAmount,n.currency)]})]}),m.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:[p.taxLabel||"Tax"," (",m.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:V(f.taxAmount,n.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t border-midnight-600",children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-400",children:V(f.total,n.currency)})]})]})]})})]})]})}function Ps(){const t=Se(),{id:s}=ft(),g=F.useRef(null),[n,p]=F.useState(null),[A,H]=F.useState(!1),[b,N]=F.useState(!1),m=re.get(),E=le.get();if(F.useEffect(()=>{if(s){const u=K.getById(s);u?p(u):t("/invoices")}},[s,t]),!n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-teal-500 border-t-transparent rounded-full"})});const S=de(n.items,n.taxRate,n.discount),h=()=>{Ae(n,m,E)},w=()=>{ws(n,m,E)},o=u=>{const d={...n,status:u};K.save(d),p(d),H(!1)},I=async()=>{N(!0);try{const u=Ns(n,m,E),d=new File([u],`${n.invoiceNumber}.pdf`,{type:"application/pdf"});navigator.share&&navigator.canShare({files:[d]})?await navigator.share({title:`Invoice ${n.invoiceNumber}`,text:`Invoice for ${n.customerName} - ${V(S.total,m.currency)}`,files:[d]}):Ae(n,m,E)}catch(u){u.name!=="AbortError"&&(console.error("Error sharing:",u),Ae(n,m,E))}N(!1)},C=[{value:"draft",label:"Draft",icon:we,color:"text-midnight-400"},{value:"pending",label:"Pending",icon:yt,color:"text-gold-400"},{value:"paid",label:"Paid",icon:ce,color:"text-teal-400"},{value:"overdue",label:"Overdue",icon:ve,color:"text-coral-400"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/invoices"),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx(Ie,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:n.invoiceNumber}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>H(!A),className:`px-3 py-1 rounded-full text-sm font-medium ${Ke(n.status)} hover:opacity-80 transition-opacity`,children:Xe(n.status)}),A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>H(!1)}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-40 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:C.map(u=>{const d=u.icon;return e.jsxs("button",{onClick:()=>o(u.value),className:`flex items-center gap-3 px-4 py-3 w-full hover:bg-midnight-700 transition-colors ${n.status===u.value?"bg-midnight-700":""}`,children:[e.jsx(d,{className:`w-4 h-4 ${u.color}`}),e.jsx("span",{className:"text-white",children:u.label}),n.status===u.value&&e.jsx(Ue,{className:"w-4 h-4 text-teal-400 ml-auto"})]},u.value)})})]})]})]}),e.jsx("p",{className:"text-midnight-400",children:n.customerName})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs(G,{to:`/invoices/edit/${n.id}`,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs("button",{onClick:h,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Download"})]}),e.jsxs("button",{onClick:w,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Print"})]}),e.jsxs("button",{onClick:I,disabled:b,className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none disabled:opacity-50",children:[e.jsx(Jt,{className:`w-4 h-4 ${b?"animate-pulse":""}`}),b?"Sharing...":"Share PDF"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",ref:g,children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-bold",children:m.name||"Your Business Name"}),m.address&&e.jsx("p",{className:"text-teal-100 mt-1 text-sm",children:m.address}),m.city&&e.jsxs("p",{className:"text-teal-100 text-sm",children:[m.city,m.state&&`, ${m.state}`,m.pincode&&` - ${m.pincode}`]}),m.phone&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Phone: ",m.phone]}),m.email&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Email: ",m.email]}),m.taxId&&e.jsxs("p",{className:"text-teal-100 text-sm font-mono",children:[E.taxLabel||"Tax"," ID: ",m.taxId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-teal-200 text-sm uppercase tracking-wide",children:"Invoice"}),e.jsx("p",{className:"text-xl font-mono font-bold mt-1",children:n.invoiceNumber}),e.jsxs("p",{className:"text-teal-100 text-sm mt-2",children:["Date: ",pe(n.date)]})]})]})}),e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Bill To"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:n.customerName}),n.customerAddress&&e.jsx("p",{className:"text-gray-600 text-sm",children:n.customerAddress}),n.customerPhone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Phone: ",n.customerPhone]}),n.customerEmail&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Email: ",n.customerEmail]})]}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs w-12",children:"#"}),e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs",children:"Item"}),e.jsx("th",{className:"text-center py-3 text-gray-500 font-medium text-xs w-20",children:"Qty"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Price"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Amount"})]})}),e.jsx("tbody",{children:n.items.map((u,d)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-4 text-gray-400 text-sm",children:d+1}),e.jsx("td",{className:"py-4 text-gray-900 font-medium",children:u.name}),e.jsx("td",{className:"py-4 text-gray-600 text-center",children:u.quantity}),e.jsx("td",{className:"py-4 text-gray-600 text-right font-mono text-sm",children:V(u.price,m.currency)}),e.jsx("td",{className:"py-4 text-gray-900 text-right font-mono font-medium",children:V(u.quantity*u.price,m.currency)})]},u.id))})]})}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-full sm:w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:V(S.subtotal,m.currency)})]}),n.discount>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Discount (",n.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-red-500",children:["-",V(S.discountAmount,m.currency)]})]}),n.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:[E.taxLabel||"Tax"," (",n.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:V(S.taxAmount,m.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t-2 border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-600",children:V(S.total,m.currency)})]})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide",children:"Amount in Words"}),e.jsxs("p",{className:"text-gray-700 font-medium",children:[me(Math.floor(S.total))," Only"]})]})]}),n.notes&&e.jsxs("div",{className:"px-8 py-6 border-t border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:n.notes})]}),e.jsx("div",{className:"px-8 py-6 bg-gray-50 text-center border-t border-gray-100",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Thank you for your business!"})})]})]})}const Ds=["piece","kg","g","liter","ml","dozen","box","pack","unit","hour","service"];function Ts(){const{lastSyncTime:t}=je(),s=re.get(),[g,n]=F.useState(()=>ae.getAll());F.useEffect(()=>{n(ae.getAll())},[t]);const[p,A]=F.useState(""),[H,b]=F.useState(!1),[N,m]=F.useState(null),[E,S]=F.useState(null),[h,w]=F.useState({name:"",description:"",price:"",unit:"piece"}),[o,I]=F.useState({}),C=g.filter(a=>{var l;return a.name.toLowerCase().includes(p.toLowerCase())||((l=a.description)==null?void 0:l.toLowerCase().includes(p.toLowerCase()))}),u=(a=null)=>{a?(m(a),w({name:a.name,description:a.description||"",price:a.price.toString(),unit:a.unit||"piece"})):(m(null),w({name:"",description:"",price:"",unit:"piece"})),I({}),b(!0)},d=()=>{b(!1),m(null),w({name:"",description:"",price:"",unit:"piece"}),I({})},i=a=>{const{name:l,value:j}=a.target;w(P=>({...P,[l]:j})),o[l]&&I(P=>({...P,[l]:null}))},r=()=>{const a={};return h.name.trim()||(a.name="Product name is required"),(!h.price||parseFloat(h.price)<0)&&(a.price="Valid price is required"),I(a),Object.keys(a).length===0},f=()=>{if(!r())return;const a={id:(N==null?void 0:N.id)||ne(),name:h.name.trim(),description:h.description.trim(),price:parseFloat(h.price),unit:h.unit};ae.save(a),n(ae.getAll()),d()},v=a=>{ae.delete(a),n(ae.getAll()),S(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Products & Services"}),e.jsxs("p",{className:"text-midnight-400",children:[g.length," items"]})]}),e.jsxs("button",{onClick:()=>u(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Product"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:p,onChange:a=>A(a.target.value),className:"input-field pl-12"})]}),C.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(gt,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:p?"No products found":"No products yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:p?"Try adjusting your search":"Add products to quickly add them to invoices"}),!p&&e.jsxs("button",{onClick:()=>u(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Add Product"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(a=>e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:a.name}),a.description&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1 line-clamp-2",children:a.description}),e.jsxs("div",{className:"mt-3 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-mono font-bold text-teal-400",children:V(a.price,s.currency)}),a.unit&&e.jsxs("span",{className:"text-midnight-400 text-sm",children:["/ ",a.unit]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>u(a),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(a.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})},a.id))}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:N?"Edit Product":"Add Product"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Ge,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:i,className:`input-field ${o.name?"border-coral-500":""}`,placeholder:"e.g., Notebook, Pen, Cake"}),o.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Description"}),e.jsx("textarea",{name:"description",value:h.description,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Brief description of the product"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Price *"}),e.jsx("input",{type:"number",name:"price",min:"0",step:"0.01",value:h.price,onChange:i,className:`input-field ${o.price?"border-coral-500":""}`,placeholder:"0.00"}),o.price&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:o.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Unit"}),e.jsx("select",{name:"unit",value:h.unit,onChange:i,className:"input-field",children:Ds.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:d,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:f,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),N?"Update":"Add Product"]})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Product?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This product will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>S(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>v(E),className:"btn-danger",children:"Delete"})]})]})})]})}function As(){const{lastSyncTime:t}=je(),[s,g]=F.useState(()=>te.getAll());F.useEffect(()=>{g(te.getAll())},[t]);const n=K.getAll(),[p,A]=F.useState(""),[H,b]=F.useState(!1),[N,m]=F.useState(null),[E,S]=F.useState(null),[h,w]=F.useState({name:"",phone:"",email:"",address:""}),[o,I]=F.useState({}),C=l=>n.filter(j=>j.customerName===l).length,u=s.filter(l=>{var j,P;return l.name.toLowerCase().includes(p.toLowerCase())||((j=l.phone)==null?void 0:j.includes(p))||((P=l.email)==null?void 0:P.toLowerCase().includes(p.toLowerCase()))}),d=(l=null)=>{l?(m(l),w({name:l.name,phone:l.phone||"",email:l.email||"",address:l.address||""})):(m(null),w({name:"",phone:"",email:"",address:""})),I({}),b(!0)},i=()=>{b(!1),m(null),w({name:"",phone:"",email:"",address:""}),I({})},r=l=>{const{name:j,value:P}=l.target;w(D=>({...D,[j]:P})),o[j]&&I(D=>({...D,[j]:null}))},f=()=>{const l={};return h.name.trim()||(l.name="Customer name is required"),I(l),Object.keys(l).length===0},v=()=>{if(!f())return;const l={id:(N==null?void 0:N.id)||ne(),name:h.name.trim(),phone:h.phone.trim(),email:h.email.trim(),address:h.address.trim()};te.save(l),g(te.getAll()),i()},a=l=>{te.delete(l),g(te.getAll()),S(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Customers"}),e.jsxs("p",{className:"text-midnight-400",children:[s.length," customers"]})]}),e.jsxs("button",{onClick:()=>d(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Customer"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:p,onChange:l=>A(l.target.value),className:"input-field pl-12"})]}),u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(pt,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:p?"No customers found":"No customers yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:p?"Try adjusting your search":"Customers are automatically added when you create invoices"}),!p&&e.jsxs("button",{onClick:()=>d(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"}),"Add Customer"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.map(l=>{const j=C(l.name);return e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-teal-400 font-semibold",children:l.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:l.name}),j>0&&e.jsxs(G,{to:`/invoices?search=${encodeURIComponent(l.name)}`,className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),j," invoice",j>1?"s":""]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[l.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${l.phone}`,className:"hover:text-white",children:l.phone})]}),l.email&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("a",{href:`mailto:${l.email}`,className:"hover:text-white truncate",children:l.email})]}),l.address&&e.jsxs("div",{className:"flex items-start gap-2 text-midnight-400 text-sm",children:[e.jsx(Qt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"line-clamp-2",children:l.address})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>d(l),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(l.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})},l.id)})}),H&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:N?"Edit Customer":"Add Customer"}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Ge,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:r,className:`input-field ${o.name?"border-coral-500":""}`,placeholder:"Full name"}),o.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:r,className:"input-field",placeholder:"Mobile number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:r,className:"input-field",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:h.address,onChange:r,className:"input-field min-h-[80px] resize-none",placeholder:"Full address"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:i,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:v,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),N?"Update":"Add Customer"]})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Customer?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This customer will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>S(null),className:"btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:()=>a(E),className:"btn-danger",children:"Delete"})]})]})})]})}const Is=[{symbol:"₹",name:"Indian Rupee (INR)"},{symbol:"$",name:"US Dollar (USD)"},{symbol:"€",name:"Euro (EUR)"},{symbol:"£",name:"British Pound (GBP)"},{symbol:"¥",name:"Japanese Yen (JPY)"}],ks=[{id:"business",label:"Business Profile",icon:qt},{id:"invoice",label:"Invoice Settings",icon:ge},{id:"sync",label:"Cloud Sync",icon:Ne}];function Es(){const{lastSyncTime:t}=je(),[s,g]=F.useState(()=>re.get()),[n,p]=F.useState(()=>le.get());F.useEffect(()=>{g(re.get()),p(le.get())},[t]);const[A,H]=F.useState(!1),[b,N]=F.useState("business"),[m,E]=F.useState(!1),[S,h]=F.useState(null),w=r=>{const{name:f,value:v}=r.target;g(a=>({...a,[f]:v}))},o=r=>{const{name:f,value:v,type:a}=r.target;p(l=>({...l,[f]:a==="number"?parseFloat(v)||0:v}))},I=()=>{re.save(s),le.save(n),H(!0),setTimeout(()=>H(!1),2e3)},C=r=>{var v;const f=(v=r.target.files)==null?void 0:v[0];if(f){const a=new FileReader;a.onloadend=()=>{g(l=>({...l,logo:a.result}))},a.readAsDataURL(f)}},u=()=>{g(r=>({...r,logo:null}))},d=()=>{p(r=>({...r,showLogo:!r.showLogo}))},i=async r=>{E(!0),h(null);try{let f;switch(r){case"upload":f=await be.uploadToCloud();break;case"download":f=await be.downloadFromCloud();break;case"full":f=await be.fullSync();break}h({type:f.success?"success":"error",text:f.message}),f.success&&(r==="download"||r==="full")&&(g(re.get()),p(le.get()))}catch(f){h({type:"error",text:`Sync failed: ${f.message}`})}finally{E(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-midnight-400",children:"Manage your business profile and settings"})]}),e.jsx("button",{onClick:I,className:`btn-primary flex items-center gap-2 self-start transition-all ${A?"bg-teal-600":""}`,children:A?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-5 h-5"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5"}),"Save Changes"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-midnight-700 pb-4",children:ks.map(r=>{const f=r.icon;return e.jsxs("button",{onClick:()=>N(r.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-colors ${b===r.id?"bg-teal-500/20 text-teal-400":"text-midnight-400 hover:text-white hover:bg-midnight-700"}`,children:[e.jsx(f,{className:"w-5 h-5"}),r.label]},r.id)})}),b==="business"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Business Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:w,className:"input-field",placeholder:"Your business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:s.address,onChange:w,className:"input-field min-h-[80px] resize-none",placeholder:"Business address"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"City"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:w,className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"State"}),e.jsx("input",{type:"text",name:"state",value:s.state,onChange:w,className:"input-field",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"PIN Code"}),e.jsx("input",{type:"text",name:"pincode",value:s.pincode,onChange:w,className:"input-field",placeholder:"PIN Code"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:w,className:"input-field",placeholder:"Business phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:w,className:"input-field",placeholder:"business@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax ID / Registration Number"}),e.jsx("input",{type:"text",name:"taxId",value:s.taxId,onChange:w,className:"input-field font-mono",placeholder:"Tax registration number"})]})]})]}),e.jsx("div",{className:"glass rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(lt,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Local Storage"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"All data is saved locally in your browser"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Logo"}),s.logo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.logo,alt:"Business logo",className:"w-full h-40 object-contain bg-white rounded-xl"}),e.jsx("button",{onClick:u,className:"absolute top-2 right-2 p-2 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors",children:e.jsx(Ce,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-midnight-600 rounded-xl cursor-pointer hover:border-teal-500/50 transition-colors",children:[e.jsx(Kt,{className:"w-8 h-8 text-midnight-500 mb-2"}),e.jsx("span",{className:"text-midnight-400 text-sm",children:"Upload logo"}),e.jsx("span",{className:"text-midnight-500 text-xs mt-1",children:"PNG, JPG up to 2MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Currency"}),e.jsx("div",{className:"space-y-2",children:Is.map(r=>e.jsxs("button",{onClick:()=>g(f=>({...f,currency:r.symbol})),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${s.currency===r.symbol?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-midnight-700"}`,children:[e.jsx("span",{className:"text-xl font-mono",children:r.symbol}),e.jsx("span",{className:"text-sm",children:r.name}),s.currency===r.symbol&&e.jsx(Ue,{className:"w-4 h-4 ml-auto"})]},r.symbol))})]})]})]}),b==="invoice"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Prefix"}),e.jsx("input",{type:"text",name:"invoicePrefix",value:n.invoicePrefix,onChange:o,className:"input-field font-mono",placeholder:"INV"}),e.jsxs("p",{className:"text-midnight-500 text-xs mt-1",children:["Your invoices will be numbered like ",n.invoicePrefix,"-2026-0001"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",name:"taxRate",min:"0",max:"100",value:n.taxRate,onChange:o,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax Label"}),e.jsx("input",{type:"text",name:"taxLabel",value:n.taxLabel||"",onChange:o,className:"input-field",placeholder:"e.g., GST, VAT, Tax"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Display"}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-midnight-800/50 rounded-xl cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Show Business Logo"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Display your logo on invoices"})]}),e.jsx("div",{className:`w-12 h-7 rounded-full transition-colors ${n.showLogo?"bg-teal-500":"bg-midnight-600"}`,onClick:d,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform mt-1 ${n.showLogo?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Preview"}),e.jsxs("div",{className:"bg-white rounded-xl p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[n.showLogo&&s.logo&&e.jsx("img",{src:s.logo,alt:"Logo",className:"h-12 mb-2"}),e.jsx("h3",{className:"font-bold text-lg",children:s.name||"Your Business Name"}),e.jsx("p",{className:"text-gray-500 text-sm",children:s.address||"Business Address"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm uppercase",children:"Invoice"}),e.jsxs("p",{className:"font-mono font-bold",children:[n.invoicePrefix,"-2026-0001"]})]})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:[n.taxLabel||"Tax"," Rate: ",n.taxRate,"%"]})})]})]})]}),b==="sync"&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${J?"bg-teal-500/20":"bg-coral-500/20"}`,children:J?e.jsx(Ne,{className:"w-6 h-6 text-teal-400"}):e.jsx(vt,{className:"w-6 h-6 text-coral-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Cloud Sync Status"}),e.jsx("p",{className:`text-sm ${J?"text-teal-400":"text-coral-400"}`,children:J?"Connected to Supabase":"Not Configured"})]})]}),!J&&e.jsxs("div",{className:"bg-midnight-800/50 rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"text-midnight-300 text-sm",children:"To sync invoices across devices, set up Supabase:"}),e.jsxs("ol",{className:"text-midnight-400 text-sm list-decimal list-inside space-y-2",children:[e.jsxs("li",{children:["Create a free account at ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-teal-400 hover:underline",children:"supabase.com"})]}),e.jsx("li",{children:"Create a new project and run the database schema"}),e.jsxs("li",{children:["Add these environment variables to your deployment:",e.jsxs("div",{className:"mt-2 bg-midnight-900 rounded-lg p-3 font-mono text-xs",children:[e.jsx("div",{children:"VITE_SUPABASE_URL=your_project_url"}),e.jsx("div",{children:"VITE_SUPABASE_ANON_KEY=your_anon_key"})]})]}),e.jsx("li",{children:"Redeploy your application"})]})]})]}),J&&e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Sync Actions"}),S&&e.jsx("div",{className:`mb-4 p-4 rounded-xl ${S.type==="success"?"bg-teal-500/20 text-teal-400":"bg-coral-500/20 text-coral-400"}`,children:S.text}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>i("full"),disabled:m,className:"w-full flex items-center gap-4 p-4 bg-teal-500/10 hover:bg-teal-500/20 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-teal-500/20",children:e.jsx(ze,{className:`w-6 h-6 text-teal-400 ${m?"animate-spin":""}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Full Sync"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Download from cloud, then upload local changes"})]})]}),e.jsxs("button",{onClick:()=>i("upload"),disabled:m,className:"w-full flex items-center gap-4 p-4 bg-midnight-800/50 hover:bg-midnight-700/50 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/20",children:e.jsx(Xt,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Upload to Cloud"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Push all local data to cloud storage"})]})]}),e.jsxs("button",{onClick:()=>i("download"),disabled:m,className:"w-full flex items-center gap-4 p-4 bg-midnight-800/50 hover:bg-midnight-700/50 rounded-xl transition-colors disabled:opacity-50",children:[e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/20",children:e.jsx(Ve,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:"Download from Cloud"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Get latest data from cloud storage"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"How Cloud Sync Works"}),e.jsxs("div",{className:"space-y-4 text-midnight-300 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(lt,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Local-First"}),e.jsx("p",{children:"Your data is always saved locally in your browser. The app works offline."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(Ne,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Cloud Backup"}),e.jsx("p",{children:"When you sync, your data is stored in Supabase (PostgreSQL database)."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-800 h-fit",children:e.jsx(ze,{className:"w-4 h-4 text-midnight-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Multi-Device"}),e.jsx("p",{children:"Sync on any device to get your latest invoices, customers, and products."})]})]})]})]})]})]})}function Fs(){const t=Se(),{signIn:s}=ye(),[g,n]=F.useState(""),[p,A]=F.useState(""),[H,b]=F.useState(""),[N,m]=F.useState(!1),E=async S=>{S.preventDefault(),b(""),m(!0);try{const{error:h}=await s(g,p);h?b(h.message):t("/")}catch{b("An unexpected error occurred")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(ot,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-midnight-400",children:"Sign in to access your invoices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[H&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(ve,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:H})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:g,onChange:S=>n(S.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:p,onChange:S=>A(S.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"current-password"})]})]}),e.jsx("button",{type:"submit",disabled:N,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-5 h-5"}),"Sign In"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-center",children:[e.jsx(G,{to:"/forgot-password",className:"block text-sm text-teal-400 hover:text-teal-300 transition-colors",children:"Forgot your password?"}),e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Don't have an account?"," ",e.jsx(G,{to:"/signup",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign up"})]})]})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"Your data is securely synced across all your devices"})]})})}function Rs(){const t=Se(),{signUp:s}=ye(),[g,n]=F.useState(""),[p,A]=F.useState(""),[H,b]=F.useState(""),[N,m]=F.useState(""),[E,S]=F.useState(!1),h=async w=>{if(w.preventDefault(),m(""),p.length<6){m("Password must be at least 6 characters long");return}if(p!==H){m("Passwords do not match");return}S(!0);try{const{error:o}=await s(g,p);if(o)m(o.message);else{try{await be.uploadToCloud()}catch(I){console.error("Failed to sync local data:",I)}t("/")}}catch{m("An unexpected error occurred")}finally{S(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 mb-4",children:e.jsx(ct,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Create Account"}),e.jsx("p",{className:"text-midnight-400",children:"Start managing your invoices across all devices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[N&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(ve,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:g,onChange:w=>n(w.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:p,onChange:w=>A(w.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password",minLength:6})]}),e.jsx("p",{className:"text-midnight-500 text-xs mt-1",children:"At least 6 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:H,onChange:w=>b(w.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password"})]})]}),e.jsxs("div",{className:"bg-midnight-800/50 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(ce,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Sync across all your devices"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(ce,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Secure cloud backup"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(ce,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Access from anywhere"})]})]}),e.jsx("button",{type:"submit",disabled:E,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-5 h-5"}),"Create Account"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Already have an account?"," ",e.jsx(G,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign in"})]})})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})]})})}function _s(){const{resetPassword:t}=ye(),[s,g]=F.useState(""),[n,p]=F.useState(""),[A,H]=F.useState(!1),[b,N]=F.useState(!1),m=async E=>{E.preventDefault(),p(""),N(!0);try{const{error:S}=await t(s);S?p(S.message):H(!0)}catch{p("An unexpected error occurred")}finally{N(!1)}};return A?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(ce,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-midnight-400",children:["We've sent password reset instructions to ",e.jsx("strong",{className:"text-white",children:s})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-8 space-y-4",children:[e.jsx("p",{className:"text-midnight-300 text-sm",children:"Click the link in the email to reset your password. If you don't see the email, check your spam folder."}),e.jsxs(G,{to:"/login",className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Back to Login"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 mb-4",children:e.jsx(fe,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-midnight-400",children:"Enter your email to reset your password"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(ve,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:s,onChange:E=>g(E.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(G,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Back to Login"]})})]}),e.jsxs("p",{className:"text-center text-midnight-500 text-sm mt-8",children:["Remember your password?"," ",e.jsx(G,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors",children:"Sign in"})]})]})})}const xt="invoiceflow_uuid_migration_v1",Hs=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,xe=t=>Hs.test(t),Ws=()=>{if(localStorage.getItem(xt))return;console.log("Starting migration to UUIDs...");let t=0;try{const s=K.getAll();let g=!1;const n=s.map(p=>{let A=!1,H=p.id;xe(p.id)||(H=ne(),A=!0);const b=p.items.map(N=>xe(N.id)?N:(A=!0,{...N,id:ne()}));return A?(g=!0,t++,{...p,id:H,items:b}):p});g&&localStorage.setItem("invoiceflow_invoices",JSON.stringify(n))}catch(s){console.error("Error migrating invoices:",s)}try{const s=te.getAll();let g=!1;const n=s.map(p=>xe(p.id)?p:(g=!0,t++,{...p,id:ne()}));g&&localStorage.setItem("invoiceflow_customers",JSON.stringify(n))}catch(s){console.error("Error migrating customers:",s)}try{const s=ae.getAll();let g=!1;const n=s.map(p=>xe(p.id)?p:(g=!0,t++,{...p,id:ne()}));g&&localStorage.setItem("invoiceflow_products",JSON.stringify(n))}catch(s){console.error("Error migrating products:",s)}try{const s=re.get();if(s&&s.id&&!xe(s.id)){const g={...s,id:ne()};localStorage.setItem("invoiceflow_business",JSON.stringify(g)),t++}}catch(s){console.error("Error migrating business:",s)}try{const s=le.get();if(s&&s.id&&!xe(s.id)){const g={...s,id:ne()};localStorage.setItem("invoiceflow_settings",JSON.stringify(g)),t++}}catch(s){console.error("Error migrating settings:",s)}localStorage.setItem(xt,"true"),console.log(`Migration complete. Migrated ${t} items.`)};function Os(){return F.useEffect(()=>{Ws()},[]),e.jsx(_t,{children:e.jsx(rs,{children:e.jsx(xs,{children:e.jsxs(st,{children:[e.jsx(se,{path:"/login",element:e.jsx(Fs,{})}),e.jsx(se,{path:"/signup",element:e.jsx(Rs,{})}),e.jsx(se,{path:"/forgot-password",element:e.jsx(_s,{})}),e.jsx(se,{path:"/*",element:e.jsx(fs,{children:e.jsx(ps,{children:e.jsxs(st,{children:[e.jsx(se,{path:"/",element:e.jsx(ys,{})}),e.jsx(se,{path:"/invoices",element:e.jsx(Ss,{})}),e.jsx(se,{path:"/invoices/new",element:e.jsx(ut,{})}),e.jsx(se,{path:"/invoices/edit/:id",element:e.jsx(ut,{})}),e.jsx(se,{path:"/invoices/view/:id",element:e.jsx(Ps,{})}),e.jsx(se,{path:"/products",element:e.jsx(Ts,{})}),e.jsx(se,{path:"/customers",element:e.jsx(As,{})}),e.jsx(se,{path:"/settings",element:e.jsx(Es,{})})]})})})})]})})})})}class Ls extends F.Component{constructor(){super(...arguments);tt(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(g){return{hasError:!0,error:g}}componentDidCatch(g,n){console.error("Uncaught error:",g,n)}render(){var g;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-coral-500/20 mb-6",children:e.jsx(ve,{className:"w-8 h-8 text-coral-400"})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:((g=this.state.error)==null?void 0:g.message)||"An unexpected error occurred. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const Tt=document.getElementById("root");if(!Tt)throw new Error("Failed to find root element");$e.createRoot(Tt).render(e.jsx(Ht.StrictMode,{children:e.jsx(Ls,{children:e.jsx(Os,{})})}));
