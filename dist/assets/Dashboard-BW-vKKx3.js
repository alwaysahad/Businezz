import{j as e}from"./react-query-0I5YXCIV.js";import{r as C,L as l}from"./react-vendor-GSsPULXx.js";import{c as I,f as m,g as M,a as L,b as $}from"./helpers-CsfFra1r.js";import{u as k,a as P}from"./useData-IJAFWeEu.js";import{f as S,P as p,F as R,I as F,h as B,A as E,i as x,T as A,C as D}from"./ui-libs-B_77BvNz.js";import"./database-zdMLZIvB.js";import"./index-Y5CsEzuB.js";import"./supabase-DfwcnzK-.js";function h({icon:t,label:u,value:a,subtext:o,color:r,delay:i}){return e.jsx("div",{className:"glass rounded-2xl p-6 card-hover animate-slide-up",style:{animationDelay:`${i}ms`},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-midnight-400 text-sm font-medium",children:u}),e.jsx("p",{className:"text-3xl font-display font-bold text-white mt-2",children:a}),o&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1",children:o})]}),e.jsx("div",{className:`p-3 rounded-xl ${r}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})}function q(){const{business:t,loading:u}=k(),{invoices:a,loading:o}=P(),r=u||o,i=C.useMemo(()=>{const s=new Date,c=s.getMonth(),T=s.getFullYear();let N=0,g=0,f=0,v=0,b=0,w=0;return a.forEach(n=>{const d=I(n.items,n.taxRate,n.discount),y=new Date(n.date);n.status==="paid"?(N+=d.total,f++,y.getMonth()===c&&y.getFullYear()===T&&(w+=d.total)):n.status==="pending"?(g+=d.total,v++):n.status==="overdue"&&(g+=d.total,b++)}),{totalInvoices:a.length,totalRevenue:N,pendingAmount:g,paidCount:f,pendingCount:v,overdueCount:b,thisMonthRevenue:w}},[a]),j=C.useMemo(()=>[...a].sort((s,c)=>new Date(c.createdAt||"").getTime()-new Date(s.createdAt||"").getTime()).slice(0,5),[a]);return r&&a.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-white",children:["Welcome back",t.name?`, ${t.name.split(" ")[0]}`:"","!"]}),e.jsx("p",{className:"text-midnight-400 mt-1",children:"Here's what's happening with your invoices today."})]}),e.jsxs(l,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{icon:R,label:"Total Invoices",value:i.totalInvoices,subtext:`${i.paidCount} paid`,color:"bg-teal-500/20 text-teal-400",delay:0}),e.jsx(h,{icon:F,label:"Total Revenue",value:m(i.totalRevenue,t.currency),subtext:`This month: ${m(i.thisMonthRevenue,t.currency)}`,color:"bg-gold-500/20 text-gold-400",delay:100}),e.jsx(h,{icon:B,label:"Pending",value:i.pendingCount,subtext:m(i.pendingAmount,t.currency),color:"bg-midnight-500/50 text-midnight-300",delay:200}),e.jsx(h,{icon:E,label:"Overdue",value:i.overdueCount,subtext:"Need attention",color:"bg-coral-500/20 text-coral-400",delay:300})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"400ms"},children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{to:"/invoices/new",className:"flex items-center gap-3 p-4 rounded-xl bg-teal-500/10 hover:bg-teal-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(p,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Create Invoice"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Generate a new invoice"})]}),e.jsx(x,{className:"w-5 h-5 text-teal-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(l,{to:"/products",className:"flex items-center gap-3 p-4 rounded-xl bg-gold-500/10 hover:bg-gold-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gold-500/20",children:e.jsx(A,{className:"w-5 h-5 text-gold-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Add or edit products"})]}),e.jsx(x,{className:"w-5 h-5 text-gold-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(l,{to:"/settings",className:"flex items-center gap-3 p-4 rounded-xl bg-midnight-600/50 hover:bg-midnight-600 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-500",children:e.jsx(D,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Business Profile"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Update your details"})]}),e.jsx(x,{className:"w-5 h-5 text-midnight-300 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"500ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white",children:"Recent Invoices"}),e.jsxs(l,{to:"/invoices",className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:["View all ",e.jsx(x,{className:"w-4 h-4"})]})]}),j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 text-midnight-500 mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"No invoices yet"}),e.jsx(l,{to:"/invoices/new",className:"text-teal-400 text-sm hover:text-teal-300 mt-2 inline-block",children:"Create your first invoice"})]}):e.jsx("div",{className:"space-y-3",children:j.map(s=>{const c=I(s.items,s.taxRate,s.discount);return e.jsxs(l,{to:`/invoices/view/${s.id}`,className:"flex items-center gap-4 p-4 rounded-xl bg-midnight-800/50 hover:bg-midnight-800 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white truncate",children:s.customerName}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${L(s.status)}`,children:M(s.status)})]}),e.jsxs("p",{className:"text-sm text-midnight-400 mt-1",children:[s.invoiceNumber," â€¢ ",$(s.createdAt||"")]})]}),e.jsx("p",{className:"font-mono font-semibold text-white",children:m(c.total,t.currency)})]},s.id)})})]})]}),!t.name&&a.length===0&&!r&&e.jsxs("div",{className:"glass rounded-2xl p-8 text-center animate-slide-up",style:{animationDelay:"600ms"},children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center mx-auto mb-4 shadow-glow",children:e.jsx(A,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"Get Started"}),e.jsx("p",{className:"text-midnight-400 max-w-md mx-auto mb-6",children:"Set up your business profile and start creating professional invoices in minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(l,{to:"/settings",className:"btn-primary flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Set Up Business Profile"]}),e.jsxs(l,{to:"/invoices/new",className:"btn-secondary flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"Create First Invoice"]})]})]})]})}export{q as default};
