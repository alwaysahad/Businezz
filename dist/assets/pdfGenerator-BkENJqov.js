import{v as b}from"./ui-libs-B_77BvNz.js";import{c as z,d as T,n as D}from"./helpers-CsfFra1r.js";const h=(o,a="Rs.")=>{const i=parseFloat(String(o))||0;return`${a==="â‚¹"?"Rs.":a} ${i.toFixed(2)}`},F=(o,a,i={})=>{const t=new b,l=t.internal.pageSize.getWidth(),n=20,f=l-2*n;let e=20;const S=i.taxLabel||"Tax",m=z(o.items,o.taxRate,o.discount),s=a.currency||"Rs.";t.setFontSize(16),t.setFont("helvetica","bold"),t.text(a.name||"Business Name",n,e),t.setFontSize(12),t.text("INVOICE",l-n,e,{align:"right"}),e+=7,t.setFontSize(10),t.setFont("helvetica","normal"),t.text(o.invoiceNumber,l-n,e,{align:"right"}),e=30,t.setFontSize(9);const c=[];a.address&&c.push(a.address),(a.city||a.state)&&c.push(`${a.city||""}${a.city&&a.state?", ":""}${a.state||""} ${a.pincode||""}`.trim()),a.phone&&c.push(`Phone: ${a.phone}`),a.email&&c.push(`Email: ${a.email}`),a.taxId&&c.push(`${S} ID: ${a.taxId}`),c.forEach(r=>{t.text(r,n,e),e+=4}),e+=5,t.setLineWidth(.5),t.line(n,e,l-n,e),e+=10,t.setFont("helvetica","bold"),t.text("Bill To:",n,e),t.text("Invoice Details:",l/2+10,e),e+=6,t.setFont("helvetica","normal");const g=e;t.text(o.customerName||"Customer",n,g);let d=g+4;if(o.customerAddress){const r=t.splitTextToSize(o.customerAddress,f/2-20);t.text(r,n,d),d+=r.length*4}o.customerPhone&&(t.text(`Phone: ${o.customerPhone}`,n,d),d+=4),o.customerEmail&&t.text(`Email: ${o.customerEmail}`,n,d);const y=l/2+10;t.text(`Date: ${T(o.date)}`,y,g),e=Math.max(d,g+12)+10;const $=o.items.map((r,W)=>[(W+1).toString(),r.name,r.quantity.toString(),h(r.price,s),h(r.quantity*r.price,s)]);t.autoTable({startY:e,head:[["#","Description","Qty","Rate","Amount"]],body:$,margin:{left:n,right:n},tableWidth:f,styles:{fontSize:9,cellPadding:4,lineColor:[0,0,0],lineWidth:.1,textColor:[0,0,0]},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.3},bodyStyles:{fillColor:[255,255,255]},columnStyles:{0:{cellWidth:12,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:20,halign:"center"},3:{cellWidth:30,halign:"right"},4:{cellWidth:35,halign:"right"}}}),e=t.lastAutoTable.finalY+10;const x=l-n-80,u=l-n;if(t.setFontSize(9),t.text("Subtotal:",x,e),t.text(h(m.subtotal,s),u,e,{align:"right"}),o.discount>0&&(e+=6,t.text(`Discount (${o.discount}%):`,x,e),t.text(`-${h(m.discountAmount,s)}`,u,e,{align:"right"})),o.taxRate>0&&(e+=6,t.text(`${S} (${o.taxRate}%):`,x,e),t.text(h(m.taxAmount,s),u,e,{align:"right"})),e+=4,t.setLineWidth(.3),t.line(x-5,e,u,e),e+=6,t.setFont("helvetica","bold"),t.setFontSize(11),t.text("TOTAL:",x,e),t.text(h(m.total,s),u,e,{align:"right"}),e+=15,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Amount in Words:",n,e),e+=5,t.setFont("helvetica","bold"),t.text(`${D(Math.floor(m.total))} Only`,n,e),o.notes){e+=12,t.setFont("helvetica","normal"),t.setFontSize(9),t.text("Notes:",n,e),e+=5;const r=t.splitTextToSize(o.notes,f);t.text(r,n,e)}const p=t.internal.pageSize.getHeight()-20;return t.setLineWidth(.3),t.line(n,p-5,l-n,p-5),t.setFont("helvetica","normal"),t.setFontSize(8),t.text("Thank you for your business!",l/2,p,{align:"center"}),t},P=(o,a,i)=>{F(o,a,i).save(`${o.invoiceNumber}.pdf`)},R=(o,a,i)=>F(o,a,i).output("blob"),A=(o,a,i)=>{const l=F(o,a,i).output("blob"),n=URL.createObjectURL(l);window.open(n,"_blank")};export{P as d,R as g,A as o};
