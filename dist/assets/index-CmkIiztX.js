var wt=Object.defineProperty;var St=(t,c,g)=>c in t?wt(t,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):t[c]=g;var Qe=(t,c,g)=>St(t,typeof c!="symbol"?c+"":c,g);import{r as L,a as Ct,N as Pt,u as Dt,b as Ne,L as q,g as kt,c as Re,d as ot,B as It,R as Ve,e as X,f as Tt}from"./vendor-yPSHqVck.js";import{c as Ft}from"./supabase-DfwcnzK-.js";import{R as _e,P as Z,L as At,F as me,a as ct,U as dt,S as Et,C as se,b as Ke,c as He,d as Xe,e as Rt,X as Ue,M as Lt,f as K,I as _t,g as ht,A as xe,h as Ce,T as Ze,j as Ht,E as Wt,i as Ye,k as Bt,l as et,m as tt,n as Mt,o as mt,p as ye,D as ut,q as we,r as je,s as Te,t as We,u as Ot,v as zt,w as Ut,x as de,y as Yt,B as $t,z as Gt,G as st,H as Be,J as at,K as qt}from"./ui-0049UR7E.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))x(E);new MutationObserver(E=>{for(const b of E)if(b.type==="childList")for(const W of b.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&x(W)}).observe(document,{childList:!0,subtree:!0});function g(E){const b={};return E.integrity&&(b.integrity=E.integrity),E.referrerPolicy&&(b.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?b.credentials="include":E.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function x(E){if(E.ep)return;E.ep=!0;const b=g(E);fetch(E.href,b)}})();var xt={exports:{}},Fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=L,Qt=Symbol.for("react.element"),Vt=Symbol.for("react.fragment"),Kt=Object.prototype.hasOwnProperty,Xt=Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zt={key:!0,ref:!0,__self:!0,__source:!0};function ft(t,c,g){var x,E={},b=null,W=null;g!==void 0&&(b=""+g),c.key!==void 0&&(b=""+c.key),c.ref!==void 0&&(W=c.ref);for(x in c)Kt.call(c,x)&&!Zt.hasOwnProperty(x)&&(E[x]=c[x]);if(t&&t.defaultProps)for(x in c=t.defaultProps,c)E[x]===void 0&&(E[x]=c[x]);return{$$typeof:Qt,type:t,key:b,ref:W,props:E,_owner:Xt.current}}Fe.Fragment=Vt;Fe.jsx=ft;Fe.jsxs=ft;xt.exports=Fe;var e=xt.exports,Me={},nt=Ct;Me.createRoot=nt.createRoot,Me.hydrateRoot=nt.hydrateRoot;const es="https://kkcalkiqfdykbmitaqcb.supabase.co",gt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtrY2Fsa2lxZmR5a2JtaXRhcWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MjQ1MTksImV4cCI6MjA4NTQwMDUxOX0.hkDQS1mVtO2lgYlQXYNkbNpIF9crkotYMVaxe5gmLkc",ae=!!gt,$=ae?Ft(es,gt):null,V={INVOICES:"invoices",CUSTOMERS:"customers",PRODUCTS:"products",BUSINESS:"business_profile",SETTINGS:"settings"},pt=L.createContext(void 0);function ts({children:t}){const[c,g]=L.useState(null),[x,E]=L.useState(null),[b,W]=L.useState(!0);L.useEffect(()=>{if(!$){W(!1);return}$.auth.getSession().then(({data:{session:C}})=>{E(C),g((C==null?void 0:C.user)??null),W(!1)});const{data:{subscription:o}}=$.auth.onAuthStateChange((C,n)=>{E(n),g((n==null?void 0:n.user)??null),W(!1)});return()=>o.unsubscribe()},[]);const l={user:c,session:x,loading:b,signUp:async(o,C)=>{if(!$)return{error:{message:"Supabase not configured"}};const{error:n}=await $.auth.signUp({email:o,password:C});return{error:n}},signIn:async(o,C)=>{if(!$)return{error:{message:"Supabase not configured"}};const{error:n}=await $.auth.signInWithPassword({email:o,password:C});return{error:n}},signOut:async()=>{$&&await $.auth.signOut()},resetPassword:async o=>{if(!$)return{error:{message:"Supabase not configured"}};const{error:C}=await $.auth.resetPasswordForEmail(o,{redirectTo:`${window.location.origin}/reset-password`});return{error:C}}};return e.jsx(pt.Provider,{value:l,children:t})}function fe(){const t=L.useContext(pt);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const vt=L.createContext(void 0);function ss({children:t}){const{user:c}=fe(),[g,x]=L.useState(null),[E,b]=L.useState("idle");L.useEffect(()=>{if(!$||!ae||!c)return;const d=()=>{console.log("Remote change detected, refreshing data..."),b("syncing"),setTimeout(()=>{x(new Date),b("synced"),setTimeout(()=>b("idle"),2e3)},500)},P=["invoices","customers","products","business_profile","settings"].map(N=>$.channel(`${N}-changes`).on("postgres_changes",{event:"*",schema:"public",table:N,filter:`user_id=eq.${c.id}`},d).subscribe());return()=>{P.forEach(N=>N.unsubscribe())}},[c]);const W={lastSyncTime:g,syncStatus:E};return e.jsx(vt.Provider,{value:W,children:t})}function re(){const t=L.useContext(vt);if(t===void 0)throw new Error("useSync must be used within a SyncProvider");return t}function as({children:t}){const{user:c,loading:g}=fe();return ae?g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 mb-6 animate-pulse",children:e.jsx(_e,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-display font-bold text-white mb-2",children:"Loading..."}),e.jsx("p",{className:"text-midnight-400",children:"Please wait"})]})}):c?e.jsx(e.Fragment,{children:t}):e.jsx(Pt,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t})}const ns=[{path:"/",label:"Dashboard",icon:At},{path:"/invoices",label:"Invoices",icon:me},{path:"/products",label:"Products",icon:ct},{path:"/customers",label:"Customers",icon:dt},{path:"/settings",label:"Settings",icon:Et}];function is({children:t}){const[c,g]=L.useState(!1),[x,E]=L.useState(!1),b=Dt(),W=Ne(),{user:d,signOut:p}=fe(),{syncStatus:P}=re(),N=o=>o==="/"?b.pathname==="/":b.pathname.startsWith(o),l=async()=>{await p(),W("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>g(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out lg:transform-none ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col glass rounded-r-2xl lg:rounded-2xl m-0 lg:m-4",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs(q,{to:"/",className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center shadow-glow",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-display font-bold text-white",children:"Businezz"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Smart Billing"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(q,{to:"/invoices/new",className:"flex items-center justify-center gap-2 w-full btn-primary py-3",onClick:()=>g(!1),children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})}),e.jsx("nav",{className:"flex-1 px-4 py-2 space-y-1 overflow-y-auto",children:ns.map(o=>{const C=o.icon,n=N(o.path);return e.jsxs(q,{to:o.path,onClick:()=>g(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${n?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-white/5 hover:text-white"}`,children:[e.jsx(C,{className:`w-5 h-5 ${n?"text-teal-400":""}`}),e.jsx("span",{className:"font-medium",children:o.label}),n&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-teal-400"})]},o.path)})}),e.jsx("div",{className:"p-4 border-t border-white/10",children:ae&&d?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-midnight-800/50",children:P==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{className:"text-xs text-teal-400",children:"Synced"})]}):P==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-4 h-4 text-blue-400 animate-pulse"}),e.jsx("span",{className:"text-xs text-blue-400",children:"Syncing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-4 h-4 text-midnight-400"}),e.jsx("span",{className:"text-xs text-midnight-400",children:"Idle"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!x),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(He,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:d.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>E(!1)}),e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 glass rounded-lg p-2 z-50 animate-fade-in",children:e.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})})]})]})]}):e.jsx("div",{className:"text-center",children:ae?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Rt,{className:"w-6 h-6 text-midnight-500 mx-auto"}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Not signed in"})]}):e.jsx("p",{className:"text-xs text-midnight-400",children:"Made with ❤️ for small businesses"})})})]})}),e.jsxs("main",{className:"flex-1 flex flex-col min-h-screen lg:p-4",children:[e.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 glass safe-area-top sticky top-0 z-30",children:[e.jsxs(q,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-display font-bold text-white text-lg",children:"Businezz"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ae&&d&&e.jsxs("button",{onClick:()=>E(!x),className:"p-2 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors relative","aria-label":"User menu",children:[e.jsx(He,{className:"w-5 h-5 text-white"}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>E(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 glass rounded-lg p-2 z-50 animate-fade-in min-w-[200px]",children:[e.jsxs("div",{className:"px-3 py-2 border-b border-white/10 mb-2",children:[e.jsx("p",{className:"text-sm text-white font-medium truncate",children:d.email}),e.jsx("p",{className:"text-xs text-midnight-400",children:"Account"})]}),e.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-coral-400 hover:bg-coral-500/10 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})]}),e.jsx("button",{onClick:()=>g(!c),className:"p-3 -mr-1 rounded-lg hover:bg-white/10 active:bg-white/20 transition-colors","aria-label":"Toggle menu",children:c?e.jsx(Ue,{className:"w-6 h-6 text-white"}):e.jsx(Lt,{className:"w-6 h-6 text-white"})})]})]}),e.jsx("div",{className:"flex-1 p-3 sm:p-4 lg:p-0 safe-area-bottom",children:e.jsx("div",{className:"glass rounded-2xl min-h-full p-4 sm:p-6 lg:p-8 animate-fade-in",children:t})})]})]})}const ee=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const c=Math.random()*16|0;return(t==="x"?c:c&3|8).toString(16)}),J=(t,c="₹")=>{const g=parseFloat(String(t))||0;return`${c}${g.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`},ue=(t,c="short")=>{if(!t)return"";const g=new Date(t);return c==="short"?g.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):c==="long"?g.toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}):c==="input"?g.toISOString().split("T")[0]:g.toLocaleDateString()},ne=(t,c=0,g=0)=>{const x=t.reduce((p,P)=>p+(parseFloat(String(P.quantity))||0)*(parseFloat(String(P.price))||0),0),E=x*(parseFloat(String(g))||0)/100,b=x-E,W=b*(parseFloat(String(c))||0)/100,d=b+W;return{subtotal:x,discountAmount:E,taxableAmount:b,taxAmount:W,total:d}},$e=t=>{const c={draft:"bg-midnight-600 text-midnight-200",pending:"bg-gold-500/20 text-gold-400",paid:"bg-teal-500/20 text-teal-400",overdue:"bg-coral-500/20 text-coral-400",cancelled:"bg-midnight-700 text-midnight-400"};return c[t]||c.draft},Ge=t=>({draft:"Draft",pending:"Pending",paid:"Paid",overdue:"Overdue",cancelled:"Cancelled"})[t]||"Unknown",rs=t=>{const c=new Date,g=new Date(t),x=c.getTime()-g.getTime(),E=Math.floor(x/1e3),b=Math.floor(E/60),W=Math.floor(b/60),d=Math.floor(W/24);return d>30?ue(t,"short"):d>1?`${d} days ago`:d===1?"Yesterday":W>1?`${W} hours ago`:W===1?"1 hour ago":b>1?`${b} minutes ago`:"Just now"},ie=t=>{const c=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],g=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(t===0)return"Zero";if(t<0)return"Minus "+ie(-t);let x="";return Math.floor(t/1e7)>0&&(x+=ie(Math.floor(t/1e7))+" Crore ",t%=1e7),Math.floor(t/1e5)>0&&(x+=ie(Math.floor(t/1e5))+" Lakh ",t%=1e5),Math.floor(t/1e3)>0&&(x+=ie(Math.floor(t/1e3))+" Thousand ",t%=1e3),Math.floor(t/100)>0&&(x+=ie(Math.floor(t/100))+" Hundred ",t%=100),t>0&&(x!==""&&(x+="and "),t<20?x+=c[t]:(x+=g[Math.floor(t/10)],t%10>0&&(x+="-"+c[t%10]))),x.trim()};async function Se(){if(!$)return null;const{data:{user:t}}=await $.auth.getUser();return(t==null?void 0:t.id)||null}const he={async getAll(){if(!$)return[];const{data:t,error:c}=await $.from(V.INVOICES).select("*").order("created_at",{ascending:!1});if(c)throw c;return(t||[]).map(Le)},async getById(t){if(!$)return null;const{data:c,error:g}=await $.from(V.INVOICES).select("*").eq("id",t).single();if(g&&g.code!=="PGRST116")throw g;return c?Le(c):null},async save(t){if(!$)throw new Error("Database not configured");const c=await Se();if(!c)throw new Error("User not authenticated");const g={...os(t),user_id:c},{data:x,error:E}=await $.from(V.INVOICES).upsert(g,{onConflict:"id"}).select().single();if(E)throw E;return Le(x)},async delete(t){if(!$)throw new Error("Database not configured");const{error:c}=await $.from(V.INVOICES).delete().eq("id",t);if(c)throw c}},De={async getAll(){if(!$)return[];const{data:t,error:c}=await $.from(V.CUSTOMERS).select("*").order("name");if(c)throw c;return t||[]},async save(t){if(!$)throw new Error("Database not configured");const c=await Se();if(!c)throw new Error("User not authenticated");const g={...t,user_id:c},{data:x,error:E}=await $.from(V.CUSTOMERS).upsert(g,{onConflict:"id"}).select().single();if(E)throw E;return x},async delete(t){if(!$)throw new Error("Database not configured");const{error:c}=await $.from(V.CUSTOMERS).delete().eq("id",t);if(c)throw c}},ke={async getAll(){if(!$)return[];const{data:t,error:c}=await $.from(V.PRODUCTS).select("*").order("name");if(c)throw c;return t||[]},async save(t){if(!$)throw new Error("Database not configured");const c=await Se();if(!c)throw new Error("User not authenticated");const g={...t,user_id:c},{data:x,error:E}=await $.from(V.PRODUCTS).upsert(g,{onConflict:"id"}).select().single();if(E)throw E;return x},async delete(t){if(!$)throw new Error("Database not configured");const{error:c}=await $.from(V.PRODUCTS).delete().eq("id",t);if(c)throw c}},Oe={async get(){if(!$)return null;const{data:t,error:c}=await $.from(V.BUSINESS).select("*").single();if(c&&c.code!=="PGRST116")throw c;return t?it(t):null},async save(t){if(!$)throw new Error("Database not configured");const c=await Se();if(!c)throw new Error("User not authenticated");const g={...cs(t),user_id:c},{data:x,error:E}=await $.from(V.BUSINESS).upsert(g,{onConflict:"user_id"}).select().single();if(E)throw E;return it(x)}},ze={async get(){if(!$)return null;const{data:t,error:c}=await $.from(V.SETTINGS).select("*").single();if(c&&c.code!=="PGRST116")throw c;return t?rt(t):null},async save(t){if(!$)throw new Error("Database not configured");const c=await Se();if(!c)throw new Error("User not authenticated");const g={...ds(t),user_id:c},{data:x,error:E}=await $.from(V.SETTINGS).upsert(g,{onConflict:"user_id"}).select().single();if(E)throw E;return rt(x)}};async function ls(t){if(!ae||!$)return{success:!1,message:"Supabase not configured"};try{for(const c of t.invoices)await he.save(c);for(const c of t.customers)await De.save(c);for(const c of t.products)await ke.save(c);return t.business.name&&await Oe.save(t.business),await ze.save(t.settings),{success:!0,message:"All data synced to cloud successfully!"}}catch(c){return console.error("Sync to cloud failed:",c),{success:!1,message:`Sync failed: ${c.message}`}}}function Le(t){return{id:t.id,invoiceNumber:t.invoice_number,date:t.date,customerName:t.customer_name,customerEmail:t.customer_email,customerPhone:t.customer_phone,customerAddress:t.customer_address,items:t.items||[],taxRate:t.tax_rate,discount:t.discount,notes:t.notes,status:t.status,createdAt:t.created_at,updatedAt:t.updated_at}}function os(t){return{id:t.id,invoice_number:t.invoiceNumber,date:t.date,customer_name:t.customerName,customer_email:t.customerEmail,customer_phone:t.customerPhone,customer_address:t.customerAddress,items:t.items,tax_rate:t.taxRate,discount:t.discount,notes:t.notes,status:t.status,created_at:t.createdAt||new Date().toISOString(),updated_at:new Date().toISOString()}}function it(t){return{id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,pincode:t.pincode,phone:t.phone,email:t.email,taxId:t.tax_id,logo:t.logo,currency:t.currency,taxRate:t.tax_rate}}function cs(t){return{id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,pincode:t.pincode,phone:t.phone,email:t.email,tax_id:t.taxId,logo:t.logo,currency:t.currency,tax_rate:t.taxRate,updated_at:new Date().toISOString()}}function rt(t){return{id:t.id,currency:t.currency,taxRate:t.tax_rate,invoicePrefix:t.invoice_prefix,defaultPaymentTerms:t.default_payment_terms,showLogo:t.show_logo,taxLabel:t.tax_label}}function ds(t){return{id:t.id,currency:t.currency,tax_rate:t.taxRate,invoice_prefix:t.invoicePrefix,default_payment_terms:t.defaultPaymentTerms,show_logo:t.showLogo,tax_label:t.taxLabel,updated_at:new Date().toISOString()}}function be(){const{lastSyncTime:t}=re(),[c,g]=L.useState([]),[x,E]=L.useState(!0),[b,W]=L.useState(null),d=L.useCallback(async()=>{try{E(!0);const N=await he.getAll();g(N),W(null)}catch(N){console.error("Error fetching invoices:",N),W(N)}finally{E(!1)}},[]);return L.useEffect(()=>{d()},[d,t]),{invoices:c,loading:x,error:b,refresh:d,saveInvoice:async N=>{const l=await he.save(N);return g(o=>{const C=o.findIndex(n=>n.id===l.id);if(C>=0){const n=[...o];return n[C]=l,n}return[l,...o]}),l},deleteInvoice:async N=>{await he.delete(N),g(l=>l.filter(o=>o.id!==N))}}}function yt(t){const{lastSyncTime:c}=re(),[g,x]=L.useState(null),[E,b]=L.useState(!0),[W,d]=L.useState(null);return L.useEffect(()=>{if(!t){b(!1);return}(async()=>{try{b(!0);const N=await he.getById(t);x(N),d(null)}catch(N){console.error("Error fetching invoice:",N),d(N)}finally{b(!1)}})()},[t,c]),{invoice:g,loading:E,error:W,saveInvoice:async P=>{const N=await he.save(P);return x(N),N}}}function jt(){const{lastSyncTime:t}=re(),[c,g]=L.useState([]),[x,E]=L.useState(!0),[b,W]=L.useState(null),d=L.useCallback(async()=>{try{E(!0);const N=await De.getAll();g(N),W(null)}catch(N){console.error("Error fetching customers:",N),W(N)}finally{E(!1)}},[]);return L.useEffect(()=>{d()},[d,t]),{customers:c,loading:x,error:b,refresh:d,saveCustomer:async N=>{const l=await De.save(N);return g(o=>{const C=o.findIndex(n=>n.id===l.id);if(C>=0){const n=[...o];return n[C]=l,n}return[...o,l].sort((n,R)=>n.name.localeCompare(R.name))}),l},deleteCustomer:async N=>{await De.delete(N),g(l=>l.filter(o=>o.id!==N))}}}function bt(){const{lastSyncTime:t}=re(),[c,g]=L.useState([]),[x,E]=L.useState(!0),[b,W]=L.useState(null),d=L.useCallback(async()=>{try{E(!0);const N=await ke.getAll();g(N),W(null)}catch(N){console.error("Error fetching products:",N),W(N)}finally{E(!1)}},[]);return L.useEffect(()=>{d()},[d,t]),{products:c,loading:x,error:b,refresh:d,saveProduct:async N=>{const l=await ke.save(N);return g(o=>{const C=o.findIndex(n=>n.id===l.id);if(C>=0){const n=[...o];return n[C]=l,n}return[...o,l].sort((n,R)=>n.name.localeCompare(R.name))}),l},deleteProduct:async N=>{await ke.delete(N),g(l=>l.filter(o=>o.id!==N))}}}function ge(){const{lastSyncTime:t}=re(),[c,g]=L.useState({}),[x,E]=L.useState(!0),[b,W]=L.useState(null),d=L.useCallback(async()=>{try{E(!0);const P=await Oe.get();P&&g(P),W(null)}catch(P){console.error("Error fetching business:",P),W(P)}finally{E(!1)}},[]);return L.useEffect(()=>{d()},[d,t]),{business:c,loading:x,error:b,refresh:d,saveBusiness:async P=>{const N=await Oe.save(P);return g(N),N}}}function Ae(){const{lastSyncTime:t}=re(),[c,g]=L.useState({}),[x,E]=L.useState(!0),[b,W]=L.useState(null),d=L.useCallback(async()=>{try{E(!0);const P=await ze.get();P&&g(P),W(null)}catch(P){console.error("Error fetching settings:",P),W(P)}finally{E(!1)}},[]);return L.useEffect(()=>{d()},[d,t]),{settings:c,loading:x,error:b,refresh:d,saveSettings:async P=>{const N=await ze.save(P);return g(N),N}}}function Pe({icon:t,label:c,value:g,subtext:x,color:E,delay:b}){return e.jsx("div",{className:"glass rounded-2xl p-6 card-hover animate-slide-up",style:{animationDelay:`${b}ms`},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-midnight-400 text-sm font-medium",children:c}),e.jsx("p",{className:"text-3xl font-display font-bold text-white mt-2",children:g}),x&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1",children:x})]}),e.jsx("div",{className:`p-3 rounded-xl ${E}`,children:e.jsx(t,{className:"w-6 h-6"})})]})})}function hs(){const{business:t,loading:c}=ge(),{invoices:g,loading:x}=be(),E=c||x,b=L.useMemo(()=>{const d=new Date,p=d.getMonth(),P=d.getFullYear();let N=0,l=0,o=0,C=0,n=0,R=0;return g.forEach(j=>{const m=ne(j.items,j.taxRate,j.discount),u=new Date(j.date);j.status==="paid"?(N+=m.total,o++,u.getMonth()===p&&u.getFullYear()===P&&(R+=m.total)):j.status==="pending"?(l+=m.total,C++):j.status==="overdue"&&(l+=m.total,n++)}),{totalInvoices:g.length,totalRevenue:N,pendingAmount:l,paidCount:o,pendingCount:C,overdueCount:n,thisMonthRevenue:R}},[g]),W=L.useMemo(()=>[...g].sort((d,p)=>new Date(p.createdAt||"").getTime()-new Date(d.createdAt||"").getTime()).slice(0,5),[g]);return E&&g.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-white",children:["Welcome back",t.name?`, ${t.name.split(" ")[0]}`:"","!"]}),e.jsx("p",{className:"text-midnight-400 mt-1",children:"Here's what's happening with your invoices today."})]}),e.jsxs(q,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Pe,{icon:me,label:"Total Invoices",value:b.totalInvoices,subtext:`${b.paidCount} paid`,color:"bg-teal-500/20 text-teal-400",delay:0}),e.jsx(Pe,{icon:_t,label:"Total Revenue",value:J(b.totalRevenue,t.currency),subtext:`This month: ${J(b.thisMonthRevenue,t.currency)}`,color:"bg-gold-500/20 text-gold-400",delay:100}),e.jsx(Pe,{icon:ht,label:"Pending",value:b.pendingCount,subtext:J(b.pendingAmount,t.currency),color:"bg-midnight-500/50 text-midnight-300",delay:200}),e.jsx(Pe,{icon:xe,label:"Overdue",value:b.overdueCount,subtext:"Need attention",color:"bg-coral-500/20 text-coral-400",delay:300})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"400ms"},children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(q,{to:"/invoices/new",className:"flex items-center gap-3 p-4 rounded-xl bg-teal-500/10 hover:bg-teal-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-teal-500/20",children:e.jsx(Z,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Create Invoice"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Generate a new invoice"})]}),e.jsx(Ce,{className:"w-5 h-5 text-teal-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(q,{to:"/products",className:"flex items-center gap-3 p-4 rounded-xl bg-gold-500/10 hover:bg-gold-500/20 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gold-500/20",children:e.jsx(Ze,{className:"w-5 h-5 text-gold-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Manage Products"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Add or edit products"})]}),e.jsx(Ce,{className:"w-5 h-5 text-gold-400 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs(q,{to:"/settings",className:"flex items-center gap-3 p-4 rounded-xl bg-midnight-600/50 hover:bg-midnight-600 transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-midnight-500",children:e.jsx(se,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-white",children:"Business Profile"}),e.jsx("p",{className:"text-sm text-midnight-400",children:"Update your details"})]}),e.jsx(Ce,{className:"w-5 h-5 text-midnight-300 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6 animate-slide-up",style:{animationDelay:"500ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-display font-semibold text-white",children:"Recent Invoices"}),e.jsxs(q,{to:"/invoices",className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:["View all ",e.jsx(Ce,{className:"w-4 h-4"})]})]}),W.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-12 h-12 text-midnight-500 mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"No invoices yet"}),e.jsx(q,{to:"/invoices/new",className:"text-teal-400 text-sm hover:text-teal-300 mt-2 inline-block",children:"Create your first invoice"})]}):e.jsx("div",{className:"space-y-3",children:W.map(d=>{const p=ne(d.items,d.taxRate,d.discount);return e.jsxs(q,{to:`/invoices/view/${d.id}`,className:"flex items-center gap-4 p-4 rounded-xl bg-midnight-800/50 hover:bg-midnight-800 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white truncate",children:d.customerName}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$e(d.status)}`,children:Ge(d.status)})]}),e.jsxs("p",{className:"text-sm text-midnight-400 mt-1",children:[d.invoiceNumber," • ",rs(d.createdAt||"")]})]}),e.jsx("p",{className:"font-mono font-semibold text-white",children:J(p.total,t.currency)})]},d.id)})})]})]}),!t.name&&g.length===0&&!E&&e.jsxs("div",{className:"glass rounded-2xl p-8 text-center animate-slide-up",style:{animationDelay:"600ms"},children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center mx-auto mb-4 shadow-glow",children:e.jsx(Ze,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"Get Started"}),e.jsx("p",{className:"text-midnight-400 max-w-md mx-auto mb-6",children:"Set up your business profile and start creating professional invoices in minutes."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(q,{to:"/settings",className:"btn-primary flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Set Up Business Profile"]}),e.jsxs(q,{to:"/invoices/new",className:"btn-secondary flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Create First Invoice"]})]})]})]})}var ms={exports:{}};const us=kt(Ht);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,c){(function(x,E){t.exports=E(function(){try{return us}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Re<"u"?Re:typeof window<"u"?window:typeof self<"u"?self:Re,function(g){return function(){var x={172:function(d,p){var P=this&&this.__extends||function(){var o=function(C,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,j){R.__proto__=j}||function(R,j){for(var m in j)Object.prototype.hasOwnProperty.call(j,m)&&(R[m]=j[m])},o(C,n)};return function(C,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");o(C,n);function R(){this.constructor=C}C.prototype=n===null?Object.create(n):(R.prototype=n.prototype,new R)}}();Object.defineProperty(p,"__esModule",{value:!0}),p.CellHookData=p.HookData=void 0;var N=function(){function o(C,n,R){this.table=n,this.pageNumber=n.pageNumber,this.pageCount=this.pageNumber,this.settings=n.settings,this.cursor=R,this.doc=C.getDocument()}return o}();p.HookData=N;var l=function(o){P(C,o);function C(n,R,j,m,u,s){var r=o.call(this,n,R,s)||this;return r.cell=j,r.row=m,r.column=u,r.section=m.section,r}return C}(N);p.CellHookData=l},340:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0});var N=P(4),l=P(136),o=P(744),C=P(776),n=P(664),R=P(972);function j(m){m.API.autoTable=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];var r;u.length===1?r=u[0]:(console.error("Use of deprecated autoTable initiation"),r=u[2]||{},r.columns=u[0],r.body=u[1]);var v=(0,C.parseInput)(this,r),h=(0,R.createTable)(this,v);return(0,n.drawTable)(this,h),this},m.API.lastAutoTable=!1,m.API.previousAutoTable=!1,m.API.autoTable.previous=!1,m.API.autoTableText=function(u,s,r,v){(0,l.default)(u,s,r,v,this)},m.API.autoTableSetDefaults=function(u){return o.DocHandler.setDefaults(u,this),this},m.autoTableSetDefaults=function(u,s){o.DocHandler.setDefaults(u,s)},m.API.autoTableHtmlToJson=function(u,s){var r;if(s===void 0&&(s=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var v=new o.DocHandler(this),h=(0,N.parseHtml)(v,u,window,s,!1),a=h.head,f=h.body,D=((r=a[0])===null||r===void 0?void 0:r.map(function(I){return I.content}))||[];return{columns:D,rows:f,data:f}},m.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var u=this.lastAutoTable;return u&&u.finalY?u.finalY:0},m.API.autoTableAddPageContent=function(u){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),m.API.autoTable.globalDefaults||(m.API.autoTable.globalDefaults={}),m.API.autoTable.globalDefaults.addPageContent=u,this},m.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}p.default=j},136:function(d,p){Object.defineProperty(p,"__esModule",{value:!0});function P(N,l,o,C,n){C=C||{};var R=1.15,j=n.internal.scaleFactor,m=n.internal.getFontSize()/j,u=n.getLineHeightFactor?n.getLineHeightFactor():R,s=m*u,r=/\r\n|\r|\n/g,v="",h=1;if((C.valign==="middle"||C.valign==="bottom"||C.halign==="center"||C.halign==="right")&&(v=typeof N=="string"?N.split(r):N,h=v.length||1),o+=m*(2-R),C.valign==="middle"?o-=h/2*s:C.valign==="bottom"&&(o-=h*s),C.halign==="center"||C.halign==="right"){var a=m;if(C.halign==="center"&&(a*=.5),v&&h>=1){for(var f=0;f<v.length;f++)n.text(v[f],l-n.getStringUnitWidth(v[f])*a,o),o+=s;return n}l-=n.getStringUnitWidth(N)*a}return C.halign==="justify"?n.text(N,l,o,{maxWidth:C.maxWidth||100,align:"justify"}):n.text(N,l,o),n}p.default=P},420:function(d,p){Object.defineProperty(p,"__esModule",{value:!0}),p.getPageAvailableWidth=p.parseSpacing=p.getFillStyle=p.addTableBorder=p.getStringWidth=void 0;function P(n,R,j){j.applyStyles(R,!0);var m=Array.isArray(n)?n:[n],u=m.map(function(s){return j.getTextWidth(s)}).reduce(function(s,r){return Math.max(s,r)},0);return u}p.getStringWidth=P;function N(n,R,j,m){var u=R.settings.tableLineWidth,s=R.settings.tableLineColor;n.applyStyles({lineWidth:u,lineColor:s});var r=l(u,!1);r&&n.rect(j.x,j.y,R.getWidth(n.pageSize().width),m.y-j.y,r)}p.addTableBorder=N;function l(n,R){var j=n>0,m=R||R===0;return j&&m?"DF":j?"S":m?"F":null}p.getFillStyle=l;function o(n,R){var j,m,u,s;if(n=n||R,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=R}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(j=n.left)!==null&&j!==void 0?j:R,top:(m=n.top)!==null&&m!==void 0?m:R,right:(u=n.right)!==null&&u!==void 0?u:R,bottom:(s=n.bottom)!==null&&s!==void 0?s:R}):(typeof n!="number"&&(n=R),{top:n,right:n,bottom:n,left:n})}p.parseSpacing=o;function C(n,R){var j=o(R.settings.margin,0);return n.pageSize().width-(j.left+j.right)}p.getPageAvailableWidth=C},796:function(d,p){var P=this&&this.__extends||function(){var C=function(n,R){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,m){j.__proto__=m}||function(j,m){for(var u in m)Object.prototype.hasOwnProperty.call(m,u)&&(j[u]=m[u])},C(n,R)};return function(n,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");C(n,R);function j(){this.constructor=n}n.prototype=R===null?Object.create(R):(j.prototype=R.prototype,new j)}}();Object.defineProperty(p,"__esModule",{value:!0}),p.getTheme=p.defaultStyles=p.HtmlRowInput=void 0;var N=function(C){P(n,C);function n(R){var j=C.call(this)||this;return j._element=R,j}return n}(Array);p.HtmlRowInput=N;function l(C){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/C,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}p.defaultStyles=l;function o(C){var n={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return n[C]}p.getTheme=o},903:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.parseCss=void 0;var N=P(420);function l(j,m,u,s,r){var v={},h=1.3333333333333333,a=C(m,function(T){return r.getComputedStyle(T).backgroundColor});a!=null&&(v.fillColor=a);var f=C(m,function(T){return r.getComputedStyle(T).color});f!=null&&(v.textColor=f);var D=R(s,u);D&&(v.cellPadding=D);var I="borderTopColor",A=h*u,i=s.borderTopWidth;if(s.borderBottomWidth===i&&s.borderRightWidth===i&&s.borderLeftWidth===i){var w=(parseFloat(i)||0)/A;w&&(v.lineWidth=w)}else v.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/A,right:(parseFloat(s.borderRightWidth)||0)/A,bottom:(parseFloat(s.borderBottomWidth)||0)/A,left:(parseFloat(s.borderLeftWidth)||0)/A},v.lineWidth.top||(v.lineWidth.right?I="borderRightColor":v.lineWidth.bottom?I="borderBottomColor":v.lineWidth.left&&(I="borderLeftColor"));var k=C(m,function(T){return r.getComputedStyle(T)[I]});k!=null&&(v.lineColor=k);var O=["left","right","center","justify"];O.indexOf(s.textAlign)!==-1&&(v.halign=s.textAlign),O=["middle","bottom","top"],O.indexOf(s.verticalAlign)!==-1&&(v.valign=s.verticalAlign);var S=parseInt(s.fontSize||"");isNaN(S)||(v.fontSize=S/h);var y=o(s);y&&(v.fontStyle=y);var H=(s.fontFamily||"").toLowerCase();return j.indexOf(H)!==-1&&(v.font=H),v}p.parseCss=l;function o(j){var m="";return(j.fontWeight==="bold"||j.fontWeight==="bolder"||parseInt(j.fontWeight)>=700)&&(m="bold"),(j.fontStyle==="italic"||j.fontStyle==="oblique")&&(m+="italic"),m}function C(j,m){var u=n(j,m);if(!u)return null;var s=u.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var r=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],v=parseInt(s[4]);return v===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function n(j,m){var u=m(j);return u==="rgba(0, 0, 0, 0)"||u==="transparent"||u==="initial"||u==="inherit"?j.parentElement==null?null:n(j.parentElement,m):u}function R(j,m){var u=[j.paddingTop,j.paddingRight,j.paddingBottom,j.paddingLeft],s=96/(72/m),r=(parseInt(j.lineHeight)-parseInt(j.fontSize))/m/2,v=u.map(function(a){return parseInt(a||"0")/s}),h=(0,N.parseSpacing)(v,0);return r>h.top&&(h.top=r),r>h.bottom&&(h.bottom=r),h}},744:function(d,p){Object.defineProperty(p,"__esModule",{value:!0}),p.DocHandler=void 0;var P={},N=function(){function l(o){this.jsPDFDocument=o,this.userStyles={textColor:o.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:o.internal.getFontSize(),fontStyle:o.internal.getFont().fontStyle,font:o.internal.getFont().fontName,lineWidth:o.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:o.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return l.setDefaults=function(o,C){C===void 0&&(C=null),C?C.__autoTableDocumentDefaults=o:P=o},l.unifyColor=function(o){return Array.isArray(o)?o:typeof o=="number"?[o,o,o]:typeof o=="string"?[o]:null},l.prototype.applyStyles=function(o,C){var n,R,j;C===void 0&&(C=!1),o.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(o.fontStyle);var m=this.jsPDFDocument.internal.getFont(),u=m.fontStyle,s=m.fontName;if(o.font&&(s=o.font),o.fontStyle){u=o.fontStyle;var r=this.getFontList()[s];r&&r.indexOf(u)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(r[0]),u=r[0])}if(this.jsPDFDocument.setFont(s,u),o.fontSize&&this.jsPDFDocument.setFontSize(o.fontSize),!C){var v=l.unifyColor(o.fillColor);v&&(n=this.jsPDFDocument).setFillColor.apply(n,v),v=l.unifyColor(o.textColor),v&&(R=this.jsPDFDocument).setTextColor.apply(R,v),v=l.unifyColor(o.lineColor),v&&(j=this.jsPDFDocument).setDrawColor.apply(j,v),typeof o.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(o.lineWidth)}},l.prototype.splitTextToSize=function(o,C,n){return this.jsPDFDocument.splitTextToSize(o,C,n)},l.prototype.rect=function(o,C,n,R,j){return this.jsPDFDocument.rect(o,C,n,R,j)},l.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},l.prototype.getTextWidth=function(o){return this.jsPDFDocument.getTextWidth(o)},l.prototype.getDocument=function(){return this.jsPDFDocument},l.prototype.setPage=function(o){this.jsPDFDocument.setPage(o)},l.prototype.addPage=function(){return this.jsPDFDocument.addPage()},l.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},l.prototype.getGlobalOptions=function(){return P||{}},l.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},l.prototype.pageSize=function(){var o=this.jsPDFDocument.internal.pageSize;return o.width==null&&(o={width:o.getWidth(),height:o.getHeight()}),o},l.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},l.prototype.getLineHeightFactor=function(){var o=this.jsPDFDocument;return o.getLineHeightFactor?o.getLineHeightFactor():1.15},l.prototype.getLineHeight=function(o){return o/this.scaleFactor()*this.getLineHeightFactor()},l.prototype.pageNumber=function(){var o=this.jsPDFDocument.internal.getCurrentPageInfo();return o?o.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},l}();p.DocHandler=N},4:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.parseHtml=void 0;var N=P(903),l=P(796);function o(R,j,m,u,s){var r,v;u===void 0&&(u=!1),s===void 0&&(s=!1);var h;typeof j=="string"?h=m.document.querySelector(j):h=j;var a=Object.keys(R.getFontList()),f=R.scaleFactor(),D=[],I=[],A=[];if(!h)return console.error("Html table could not be found with input: ",j),{head:D,body:I,foot:A};for(var i=0;i<h.rows.length;i++){var w=h.rows[i],k=(v=(r=w==null?void 0:w.parentElement)===null||r===void 0?void 0:r.tagName)===null||v===void 0?void 0:v.toLowerCase(),O=C(a,f,m,w,u,s);O&&(k==="thead"?D.push(O):k==="tfoot"?A.push(O):I.push(O))}return{head:D,body:I,foot:A}}p.parseHtml=o;function C(R,j,m,u,s,r){for(var v=new l.HtmlRowInput(u),h=0;h<u.cells.length;h++){var a=u.cells[h],f=m.getComputedStyle(a);if(s||f.display!=="none"){var D=void 0;r&&(D=(0,N.parseCss)(R,a,j,f,m)),v.push({rowSpan:a.rowSpan,colSpan:a.colSpan,styles:D,_element:a,content:n(a)})}}var I=m.getComputedStyle(u);if(v.length>0&&(s||I.display!=="none"))return v}function n(R){var j=R.cloneNode(!0);return j.innerHTML=j.innerHTML.replace(/\n/g,"").replace(/ +/g," "),j.innerHTML=j.innerHTML.split(/<br.*?>/).map(function(m){return m.trim()}).join(`
`),j.innerText||j.textContent||""}},776:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.parseInput=void 0;var N=P(4),l=P(356),o=P(420),C=P(744),n=P(792);function R(h,a){var f=new C.DocHandler(h),D=f.getDocumentOptions(),I=f.getGlobalOptions();(0,n.default)(f,I,D,a);var A=(0,l.assign)({},I,D,a),i;typeof window<"u"&&(i=window);var w=j(I,D,a),k=m(I,D,a),O=u(f,A),S=r(f,A,i);return{id:a.tableId,content:S,hooks:k,styles:w,settings:O}}p.parseInput=R;function j(h,a,f){for(var D={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},I=function(k){if(k==="columnStyles"){var O=h[k],S=a[k],y=f[k];D.columnStyles=(0,l.assign)({},O,S,y)}else{var H=[h,a,f],T=H.map(function(F){return F[k]||{}});D[k]=(0,l.assign)({},T[0],T[1],T[2])}},A=0,i=Object.keys(D);A<i.length;A++){var w=i[A];I(w)}return D}function m(h,a,f){for(var D=[h,a,f],I={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},A=0,i=D;A<i.length;A++){var w=i[A];w.didParseCell&&I.didParseCell.push(w.didParseCell),w.willDrawCell&&I.willDrawCell.push(w.willDrawCell),w.didDrawCell&&I.didDrawCell.push(w.didDrawCell),w.willDrawPage&&I.willDrawPage.push(w.willDrawPage),w.didDrawPage&&I.didDrawPage.push(w.didDrawPage)}return I}function u(h,a){var f,D,I,A,i,w,k,O,S,y,H,T,F=(0,o.parseSpacing)(a.margin,40/h.scaleFactor()),_=(f=s(h,a.startY))!==null&&f!==void 0?f:F.top,B;a.showFoot===!0?B="everyPage":a.showFoot===!1?B="never":B=(D=a.showFoot)!==null&&D!==void 0?D:"everyPage";var M;a.showHead===!0?M="everyPage":a.showHead===!1?M="never":M=(I=a.showHead)!==null&&I!==void 0?I:"everyPage";var U=(A=a.useCss)!==null&&A!==void 0?A:!1,Y=a.theme||(U?"plain":"striped"),z=!!a.horizontalPageBreak,G=(i=a.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(w=a.includeHiddenHtml)!==null&&w!==void 0?w:!1,useCss:U,theme:Y,startY:_,margin:F,pageBreak:(k=a.pageBreak)!==null&&k!==void 0?k:"auto",rowPageBreak:(O=a.rowPageBreak)!==null&&O!==void 0?O:"auto",tableWidth:(S=a.tableWidth)!==null&&S!==void 0?S:"auto",showHead:M,showFoot:B,tableLineWidth:(y=a.tableLineWidth)!==null&&y!==void 0?y:0,tableLineColor:(H=a.tableLineColor)!==null&&H!==void 0?H:200,horizontalPageBreak:z,horizontalPageBreakRepeat:G,horizontalPageBreakBehaviour:(T=a.horizontalPageBreakBehaviour)!==null&&T!==void 0?T:"afterAllRows"}}function s(h,a){var f=h.getLastAutoTable(),D=h.scaleFactor(),I=h.pageNumber(),A=!1;if(f&&f.startPageNumber){var i=f.startPageNumber+f.pageNumber-1;A=i===I}return typeof a=="number"?a:(a==null||a===!1)&&A&&(f==null?void 0:f.finalY)!=null?f.finalY+20/D:null}function r(h,a,f){var D=a.head||[],I=a.body||[],A=a.foot||[];if(a.html){var i=a.includeHiddenHtml;if(f){var w=(0,N.parseHtml)(h,a.html,f,i,a.useCss)||{};D=w.head||D,I=w.body||D,A=w.foot||D}else console.error("Cannot parse html in non browser environment")}var k=a.columns||v(D,I,A);return{columns:k,head:D,body:I,foot:A}}function v(h,a,f){var D=h[0]||a[0]||f[0]||[],I=[];return Object.keys(D).filter(function(A){return A!=="_element"}).forEach(function(A){var i=1,w;Array.isArray(D)?w=D[parseInt(A)]:w=D[A],typeof w=="object"&&!Array.isArray(w)&&(i=(w==null?void 0:w.colSpan)||1);for(var k=0;k<i;k++){var O=void 0;Array.isArray(D)?O=I.length:O=A+(k>0?"_".concat(k):"");var S={dataKey:O};I.push(S)}}),I}},792:function(d,p){Object.defineProperty(p,"__esModule",{value:!0});function P(l,o,C,n){for(var R=function(s){s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),typeof s.extendWidth<"u"&&(s.tableWidth=s.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof s.margins<"u"&&(typeof s.margin>"u"&&(s.margin=s.margins),console.error("Use of deprecated option: margins, use margin instead.")),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY),!s.didDrawPage&&(s.afterPageContent||s.beforePageContent||s.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),s.didDrawPage=function(A){l.applyStyles(l.userStyles),s.beforePageContent&&s.beforePageContent(A),l.applyStyles(l.userStyles),s.afterPageContent&&s.afterPageContent(A),l.applyStyles(l.userStyles),s.afterPageAdd&&A.pageNumber>1&&A.afterPageAdd(A),l.applyStyles(l.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(A){s[A]&&console.error('The "'.concat(A,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(A){var i=A[0],w=A[1];s[w]&&(console.error("Use of deprecated option ".concat(w,". Use ").concat(i," instead")),s[i]=s[w])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(A){var i=typeof A=="string"?A:A[0],w=typeof A=="string"?A:A[1];typeof s[i]<"u"&&(typeof s.styles[w]>"u"&&(s.styles[w]=s[i]),console.error("Use of deprecated option: "+i+", use the style "+w+" instead."))});for(var r=0,v=["styles","bodyStyles","headStyles","footStyles"];r<v.length;r++){var h=v[r];N(s[h]||{})}for(var a=s.columnStyles||{},f=0,D=Object.keys(a);f<D.length;f++){var I=D[f];N(a[I]||{})}},j=0,m=[o,C,n];j<m.length;j++){var u=m[j];R(u)}}p.default=P;function N(l){l.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),l.minCellHeight||(l.minCellHeight=l.rowHeight)):l.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),l.cellWidth||(l.cellWidth=l.columnWidth))}},260:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.Column=p.Cell=p.Row=p.Table=void 0;var N=P(796),l=P(172),o=P(420),C=function(){function m(u,s){this.pageNumber=1,this.pageCount=1,this.id=u.id,this.settings=u.settings,this.styles=u.styles,this.hooks=u.hooks,this.columns=s.columns,this.head=s.head,this.body=s.body,this.foot=s.foot}return m.prototype.getHeadHeight=function(u){return this.head.reduce(function(s,r){return s+r.getMaxCellHeight(u)},0)},m.prototype.getFootHeight=function(u){return this.foot.reduce(function(s,r){return s+r.getMaxCellHeight(u)},0)},m.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},m.prototype.callCellHooks=function(u,s,r,v,h,a){for(var f=0,D=s;f<D.length;f++){var I=D[f],A=new l.CellHookData(u,this,r,v,h,a),i=I(A)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],i)return!1}return!0},m.prototype.callEndPageHooks=function(u,s){u.applyStyles(u.userStyles);for(var r=0,v=this.hooks.didDrawPage;r<v.length;r++){var h=v[r];h(new l.HookData(u,this,s))}},m.prototype.callWillDrawPageHooks=function(u,s){for(var r=0,v=this.hooks.willDrawPage;r<v.length;r++){var h=v[r];h(new l.HookData(u,this,s))}},m.prototype.getWidth=function(u){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var s=this.columns.reduce(function(v,h){return v+h.wrappedWidth},0);return s}else{var r=this.settings.margin;return u-r.left-r.right}},m}();p.Table=C;var n=function(){function m(u,s,r,v,h){h===void 0&&(h=!1),this.height=0,this.raw=u,u instanceof N.HtmlRowInput&&(this.raw=u._element,this.element=u._element),this.index=s,this.section=r,this.cells=v,this.spansMultiplePages=h}return m.prototype.getMaxCellHeight=function(u){var s=this;return u.reduce(function(r,v){var h;return Math.max(r,((h=s.cells[v.index])===null||h===void 0?void 0:h.height)||0)},0)},m.prototype.hasRowSpan=function(u){var s=this;return u.filter(function(r){var v=s.cells[r.index];return v?v.rowSpan>1:!1}).length>0},m.prototype.canEntireRowFit=function(u,s){return this.getMaxCellHeight(s)<=u},m.prototype.getMinimumRowHeight=function(u,s){var r=this;return u.reduce(function(v,h){var a=r.cells[h.index];if(!a)return 0;var f=s.getLineHeight(a.styles.fontSize),D=a.padding("vertical"),I=D+f;return I>v?I:v},0)},m}();p.Row=n;var R=function(){function m(u,s,r){var v,h;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=s,this.section=r,this.raw=u;var a=u;u!=null&&typeof u=="object"&&!Array.isArray(u)?(this.rowSpan=u.rowSpan||1,this.colSpan=u.colSpan||1,a=(h=(v=u.content)!==null&&v!==void 0?v:u.title)!==null&&h!==void 0?h:u,u._element&&(this.raw=u._element)):(this.rowSpan=1,this.colSpan=1);var f=a!=null?""+a:"",D=/\r\n|\r|\n/g;this.text=f.split(D)}return m.prototype.getTextPos=function(){var u;if(this.styles.valign==="top")u=this.y+this.padding("top");else if(this.styles.valign==="bottom")u=this.y+this.height-this.padding("bottom");else{var s=this.height-this.padding("vertical");u=this.y+s/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var v=this.width-this.padding("horizontal");r=this.x+v/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:u}},m.prototype.getContentHeight=function(u,s){s===void 0&&(s=1.15);var r=Array.isArray(this.text)?this.text.length:1,v=this.styles.fontSize/u*s,h=r*v+this.padding("vertical");return Math.max(h,this.styles.minCellHeight)},m.prototype.padding=function(u){var s=(0,o.parseSpacing)(this.styles.cellPadding,0);return u==="vertical"?s.top+s.bottom:u==="horizontal"?s.left+s.right:s[u]},m}();p.Cell=R;var j=function(){function m(u,s,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=u,this.raw=s,this.index=r}return m.prototype.getMaxCustomCellWidth=function(u){for(var s=0,r=0,v=u.allRows();r<v.length;r++){var h=v[r],a=h.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(s=Math.max(s,a.styles.cellWidth))}return s},m}();p.Column=j},356:function(d,p){Object.defineProperty(p,"__esModule",{value:!0}),p.assign=void 0;function P(N,l,o,C,n){if(N==null)throw new TypeError("Cannot convert undefined or null to object");for(var R=Object(N),j=1;j<arguments.length;j++){var m=arguments[j];if(m!=null)for(var u in m)Object.prototype.hasOwnProperty.call(m,u)&&(R[u]=m[u])}return R}p.assign=P},972:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.createTable=void 0;var N=P(744),l=P(260),o=P(324),C=P(796),n=P(356);function R(h,a){var f=new N.DocHandler(h),D=j(a,f.scaleFactor()),I=new l.Table(a,D);return(0,o.calculateWidths)(f,I),f.applyStyles(f.userStyles),I}p.createTable=R;function j(h,a){var f=h.content,D=r(f.columns);if(f.head.length===0){var I=u(D,"head");I&&f.head.push(I)}if(f.foot.length===0){var I=u(D,"foot");I&&f.foot.push(I)}var A=h.settings.theme,i=h.styles;return{columns:D,head:m("head",f.head,D,i,A,a),body:m("body",f.body,D,i,A,a),foot:m("foot",f.foot,D,i,A,a)}}function m(h,a,f,D,I,A){var i={},w=a.map(function(k,O){for(var S=0,y={},H=0,T=0,F=0,_=f;F<_.length;F++){var B=_[F];if(i[B.index]==null||i[B.index].left===0)if(T===0){var M=void 0;Array.isArray(k)?M=k[B.index-H-S]:M=k[B.dataKey];var U={};typeof M=="object"&&!Array.isArray(M)&&(U=(M==null?void 0:M.styles)||{});var Y=v(h,B,O,I,D,A,U),z=new l.Cell(M,Y,h);y[B.dataKey]=z,y[B.index]=z,T=z.colSpan-1,i[B.index]={left:z.rowSpan-1,times:T}}else T--,H++;else i[B.index].left--,T=i[B.index].times,S++}return new l.Row(k,O,h,y)});return w}function u(h,a){var f={};return h.forEach(function(D){if(D.raw!=null){var I=s(a,D.raw);I!=null&&(f[D.dataKey]=I)}}),Object.keys(f).length>0?f:null}function s(h,a){if(h==="head"){if(typeof a=="object")return a.header||a.title||null;if(typeof a=="string"||typeof a=="number")return a}else if(h==="foot"&&typeof a=="object")return a.footer;return null}function r(h){return h.map(function(a,f){var D,I,A;return typeof a=="object"?A=(I=(D=a.dataKey)!==null&&D!==void 0?D:a.key)!==null&&I!==void 0?I:f:A=f,new l.Column(A,a,f)})}function v(h,a,f,D,I,A,i){var w=(0,C.getTheme)(D),k;h==="head"?k=I.headStyles:h==="body"?k=I.bodyStyles:h==="foot"&&(k=I.footStyles);var O=(0,n.assign)({},w.table,w[h],I.styles,k),S=I.columnStyles[a.dataKey]||I.columnStyles[a.index]||{},y=h==="body"?S:{},H=h==="body"&&f%2===0?(0,n.assign)({},w.alternateRow,I.alternateRowStyles):{},T=(0,C.defaultStyles)(A),F=(0,n.assign)({},T,O,H,y);return(0,n.assign)(F,i)}},664:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.addPage=p.drawTable=void 0;var N=P(420),l=P(260),o=P(744),C=P(356),n=P(136),R=P(224);function j(S,y){var H=y.settings,T=H.startY,F=H.margin,_={x:F.left,y:T},B=y.getHeadHeight(y.columns)+y.getFootHeight(y.columns),M=T+F.bottom+B;if(H.pageBreak==="avoid"){var U=y.body,Y=U.reduce(function(Q,te){return Q+te.height},0);M+=Y}var z=new o.DocHandler(S);(H.pageBreak==="always"||H.startY!=null&&M>z.pageSize().height)&&(O(z),_.y=F.top),y.callWillDrawPageHooks(z,_);var G=(0,C.assign)({},_);y.startPageNumber=z.pageNumber(),H.horizontalPageBreak?m(z,y,G,_):(z.applyStyles(z.userStyles),(H.showHead==="firstPage"||H.showHead==="everyPage")&&y.head.forEach(function(Q){return I(z,y,Q,_,y.columns)}),z.applyStyles(z.userStyles),y.body.forEach(function(Q,te){var le=te===y.body.length-1;D(z,y,Q,le,G,_,y.columns)}),z.applyStyles(z.userStyles),(H.showFoot==="lastPage"||H.showFoot==="everyPage")&&y.foot.forEach(function(Q){return I(z,y,Q,_,y.columns)})),(0,N.addTableBorder)(z,y,G,_),y.callEndPageHooks(z,_),y.finalY=_.y,S.lastAutoTable=y,S.previousAutoTable=y,S.autoTable&&(S.autoTable.previous=y),z.applyStyles(z.userStyles)}p.drawTable=j;function m(S,y,H,T){var F=(0,R.calculateAllColumnsCanFitInPage)(S,y),_=y.settings;if(_.horizontalPageBreakBehaviour==="afterAllRows")F.forEach(function(Y,z){S.applyStyles(S.userStyles),z>0?k(S,y,H,T,Y.columns,!0):u(S,y,T,Y.columns),s(S,y,H,T,Y.columns),v(S,y,T,Y.columns)});else for(var B=-1,M=F[0],U=function(){var Y=B;if(M){S.applyStyles(S.userStyles);var z=M.columns;B>=0?k(S,y,H,T,z,!0):u(S,y,T,z),Y=r(S,y,B+1,T,z),v(S,y,T,z)}var G=Y-B;F.slice(1).forEach(function(Q){S.applyStyles(S.userStyles),k(S,y,H,T,Q.columns,!0),r(S,y,B+1,T,Q.columns,G),v(S,y,T,Q.columns)}),B=Y};B<y.body.length-1;)U()}function u(S,y,H,T){var F=y.settings;S.applyStyles(S.userStyles),(F.showHead==="firstPage"||F.showHead==="everyPage")&&y.head.forEach(function(_){return I(S,y,_,H,T)})}function s(S,y,H,T,F){S.applyStyles(S.userStyles),y.body.forEach(function(_,B){var M=B===y.body.length-1;D(S,y,_,M,H,T,F)})}function r(S,y,H,T,F,_){S.applyStyles(S.userStyles),_=_??y.body.length;var B=Math.min(H+_,y.body.length),M=-1;return y.body.slice(H,B).forEach(function(U,Y){var z=H+Y===y.body.length-1,G=w(S,y,z,T);U.canEntireRowFit(G,F)&&(I(S,y,U,T,F),M=H+Y)}),M}function v(S,y,H,T){var F=y.settings;S.applyStyles(S.userStyles),(F.showFoot==="lastPage"||F.showFoot==="everyPage")&&y.foot.forEach(function(_){return I(S,y,_,H,T)})}function h(S,y,H){var T=H.getLineHeight(S.styles.fontSize),F=S.padding("vertical"),_=Math.floor((y-F)/T);return Math.max(0,_)}function a(S,y,H,T){var F={};S.spansMultiplePages=!0,S.height=0;for(var _=0,B=0,M=H.columns;B<M.length;B++){var U=M[B],Y=S.cells[U.index];if(Y){Array.isArray(Y.text)||(Y.text=[Y.text]);var z=new l.Cell(Y.raw,Y.styles,Y.section);z=(0,C.assign)(z,Y),z.text=[];var G=h(Y,y,T);Y.text.length>G&&(z.text=Y.text.splice(G,Y.text.length));var Q=T.scaleFactor(),te=T.getLineHeightFactor();Y.contentHeight=Y.getContentHeight(Q,te),Y.contentHeight>=y&&(Y.contentHeight=y,z.styles.minCellHeight-=y),Y.contentHeight>S.height&&(S.height=Y.contentHeight),z.contentHeight=z.getContentHeight(Q,te),z.contentHeight>_&&(_=z.contentHeight),F[U.index]=z}}var le=new l.Row(S.raw,-1,S.section,F,!0);le.height=_;for(var Ee=0,Je=H.columns;Ee<Je.length;Ee++){var U=Je[Ee],z=le.cells[U.index];z&&(z.height=le.height);var Y=S.cells[U.index];Y&&(Y.height=S.height)}return le}function f(S,y,H,T){var F=S.pageSize().height,_=T.settings.margin,B=_.top+_.bottom,M=F-B;y.section==="body"&&(M-=T.getHeadHeight(T.columns)+T.getFootHeight(T.columns));var U=y.getMinimumRowHeight(T.columns,S),Y=U<H;if(U>M)return console.error("Will not be able to print row ".concat(y.index," correctly since it's minimum height is larger than page height")),!0;if(!Y)return!1;var z=y.hasRowSpan(T.columns),G=y.getMaxCellHeight(T.columns)>M;return G?(z&&console.error("The content of row ".concat(y.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(z||T.settings.rowPageBreak==="avoid")}function D(S,y,H,T,F,_,B){var M=w(S,y,T,_);if(H.canEntireRowFit(M,B))I(S,y,H,_,B);else if(f(S,H,M,y)){var U=a(H,M,y,S);I(S,y,H,_,B),k(S,y,F,_,B),D(S,y,U,T,F,_,B)}else k(S,y,F,_,B),D(S,y,H,T,F,_,B)}function I(S,y,H,T,F){T.x=y.settings.margin.left;for(var _=0,B=F;_<B.length;_++){var M=B[_],U=H.cells[M.index];if(!U){T.x+=M.width;continue}S.applyStyles(U.styles),U.x=T.x,U.y=T.y;var Y=y.callCellHooks(S,y.hooks.willDrawCell,U,H,M,T);if(Y===!1){T.x+=M.width;continue}A(S,U,T);var z=U.getTextPos();(0,n.default)(U.text,z.x,z.y,{halign:U.styles.halign,valign:U.styles.valign,maxWidth:Math.ceil(U.width-U.padding("left")-U.padding("right"))},S.getDocument()),y.callCellHooks(S,y.hooks.didDrawCell,U,H,M,T),T.x+=M.width}T.y+=H.height}function A(S,y,H){var T=y.styles;if(S.getDocument().setFillColor(S.getDocument().getFillColor()),typeof T.lineWidth=="number"){var F=(0,N.getFillStyle)(T.lineWidth,T.fillColor);F&&S.rect(y.x,H.y,y.width,y.height,F)}else typeof T.lineWidth=="object"&&(T.fillColor&&S.rect(y.x,H.y,y.width,y.height,"F"),i(S,y,H,T.lineWidth))}function i(S,y,H,T){var F,_,B,M;T.top&&(F=H.x,_=H.y,B=H.x+y.width,M=H.y,T.right&&(B+=.5*T.right),T.left&&(F-=.5*T.left),U(T.top,F,_,B,M)),T.bottom&&(F=H.x,_=H.y+y.height,B=H.x+y.width,M=H.y+y.height,T.right&&(B+=.5*T.right),T.left&&(F-=.5*T.left),U(T.bottom,F,_,B,M)),T.left&&(F=H.x,_=H.y,B=H.x,M=H.y+y.height,T.top&&(_-=.5*T.top),T.bottom&&(M+=.5*T.bottom),U(T.left,F,_,B,M)),T.right&&(F=H.x+y.width,_=H.y,B=H.x+y.width,M=H.y+y.height,T.top&&(_-=.5*T.top),T.bottom&&(M+=.5*T.bottom),U(T.right,F,_,B,M));function U(Y,z,G,Q,te){S.getDocument().setLineWidth(Y),S.getDocument().line(z,G,Q,te,"S")}}function w(S,y,H,T){var F=y.settings.margin.bottom,_=y.settings.showFoot;return(_==="everyPage"||_==="lastPage"&&H)&&(F+=y.getFootHeight(y.columns)),S.pageSize().height-T.y-F}function k(S,y,H,T,F,_){F===void 0&&(F=[]),_===void 0&&(_=!1),S.applyStyles(S.userStyles),y.settings.showFoot==="everyPage"&&!_&&y.foot.forEach(function(M){return I(S,y,M,T,F)}),y.callEndPageHooks(S,T);var B=y.settings.margin;(0,N.addTableBorder)(S,y,H,T),O(S),y.pageNumber++,y.pageCount++,T.x=B.left,T.y=B.top,H.y=B.top,y.callWillDrawPageHooks(S,T),y.settings.showHead==="everyPage"&&(y.head.forEach(function(M){return I(S,y,M,T,F)}),S.applyStyles(S.userStyles))}p.addPage=k;function O(S){var y=S.pageNumber();S.setPage(y+1);var H=S.pageNumber();return H===y?(S.addPage(),!0):!1}},224:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.calculateAllColumnsCanFitInPage=void 0;var N=P(420);function l(C,n,R){var j;R===void 0&&(R={});var m=(0,N.getPageAvailableWidth)(C,n),u=new Map,s=[],r=[],v=[];n.settings.horizontalPageBreakRepeat,Array.isArray(n.settings.horizontalPageBreakRepeat)?v=n.settings.horizontalPageBreakRepeat:(typeof n.settings.horizontalPageBreakRepeat=="string"||typeof n.settings.horizontalPageBreakRepeat=="number")&&(v=[n.settings.horizontalPageBreakRepeat]),v.forEach(function(D){var I=n.columns.find(function(A){return A.dataKey===D||A.index===D});I&&!u.has(I.index)&&(u.set(I.index,!0),s.push(I.index),r.push(n.columns[I.index]),m-=I.wrappedWidth)});for(var h=!0,a=(j=R==null?void 0:R.start)!==null&&j!==void 0?j:0;a<n.columns.length;){if(u.has(a)){a++;continue}var f=n.columns[a].wrappedWidth;if(h||m>=f)h=!1,s.push(a),r.push(n.columns[a]),m-=f;else break;a++}return{colIndexes:s,columns:r,lastIndex:a-1}}function o(C,n){for(var R=[],j=0;j<n.columns.length;j++){var m=l(C,n,{start:j});m.columns.length&&(R.push(m),j=m.lastIndex)}return R}p.calculateAllColumnsCanFitInPage=o},324:function(d,p,P){Object.defineProperty(p,"__esModule",{value:!0}),p.ellipsize=p.resizeColumns=p.calculateWidths=void 0;var N=P(420);function l(s,r){o(s,r);var v=[],h=0;r.columns.forEach(function(f){var D=f.getMaxCustomCellWidth(r);D?f.width=D:(f.width=f.wrappedWidth,v.push(f)),h+=f.width});var a=r.getWidth(s.pageSize().width)-h;a&&(a=C(v,a,function(f){return Math.max(f.minReadableWidth,f.minWidth)})),a&&(a=C(v,a,function(f){return f.minWidth})),a=Math.abs(a),!r.settings.horizontalPageBreak&&a>.1/s.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),R(r),j(r,s),n(r)}p.calculateWidths=l;function o(s,r){var v=s.scaleFactor(),h=r.settings.horizontalPageBreak,a=(0,N.getPageAvailableWidth)(s,r);r.allRows().forEach(function(f){for(var D=0,I=r.columns;D<I.length;D++){var A=I[D],i=f.cells[A.index];if(i){var w=r.hooks.didParseCell;r.callCellHooks(s,w,i,f,A,null);var k=i.padding("horizontal");i.contentWidth=(0,N.getStringWidth)(i.text,i.styles,s)+k;var O=(0,N.getStringWidth)(i.text.join(" ").split(/[^\S\u00A0]+/),i.styles,s);if(i.minReadableWidth=O+i.padding("horizontal"),typeof i.styles.cellWidth=="number")i.minWidth=i.styles.cellWidth,i.wrappedWidth=i.styles.cellWidth;else if(i.styles.cellWidth==="wrap"||h===!0)i.contentWidth>a?(i.minWidth=a,i.wrappedWidth=a):(i.minWidth=i.contentWidth,i.wrappedWidth=i.contentWidth);else{var S=10/v;i.minWidth=i.styles.minCellWidth||S,i.wrappedWidth=i.contentWidth,i.minWidth>i.wrappedWidth&&(i.wrappedWidth=i.minWidth)}}}}),r.allRows().forEach(function(f){for(var D=0,I=r.columns;D<I.length;D++){var A=I[D],i=f.cells[A.index];if(i&&i.colSpan===1)A.wrappedWidth=Math.max(A.wrappedWidth,i.wrappedWidth),A.minWidth=Math.max(A.minWidth,i.minWidth),A.minReadableWidth=Math.max(A.minReadableWidth,i.minReadableWidth);else{var w=r.styles.columnStyles[A.dataKey]||r.styles.columnStyles[A.index]||{},k=w.cellWidth||w.minCellWidth;k&&typeof k=="number"&&(A.minWidth=k,A.wrappedWidth=k)}i&&(i.colSpan>1&&!A.minWidth&&(A.minWidth=i.minWidth),i.colSpan>1&&!A.wrappedWidth&&(A.wrappedWidth=i.minWidth))}})}function C(s,r,v){for(var h=r,a=s.reduce(function(S,y){return S+y.wrappedWidth},0),f=0;f<s.length;f++){var D=s[f],I=D.wrappedWidth/a,A=h*I,i=D.width+A,w=v(D),k=i<w?w:i;r-=k-D.width,D.width=k}if(r=Math.round(r*1e10)/1e10,r){var O=s.filter(function(S){return r<0?S.width>v(S):!0});O.length&&(r=C(O,r,v))}return r}p.resizeColumns=C;function n(s){for(var r={},v=1,h=s.allRows(),a=0;a<h.length;a++)for(var f=h[a],D=0,I=s.columns;D<I.length;D++){var A=I[D],i=r[A.index];if(v>1)v--,delete f.cells[A.index];else if(i)i.cell.height+=f.height,v=i.cell.colSpan,delete f.cells[A.index],i.left--,i.left<=1&&delete r[A.index];else{var w=f.cells[A.index];if(!w)continue;if(w.height=f.height,w.rowSpan>1){var k=h.length-a,O=w.rowSpan>k?k:w.rowSpan;r[A.index]={cell:w,left:O,row:f}}}}}function R(s){for(var r=s.allRows(),v=0;v<r.length;v++)for(var h=r[v],a=null,f=0,D=0,I=0;I<s.columns.length;I++){var A=s.columns[I];if(D-=1,D>1&&s.columns[I+1])f+=A.width,delete h.cells[A.index];else if(a){var i=a;delete h.cells[A.index],a=null,i.width=A.width+f}else{var i=h.cells[A.index];if(!i)continue;if(D=i.colSpan,f=0,i.colSpan>1){a=i,f+=A.width;continue}i.width=A.width+f}}}function j(s,r){for(var v={count:0,height:0},h=0,a=s.allRows();h<a.length;h++){for(var f=a[h],D=0,I=s.columns;D<I.length;D++){var A=I[D],i=f.cells[A.index];if(i){r.applyStyles(i.styles,!0);var w=i.width-i.padding("horizontal");if(i.styles.overflow==="linebreak")i.text=r.splitTextToSize(i.text,w+1/r.scaleFactor(),{fontSize:i.styles.fontSize});else if(i.styles.overflow==="ellipsize")i.text=m(i.text,w,i.styles,r,"...");else if(i.styles.overflow==="hidden")i.text=m(i.text,w,i.styles,r,"");else if(typeof i.styles.overflow=="function"){var k=i.styles.overflow(i.text,w);typeof k=="string"?i.text=[k]:i.text=k}i.contentHeight=i.getContentHeight(r.scaleFactor(),r.getLineHeightFactor());var O=i.contentHeight/i.rowSpan;i.rowSpan>1&&v.count*v.height<O*i.rowSpan?v={height:O,count:i.rowSpan}:v&&v.count>0&&v.height>O&&(O=v.height),O>f.height&&(f.height=O)}}v.count--}}function m(s,r,v,h,a){return s.map(function(f){return u(f,r,v,h,a)})}p.ellipsize=m;function u(s,r,v,h,a){var f=1e4*h.scaleFactor();if(r=Math.ceil(r*f)/f,r>=(0,N.getStringWidth)(s,v,h))return s;for(;r<(0,N.getStringWidth)(s+a,v,h)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+a}},964:function(d){if(typeof g>"u"){var p=new Error("Cannot find module 'undefined'");throw p.code="MODULE_NOT_FOUND",p}d.exports=g}},E={};function b(d){var p=E[d];if(p!==void 0)return p.exports;var P=E[d]={exports:{}};return x[d].call(P.exports,P,P.exports,b),P.exports}var W={};return function(){var d=W;Object.defineProperty(d,"__esModule",{value:!0}),d.Cell=d.Column=d.Row=d.Table=d.CellHookData=d.__drawTable=d.__createTable=d.applyPlugin=void 0;var p=b(340),P=b(776),N=b(664),l=b(972),o=b(260);Object.defineProperty(d,"Table",{enumerable:!0,get:function(){return o.Table}});var C=b(172);Object.defineProperty(d,"CellHookData",{enumerable:!0,get:function(){return C.CellHookData}});var n=b(260);Object.defineProperty(d,"Cell",{enumerable:!0,get:function(){return n.Cell}}),Object.defineProperty(d,"Column",{enumerable:!0,get:function(){return n.Column}}),Object.defineProperty(d,"Row",{enumerable:!0,get:function(){return n.Row}});function R(r){(0,p.default)(r)}d.applyPlugin=R;function j(r,v){var h=(0,P.parseInput)(r,v),a=(0,l.createTable)(r,h);(0,N.drawTable)(r,a)}function m(r,v){var h=(0,P.parseInput)(r,v);return(0,l.createTable)(r,h)}d.__createTable=m;function u(r,v){(0,N.drawTable)(r,v)}d.__drawTable=u;try{var s=b(964);s.jsPDF&&(s=s.jsPDF),R(s)}catch{}d.default=j}(),W}()})})(ms);const oe=(t,c="Rs.")=>{const g=parseFloat(String(t))||0;return`${c==="₹"?"Rs.":c} ${g.toFixed(2)}`},qe=(t,c,g={})=>{const x=new Wt,E=x.internal.pageSize.getWidth(),b=20,W=E-2*b;let d=20;const p=g.taxLabel||"Tax",P=ne(t.items,t.taxRate,t.discount),N=c.currency||"Rs.";x.setFontSize(16),x.setFont("helvetica","bold"),x.text(c.name||"Business Name",b,d),x.setFontSize(12),x.text("INVOICE",E-b,d,{align:"right"}),d+=7,x.setFontSize(10),x.setFont("helvetica","normal"),x.text(t.invoiceNumber,E-b,d,{align:"right"}),d=30,x.setFontSize(9);const l=[];c.address&&l.push(c.address),(c.city||c.state)&&l.push(`${c.city||""}${c.city&&c.state?", ":""}${c.state||""} ${c.pincode||""}`.trim()),c.phone&&l.push(`Phone: ${c.phone}`),c.email&&l.push(`Email: ${c.email}`),c.taxId&&l.push(`${p} ID: ${c.taxId}`),l.forEach(s=>{x.text(s,b,d),d+=4}),d+=5,x.setLineWidth(.5),x.line(b,d,E-b,d),d+=10,x.setFont("helvetica","bold"),x.text("Bill To:",b,d),x.text("Invoice Details:",E/2+10,d),d+=6,x.setFont("helvetica","normal");const o=d;x.text(t.customerName||"Customer",b,o);let C=o+4;if(t.customerAddress){const s=x.splitTextToSize(t.customerAddress,W/2-20);x.text(s,b,C),C+=s.length*4}t.customerPhone&&(x.text(`Phone: ${t.customerPhone}`,b,C),C+=4),t.customerEmail&&x.text(`Email: ${t.customerEmail}`,b,C);const n=E/2+10;x.text(`Date: ${ue(t.date)}`,n,o),d=Math.max(C,o+12)+10;const R=t.items.map((s,r)=>[(r+1).toString(),s.name,s.quantity.toString(),oe(s.price,N),oe(s.quantity*s.price,N)]);x.autoTable({startY:d,head:[["#","Description","Qty","Rate","Amount"]],body:R,margin:{left:b,right:b},tableWidth:W,styles:{fontSize:9,cellPadding:4,lineColor:[0,0,0],lineWidth:.1,textColor:[0,0,0]},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.3},bodyStyles:{fillColor:[255,255,255]},columnStyles:{0:{cellWidth:12,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:20,halign:"center"},3:{cellWidth:30,halign:"right"},4:{cellWidth:35,halign:"right"}}}),d=x.lastAutoTable.finalY+10;const j=E-b-80,m=E-b;if(x.setFontSize(9),x.text("Subtotal:",j,d),x.text(oe(P.subtotal,N),m,d,{align:"right"}),t.discount>0&&(d+=6,x.text(`Discount (${t.discount}%):`,j,d),x.text(`-${oe(P.discountAmount,N)}`,m,d,{align:"right"})),t.taxRate>0&&(d+=6,x.text(`${p} (${t.taxRate}%):`,j,d),x.text(oe(P.taxAmount,N),m,d,{align:"right"})),d+=4,x.setLineWidth(.3),x.line(j-5,d,m,d),d+=6,x.setFont("helvetica","bold"),x.setFontSize(11),x.text("TOTAL:",j,d),x.text(oe(P.total,N),m,d,{align:"right"}),d+=15,x.setFont("helvetica","normal"),x.setFontSize(9),x.text("Amount in Words:",b,d),d+=5,x.setFont("helvetica","bold"),x.text(`${ie(Math.floor(P.total))} Only`,b,d),t.notes){d+=12,x.setFont("helvetica","normal"),x.setFontSize(9),x.text("Notes:",b,d),d+=5;const s=x.splitTextToSize(t.notes,W);x.text(s,b,d)}const u=x.internal.pageSize.getHeight()-20;return x.setLineWidth(.3),x.line(b,u-5,E-b,u-5),x.setFont("helvetica","normal"),x.setFontSize(8),x.text("Thank you for your business!",E/2,u,{align:"center"}),x},Ie=(t,c,g)=>{qe(t,c,g).save(`${t.invoiceNumber}.pdf`)},xs=(t,c,g)=>qe(t,c,g).output("blob"),fs=(t,c,g)=>{const E=qe(t,c,g).output("blob"),b=URL.createObjectURL(E);window.open(b,"_blank")};function gs(){const{invoices:t,loading:c,deleteInvoice:g}=be(),{business:x,loading:E}=ge(),{settings:b,loading:W}=Ae(),d=c||E||W,[p,P]=L.useState(""),[N,l]=L.useState("all"),[o,C]=L.useState("date"),[n,R]=L.useState("desc"),[j,m]=L.useState(null),[u,s]=L.useState(null),[r,v]=L.useState(null),h=L.useMemo(()=>{let i=[...t];if(p){const w=p.toLowerCase();i=i.filter(k=>{var O,S,y,H;return((O=k.customerName)==null?void 0:O.toLowerCase().includes(w))||((S=k.invoiceNumber)==null?void 0:S.toLowerCase().includes(w))||((y=k.customerEmail)==null?void 0:y.toLowerCase().includes(w))||((H=k.customerPhone)==null?void 0:H.includes(w))})}return N!=="all"&&(i=i.filter(w=>w.status===N)),i.sort((w,k)=>{var y,H;let O,S;if(o==="date")O=new Date(w.createdAt||w.date).getTime(),S=new Date(k.createdAt||k.date).getTime();else if(o==="amount"){const T=ne(w.items,w.taxRate,w.discount),F=ne(k.items,k.taxRate,k.discount);O=T.total,S=F.total}else o==="customer"?(O=((y=w.customerName)==null?void 0:y.toLowerCase())||"",S=((H=k.customerName)==null?void 0:H.toLowerCase())||""):(O=w.invoiceNumber,S=k.invoiceNumber);return n==="asc"?O>S?1:-1:O<S?1:-1}),i},[t,p,N,o,n]),a=L.useMemo(()=>({total:t.length,draft:t.filter(i=>i.status==="draft").length,pending:t.filter(i=>i.status==="pending").length,paid:t.filter(i=>i.status==="paid").length,overdue:t.filter(i=>i.status==="overdue").length}),[t]),f=async i=>{v(i);try{await g(i)}catch(w){console.error("Failed to delete invoice:",w)}finally{v(null),s(null),m(null)}},D=i=>{Ie(i,x,b),m(null)},I=i=>{o===i?R(n==="asc"?"desc":"asc"):(C(i),R("desc"))},A=i=>{P(i.target.value)};return d&&t.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading invoices..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Invoices"}),e.jsxs("p",{className:"text-midnight-400",children:[h.length," of ",t.length," invoices"]})]}),e.jsxs(q,{to:"/invoices/new",className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"New Invoice"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"All",count:a.total},{key:"draft",label:"Draft",count:a.draft},{key:"pending",label:"Pending",count:a.pending},{key:"paid",label:"Paid",count:a.paid},{key:"overdue",label:"Overdue",count:a.overdue}].map(i=>e.jsxs("button",{onClick:()=>l(i.key),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors ${N===i.key?"bg-teal-500/20 text-teal-400":"bg-midnight-700/50 text-midnight-300 hover:bg-midnight-700"}`,children:[i.label,e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-midnight-800",children:i.count})]},i.key))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search invoices...",value:p,onChange:A,className:"input-field pl-12"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>I("date"),className:`btn-secondary flex items-center gap-2 ${o==="date"?"border-teal-500":""}`,children:[e.jsx(Bt,{className:"w-4 h-4"}),"Date",o==="date"&&(n==="asc"?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}))]}),e.jsxs("button",{onClick:()=>I("amount"),className:`btn-secondary flex items-center gap-2 ${o==="amount"?"border-teal-500":""}`,children:[e.jsx(ps,{className:"w-4 h-4"}),"Amount",o==="amount"&&(n==="asc"?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}))]})]})]}),h.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(me,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:p||N!=="all"?"Try adjusting your search or filters":"Create your first invoice to get started"}),!p&&N==="all"&&e.jsxs(q,{to:"/invoices/new",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Create Invoice"]})]}):e.jsx("div",{className:"space-y-3",children:h.map(i=>{const w=ne(i.items,i.taxRate,i.discount);return e.jsx("div",{className:"glass rounded-xl p-4 sm:p-6 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(q,{to:`/invoices/view/${i.id}`,className:"text-lg font-semibold text-white hover:text-teal-400 transition-colors truncate",children:i.customerName}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${$e(i.status)}`,children:Ge(i.status)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-midnight-400",children:[e.jsx("span",{className:"font-mono",children:i.invoiceNumber}),e.jsx("span",{children:"•"}),e.jsx("span",{children:ue(i.date)}),i.items.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[i.items.length," item",i.items.length>1?"s":""]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:J(w.total,x.currency)})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>m(j===i.id?null:i.id),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx(Mt,{className:"w-5 h-5 text-midnight-400"})}),j===i.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>m(null)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:[e.jsxs(q,{to:`/invoices/view/${i.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>m(null),children:[e.jsx(mt,{className:"w-4 h-4 text-midnight-400"}),"View Invoice"]}),e.jsxs(q,{to:`/invoices/edit/${i.id}`,className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors",onClick:()=>m(null),children:[e.jsx(ye,{className:"w-4 h-4 text-midnight-400"}),"Edit Invoice"]}),e.jsxs("button",{onClick:()=>D(i),className:"flex items-center gap-3 px-4 py-3 text-white hover:bg-midnight-700 transition-colors w-full",children:[e.jsx(ut,{className:"w-4 h-4 text-midnight-400"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>{s(i.id),m(null)},className:"flex items-center gap-3 px-4 py-3 text-coral-400 hover:bg-coral-500/10 transition-colors w-full",children:[e.jsx(we,{className:"w-4 h-4"}),"Delete"]})]})]})]})]})]})},i.id)})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Invoice?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>s(null),className:"btn-secondary",disabled:r!==null,children:"Cancel"}),e.jsx("button",{onClick:()=>f(u),className:"btn-danger",disabled:r!==null,children:r?"Deleting...":"Delete"})]})]})})]})}function ps(t){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),e.jsx("path",{d:"M12 18V6"})]})}function lt(){const t=Ne(),{id:c}=ot(),g=!!c,{invoice:x,loading:E}=yt(c),{invoices:b}=be(),{customers:W}=jt(),{products:d}=bt(),{business:p}=ge(),{settings:P}=Ae(),{saveInvoice:N}=be(),[l,o]=L.useState({id:ee(),invoiceNumber:"",date:ue(new Date,"input"),customerName:"",customerEmail:"",customerPhone:"",customerAddress:"",items:[{id:ee(),name:"",quantity:1,price:0}],taxRate:0,discount:0,notes:"",status:"draft",user_id:""}),[C,n]=L.useState(!1),[R,j]=L.useState(null),[m,u]=L.useState(""),[s,r]=L.useState(""),[v,h]=L.useState({}),[a,f]=L.useState(!1);L.useEffect(()=>{if(g)x&&o({...x,date:ue(x.date,"input")});else if(p&&P&&b){const F=P.invoicePrefix||"INV",_=new Date().getFullYear(),B=`${F}-${_}-`,M=b.map(G=>G.invoiceNumber).filter(G=>G.startsWith(B)).map(G=>parseInt(G.split("-").pop()||"0")).filter(G=>!isNaN(G)),Y=((M.length>0?Math.max(...M):0)+1).toString().padStart(4,"0"),z=`${B}${Y}`;o(G=>({...G,invoiceNumber:G.invoiceNumber||z,taxRate:G.taxRate||p.taxRate||P.taxRate||0}))}},[g,x,p,P,b]);const D=L.useMemo(()=>ne(l.items,l.taxRate,l.discount),[l.items,l.taxRate,l.discount]),I=L.useMemo(()=>m?W.filter(F=>{var _;return F.name.toLowerCase().includes(m.toLowerCase())||((_=F.phone)==null?void 0:_.includes(m))}).slice(0,5):W.slice(0,5),[W,m]),A=L.useMemo(()=>s?d.filter(F=>F.name.toLowerCase().includes(s.toLowerCase())).slice(0,5):d.slice(0,5),[d,s]),i=F=>{const{name:_,value:B}=F.target;o(M=>({...M,[_]:B})),v[_]&&h(M=>({...M,[_]:null}))},w=(F,_,B)=>{o(M=>({...M,items:M.items.map(U=>U.id===F?{...U,[_]:B}:U)}))},k=()=>{o(F=>({...F,items:[...F.items,{id:ee(),name:"",quantity:1,price:0}]}))},O=F=>{l.items.length>1&&o(_=>({..._,items:_.items.filter(B=>B.id!==F)}))},S=F=>{o(_=>({..._,customerName:F.name,customerEmail:F.email||"",customerPhone:F.phone||"",customerAddress:F.address||""})),n(!1),u("")},y=(F,_)=>{o(B=>({...B,items:B.items.map(M=>M.id===_?{...M,name:F.name,price:F.price}:M)})),j(null),r("")},H=()=>{const F={};return l.customerName.trim()||(F.customerName="Customer name is required"),l.items.some(_=>!_.name.trim())&&(F.items="All items must have a name"),l.items.some(_=>_.quantity<=0)&&(F.items="Quantity must be greater than 0"),h(F),Object.keys(F).length===0},T=async(F="draft")=>{if(H()){f(!0);try{const _={...l,status:F,date:new Date(l.date).toISOString()};await N(_),t(`/invoices/view/${l.id}`)}catch(_){console.error("Failed to save invoice:",_)}finally{f(!1)}}};return g&&E?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading invoice..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2.5 -ml-1 rounded-lg hover:bg-midnight-700 active:bg-midnight-600 transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-display font-bold text-white truncate",children:g?"Edit Invoice":"Create Invoice"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:l.invoiceNumber||"Generating number..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:()=>T("draft"),disabled:a,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[a?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Draft"})]}),e.jsxs("button",{onClick:()=>T("pending"),disabled:a,className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[a?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Save & Preview"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(He,{className:"w-5 h-5 text-teal-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Customer Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"customerName",value:l.customerName,onChange:F=>{i(F),u(F.target.value),n(!0)},onFocus:()=>n(!0),className:`input-field ${v.customerName?"border-coral-500":""}`,placeholder:"Enter customer name"}),C&&I.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:I.map(F=>e.jsxs("button",{type:"button",onClick:()=>S(F),className:"w-full px-4 py-3 text-left hover:bg-midnight-700 transition-colors",children:[e.jsx("p",{className:"text-white font-medium",children:F.name}),F.phone&&e.jsx("p",{className:"text-midnight-400 text-sm",children:F.phone})]},F.id))})]})]}),v.customerName&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:v.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone"}),e.jsx("input",{type:"tel",name:"customerPhone",value:l.customerPhone,onChange:i,className:"input-field",placeholder:"Phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email"}),e.jsx("input",{type:"email",name:"customerEmail",value:l.customerEmail,onChange:i,className:"input-field",placeholder:"Email address"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"customerAddress",value:l.customerAddress,onChange:i,className:"input-field min-h-[60px] resize-none",placeholder:"Customer address"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Items"}),e.jsxs("button",{type:"button",onClick:k,className:"text-teal-400 hover:text-teal-300 flex items-center gap-1 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"}),"Add Item"]})]}),v.items&&e.jsx("p",{className:"text-coral-400 text-sm mb-4",children:v.items}),e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-12 gap-2 pb-2 border-b border-midnight-600 mb-2",children:[e.jsx("div",{className:"col-span-1 text-midnight-400 text-xs font-medium",children:"#"}),e.jsx("div",{className:"col-span-5 text-midnight-400 text-xs font-medium",children:"Item Name"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-center",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Price"}),e.jsx("div",{className:"col-span-2 text-midnight-400 text-xs font-medium text-right",children:"Amount"})]}),e.jsx("div",{className:"space-y-2",children:l.items.map((F,_)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 py-2 border-b border-midnight-700/50 items-center",children:[e.jsx("div",{className:"hidden sm:flex col-span-1 text-midnight-400 text-sm items-center",children:_+1}),e.jsxs("div",{className:"sm:col-span-5 relative",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Item Name"}),e.jsx("input",{type:"text",value:F.name,onChange:B=>{w(F.id,"name",B.target.value),r(B.target.value),j(F.id)},onFocus:()=>j(F.id),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all",placeholder:"Enter item name"}),R===F.id&&A.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(null)}),e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden",children:A.map(B=>e.jsxs("button",{type:"button",onClick:()=>y(B,F.id),className:"w-full px-4 py-2 text-left hover:bg-midnight-700 transition-colors flex justify-between items-center",children:[e.jsx("span",{className:"text-white text-sm",children:B.name}),e.jsx("span",{className:"text-teal-400 font-mono text-sm",children:J(B.price,p.currency)})]},B.id))})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:F.quantity,onChange:B=>w(F.id,"quantity",parseInt(B.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-center focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"sm:hidden text-midnight-400 text-xs mb-1 block",children:"Price"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:F.price,onChange:B=>w(F.id,"price",parseFloat(B.target.value)||0),className:"w-full bg-midnight-800/50 border border-midnight-600 rounded-lg px-3 py-2 text-white text-sm text-right focus:border-teal-500 focus:ring-1 focus:ring-teal-500/20 transition-all font-mono"})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center justify-between sm:justify-end gap-2",children:[e.jsx("div",{className:"sm:hidden text-midnight-400 text-xs",children:"Amount:"}),e.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:J(F.quantity*F.price,p.currency)}),l.items.length>1&&e.jsx("button",{type:"button",onClick:()=>O(F.id),className:"p-1.5 text-coral-400 hover:bg-coral-500/20 rounded-lg transition-colors ml-2",children:e.jsx(we,{className:"w-4 h-4"})})]})]},F.id))}),e.jsxs("button",{type:"button",onClick:k,className:"mt-4 w-full py-2.5 border-2 border-dashed border-midnight-600 rounded-xl text-midnight-400 hover:text-teal-400 hover:border-teal-500/50 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(Z,{className:"w-4 h-4"}),"Add Item"]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("label",{className:"input-label",children:"Notes"}),e.jsx("textarea",{name:"notes",value:l.notes,onChange:i,className:"input-field min-h-[80px] resize-none",placeholder:"Add any notes..."})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"glass rounded-2xl p-6 sticky top-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Number"}),e.jsx("input",{type:"text",name:"invoiceNumber",value:l.invoiceNumber,onChange:i,className:"input-field font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Date"}),e.jsx("input",{type:"date",name:"date",value:l.date,onChange:i,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"input-label",children:[P.taxLabel||"Tax"," Rate (%)"]}),e.jsx("input",{type:"number",min:"0",max:"100",name:"taxRate",value:l.taxRate,onChange:i,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Discount (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",name:"discount",value:l.discount,onChange:i,className:"input-field"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-midnight-600 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:J(D.subtotal,p.currency)})]}),l.discount>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:["Discount (",l.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-coral-400",children:["-",J(D.discountAmount,p.currency)]})]}),l.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-midnight-300",children:[e.jsxs("span",{children:[P.taxLabel||"Tax"," (",l.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:J(D.taxAmount,p.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t border-midnight-600",children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-400",children:J(D.total,p.currency)})]})]})]})})]})]})}function vs(){const t=Ne(),{id:c}=ot(),{invoice:g,loading:x,saveInvoice:E}=yt(c),{business:b,loading:W}=ge(),{settings:d,loading:p}=Ae(),P=L.useRef(null),[N,l]=L.useState(!1),[o,C]=L.useState(!1),[n,R]=L.useState(!1),j=x||W||p;if(j&&!g)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(K,{className:"animate-spin w-8 h-8 text-teal-400"}),e.jsx("p",{className:"text-midnight-400",children:"Loading invoice..."})]})});if(!g)return j?null:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Invoice Not Found"}),e.jsxs(q,{to:"/invoices",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Back to Invoices"]})]});const m=ne(g.items,g.taxRate,g.discount),u=()=>{Ie(g,b,d)},s=()=>{fs(g,b,d)},r=async a=>{R(!0);try{const f={...g,status:a};await E(f),l(!1)}catch(f){console.error("Failed to update status",f)}finally{R(!1)}},v=async()=>{C(!0);try{const a=xs(g,b,d),f=new File([a],`${g.invoiceNumber}.pdf`,{type:"application/pdf"});navigator.share&&navigator.canShare({files:[f]})?await navigator.share({title:`Invoice ${g.invoiceNumber}`,text:`Invoice for ${g.customerName} - ${J(m.total,b.currency)}`,files:[f]}):Ie(g,b,d)}catch(a){a.name!=="AbortError"&&(console.error("Error sharing:",a),Ie(g,b,d))}C(!1)},h=[{value:"draft",label:"Draft",icon:ye,color:"text-midnight-400"},{value:"pending",label:"Pending",icon:ht,color:"text-gold-400"},{value:"paid",label:"Paid",icon:se,color:"text-teal-400"},{value:"overdue",label:"Overdue",icon:xe,color:"text-coral-400"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/invoices"),className:"p-2 rounded-lg hover:bg-midnight-700 transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-midnight-300"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:g.invoiceNumber}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>l(!N),className:`px-3 py-1 rounded-full text-sm font-medium ${$e(g.status)} hover:opacity-80 transition-opacity flex items-center gap-2`,disabled:n,children:n?e.jsx(K,{className:"w-3 h-3 animate-spin"}):Ge(g.status)}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-40 bg-midnight-800 border border-midnight-600 rounded-xl shadow-lg overflow-hidden z-20",children:h.map(a=>{const f=a.icon;return e.jsxs("button",{onClick:()=>r(a.value),className:`flex items-center gap-3 px-4 py-3 w-full hover:bg-midnight-700 transition-colors ${g.status===a.value?"bg-midnight-700":""}`,children:[e.jsx(f,{className:`w-4 h-4 ${a.color}`}),e.jsx("span",{className:"text-white",children:a.label}),g.status===a.value&&e.jsx(We,{className:"w-4 h-4 text-teal-400 ml-auto"})]},a.value)})})]})]})]}),e.jsx("p",{className:"text-midnight-400",children:g.customerName})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs(q,{to:`/invoices/edit/${g.id}`,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Edit"})]}),e.jsxs("button",{onClick:u,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(ut,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Download"})]}),e.jsxs("button",{onClick:s,className:"btn-secondary flex items-center justify-center gap-2 flex-1 sm:flex-none",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Print"})]}),e.jsxs("button",{onClick:v,disabled:o,className:"btn-primary flex items-center justify-center gap-2 flex-1 sm:flex-none disabled:opacity-50",children:[e.jsx(zt,{className:`w-4 h-4 ${o?"animate-pulse":""}`}),o?"Sharing...":"Share PDF"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",ref:P,children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 px-8 py-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display font-bold",children:b.name||"Your Business Name"}),b.address&&e.jsx("p",{className:"text-teal-100 mt-1 text-sm",children:b.address}),b.city&&e.jsxs("p",{className:"text-teal-100 text-sm",children:[b.city,b.state&&`, ${b.state}`,b.pincode&&` - ${b.pincode}`]}),b.phone&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Phone: ",b.phone]}),b.email&&e.jsxs("p",{className:"text-teal-100 text-sm",children:["Email: ",b.email]}),b.taxId&&e.jsxs("p",{className:"text-teal-100 text-sm font-mono",children:[d.taxLabel||"Tax"," ID: ",b.taxId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-teal-200 text-sm uppercase tracking-wide",children:"Invoice"}),e.jsx("p",{className:"text-xl font-mono font-bold mt-1",children:g.invoiceNumber}),e.jsxs("p",{className:"text-teal-100 text-sm mt-2",children:["Date: ",ue(g.date)]})]})]})}),e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Bill To"}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:g.customerName}),g.customerAddress&&e.jsx("p",{className:"text-gray-600 text-sm",children:g.customerAddress}),g.customerPhone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Phone: ",g.customerPhone]}),g.customerEmail&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Email: ",g.customerEmail]})]}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs w-12",children:"#"}),e.jsx("th",{className:"text-left py-3 text-gray-500 font-medium text-xs",children:"Item"}),e.jsx("th",{className:"text-center py-3 text-gray-500 font-medium text-xs w-20",children:"Qty"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Price"}),e.jsx("th",{className:"text-right py-3 text-gray-500 font-medium text-xs w-28",children:"Amount"})]})}),e.jsx("tbody",{children:g.items.map((a,f)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-4 text-gray-400 text-sm",children:f+1}),e.jsx("td",{className:"py-4 text-gray-900 font-medium",children:a.name}),e.jsx("td",{className:"py-4 text-gray-600 text-center",children:a.quantity}),e.jsx("td",{className:"py-4 text-gray-600 text-right font-mono text-sm",children:J(a.price,b.currency)}),e.jsx("td",{className:"py-4 text-gray-900 text-right font-mono font-medium",children:J(a.quantity*a.price,b.currency)})]},a.id))})]})}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-full sm:w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-mono",children:J(m.subtotal,b.currency)})]}),g.discount>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Discount (",g.discount,"%)"]}),e.jsxs("span",{className:"font-mono text-red-500",children:["-",J(m.discountAmount,b.currency)]})]}),g.taxRate>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:[d.taxLabel||"Tax"," (",g.taxRate,"%)"]}),e.jsx("span",{className:"font-mono",children:J(m.taxAmount,b.currency)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-3 border-t-2 border-gray-200",children:[e.jsx("span",{className:"text-gray-900",children:"Total"}),e.jsx("span",{className:"font-mono text-teal-600",children:J(m.total,b.currency)})]})]})}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide",children:"Amount in Words"}),e.jsxs("p",{className:"text-gray-700 font-medium",children:[ie(Math.floor(m.total))," Only"]})]})]}),g.notes&&e.jsxs("div",{className:"px-8 py-6 border-t border-gray-100",children:[e.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wide mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:g.notes})]}),e.jsx("div",{className:"px-8 py-6 bg-gray-50 text-center border-t border-gray-100",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Thank you for your business!"})})]})]})}const ys=["piece","kg","g","liter","ml","dozen","box","pack","unit","hour","service"];function js(){const{products:t,loading:c,saveProduct:g,deleteProduct:x}=bt(),{business:E,loading:b}=ge(),W=c||b,[d,p]=L.useState(""),[P,N]=L.useState(!1),[l,o]=L.useState(null),[C,n]=L.useState(null),[R,j]=L.useState(!1),[m,u]=L.useState(!1),[s,r]=L.useState({name:"",description:"",price:"",unit:"piece"}),[v,h]=L.useState({}),a=t.filter(k=>{var O;return k.name.toLowerCase().includes(d.toLowerCase())||((O=k.description)==null?void 0:O.toLowerCase().includes(d.toLowerCase()))}),f=(k=null)=>{k?(o(k),r({name:k.name,description:k.description||"",price:k.price.toString(),unit:k.unit||"piece"})):(o(null),r({name:"",description:"",price:"",unit:"piece"})),h({}),N(!0)},D=()=>{N(!1),o(null),r({name:"",description:"",price:"",unit:"piece"}),h({})},I=k=>{const{name:O,value:S}=k.target;r(y=>({...y,[O]:S})),v[O]&&h(y=>({...y,[O]:null}))},A=()=>{const k={};return s.name.trim()||(k.name="Product name is required"),(!s.price||parseFloat(s.price)<0)&&(k.price="Valid price is required"),h(k),Object.keys(k).length===0},i=async()=>{if(A()){j(!0);try{const k={id:(l==null?void 0:l.id)||ee(),name:s.name.trim(),description:s.description.trim(),price:parseFloat(s.price),unit:s.unit};await g(k),D()}catch(k){console.error("Failed to save product:",k)}finally{j(!1)}}},w=async k=>{u(!0);try{await x(k)}catch(O){console.error("Failed to delete product:",O)}finally{u(!1),n(null)}};return W&&t.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading products..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Products & Services"}),e.jsxs("p",{className:"text-midnight-400",children:[t.length," items"]})]}),e.jsxs("button",{onClick:()=>f(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Product"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:k=>p(k.target.value),className:"input-field pl-12"})]}),a.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ct,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:d?"No products found":"No products yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:d?"Try adjusting your search":"Add products to quickly add them to invoices"}),!d&&e.jsxs("button",{onClick:()=>f(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Add Product"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(k=>e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:k.name}),k.description&&e.jsx("p",{className:"text-midnight-400 text-sm mt-1 line-clamp-2",children:k.description}),e.jsxs("div",{className:"mt-3 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-mono font-bold text-teal-400",children:J(k.price,E.currency)}),k.unit&&e.jsxs("span",{className:"text-midnight-400 text-sm",children:["/ ",k.unit]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>f(k),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(k.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(we,{className:"w-4 h-4"})})]})]})},k.id))}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:l?"Edit Product":"Add Product"}),e.jsx("button",{onClick:D,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Ue,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:I,className:`input-field ${v.name?"border-coral-500":""}`,placeholder:"e.g., Notebook, Pen, Cake"}),v.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:v.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:I,className:"input-field min-h-[80px] resize-none",placeholder:"Brief description of the product"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Price *"}),e.jsx("input",{type:"number",name:"price",min:"0",step:"0.01",value:s.price,onChange:I,className:`input-field ${v.price?"border-coral-500":""}`,placeholder:"0.00"}),v.price&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:v.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Unit"}),e.jsx("select",{name:"unit",value:s.unit,onChange:I,className:"input-field",children:ys.map(k=>e.jsx("option",{value:k,children:k},k))})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:D,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:i,disabled:R,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[R?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(Te,{className:"w-4 h-4"}),l?"Update":"Add Product"]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Product?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This product will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>n(null),className:"btn-secondary",disabled:m,children:"Cancel"}),e.jsx("button",{onClick:()=>w(C),className:"btn-danger",disabled:m,children:m?"Deleting...":"Delete"})]})]})})]})}function bs(){const{customers:t,loading:c,saveCustomer:g,deleteCustomer:x}=jt(),{invoices:E}=be(),[b,W]=L.useState(""),[d,p]=L.useState(!1),[P,N]=L.useState(null),[l,o]=L.useState(null),[C,n]=L.useState(!1),[R,j]=L.useState(!1),[m,u]=L.useState({name:"",phone:"",email:"",address:""}),[s,r]=L.useState({}),v=w=>E.filter(k=>k.customerName===w).length,h=t.filter(w=>{var k,O;return w.name.toLowerCase().includes(b.toLowerCase())||((k=w.phone)==null?void 0:k.includes(b))||((O=w.email)==null?void 0:O.toLowerCase().includes(b.toLowerCase()))}),a=(w=null)=>{w?(N(w),u({name:w.name,phone:w.phone||"",email:w.email||"",address:w.address||""})):(N(null),u({name:"",phone:"",email:"",address:""})),r({}),p(!0)},f=()=>{p(!1),N(null),u({name:"",phone:"",email:"",address:""}),r({})},D=w=>{const{name:k,value:O}=w.target;u(S=>({...S,[k]:O})),s[k]&&r(S=>({...S,[k]:null}))},I=()=>{const w={};return m.name.trim()||(w.name="Customer name is required"),r(w),Object.keys(w).length===0},A=async()=>{if(I()){n(!0);try{const w={id:(P==null?void 0:P.id)||ee(),name:m.name.trim(),phone:m.phone.trim(),email:m.email.trim(),address:m.address.trim()};await g(w),f()}catch(w){console.error("Failed to save customer:",w)}finally{n(!1)}}},i=async w=>{j(!0);try{await x(w)}catch(k){console.error("Failed to delete customer:",k)}finally{j(!1),o(null)}};return c&&t.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading customers..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Customers"}),e.jsxs("p",{className:"text-midnight-400",children:[t.length," customers"]})]}),e.jsxs("button",{onClick:()=>a(),className:"btn-primary flex items-center gap-2 self-start",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Customer"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-400"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:b,onChange:w=>W(w.target.value),className:"input-field pl-12"})]}),h.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(dt,{className:"w-16 h-16 text-midnight-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:b?"No customers found":"No customers yet"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:b?"Try adjusting your search":"Customers are automatically added when you create invoices"}),!b&&e.jsxs("button",{onClick:()=>a(),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Add Customer"]})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:h.map(w=>{const k=v(w.name);return e.jsx("div",{className:"glass rounded-xl p-5 card-hover animate-fade-in",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-teal-400 font-semibold",children:w.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:w.name}),k>0&&e.jsxs(q,{to:`/invoices?search=${encodeURIComponent(w.name)}`,className:"text-teal-400 text-sm hover:text-teal-300 flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),k," invoice",k>1?"s":""]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[w.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${w.phone}`,className:"hover:text-white",children:w.phone})]}),w.email&&e.jsxs("div",{className:"flex items-center gap-2 text-midnight-400 text-sm",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("a",{href:`mailto:${w.email}`,className:"hover:text-white truncate",children:w.email})]}),w.address&&e.jsxs("div",{className:"flex items-start gap-2 text-midnight-400 text-sm",children:[e.jsx(Yt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"line-clamp-2",children:w.address})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>a(w),className:"p-2 text-midnight-400 hover:text-white hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(w.id),className:"p-2 text-midnight-400 hover:text-coral-400 hover:bg-coral-500/10 rounded-lg transition-colors",children:e.jsx(we,{className:"w-4 h-4"})})]})]})},w.id)})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:P?"Edit Customer":"Add Customer"}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-midnight-700 rounded-lg transition-colors",children:e.jsx(Ue,{className:"w-5 h-5 text-midnight-400"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Customer Name *"}),e.jsx("input",{type:"text",name:"name",value:m.name,onChange:D,className:`input-field ${s.name?"border-coral-500":""}`,placeholder:"Full name"}),s.name&&e.jsx("p",{className:"text-coral-400 text-sm mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:D,className:"input-field",placeholder:"Mobile number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:m.email,onChange:D,className:"input-field",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:m.address,onChange:D,className:"input-field min-h-[80px] resize-none",placeholder:"Full address"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:f,className:"btn-secondary flex-1",children:"Cancel"}),e.jsxs("button",{onClick:A,disabled:C,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[C?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(Te,{className:"w-4 h-4"}),P?"Update":"Add Customer"]})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"glass rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Customer?"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:"This customer will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>o(null),className:"btn-secondary",disabled:R,children:"Cancel"}),e.jsx("button",{onClick:()=>i(l),className:"btn-danger",disabled:R,children:R?"Deleting...":"Delete"})]})]})})]})}const Ns=[{symbol:"₹",name:"Indian Rupee (INR)"},{symbol:"$",name:"US Dollar (USD)"},{symbol:"€",name:"Euro (EUR)"},{symbol:"£",name:"British Pound (GBP)"},{symbol:"¥",name:"Japanese Yen (JPY)"}],ws=[{id:"business",label:"Business Profile",icon:$t},{id:"invoice",label:"Invoice Settings",icon:me}];function Ss(){const{business:t,loading:c,saveBusiness:g}=ge(),{settings:x,loading:E,saveSettings:b}=Ae(),[W,d]=L.useState({}),[p,P]=L.useState({});L.useEffect(()=>{t&&Object.keys(t).length>0&&d(t)},[t]),L.useEffect(()=>{x&&Object.keys(x).length>0&&P(x)},[x]);const[N,l]=L.useState(!1),[o,C]=L.useState(!1),[n,R]=L.useState("business"),j=h=>{const{name:a,value:f}=h.target;d(D=>({...D,[a]:f}))},m=h=>{const{name:a,value:f,type:D}=h.target;P(I=>({...I,[a]:D==="number"?parseFloat(f)||0:f}))},u=async()=>{C(!0);try{await Promise.all([g(W),b(p)]),l(!0),setTimeout(()=>l(!1),2e3)}catch(h){console.error("Failed to save settings:",h)}finally{C(!1)}},s=h=>{var f;const a=(f=h.target.files)==null?void 0:f[0];if(a){const D=new FileReader;D.onloadend=()=>{d(I=>({...I,logo:D.result}))},D.readAsDataURL(a)}},r=()=>{d(h=>({...h,logo:null}))},v=()=>{P(h=>({...h,showLogo:!h.showLogo}))};return c||E?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-8 h-8 text-teal-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-midnight-400",children:"Loading settings..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-midnight-400",children:"Manage your business profile and settings"})]}),e.jsx("button",{onClick:u,disabled:o,className:`btn-primary flex items-center gap-2 self-start transition-all ${N?"bg-teal-600":""}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):N?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5"}),"Saved!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-5 h-5"}),"Save Changes"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-midnight-700 pb-4",children:ws.map(h=>{const a=h.icon;return e.jsxs("button",{onClick:()=>R(h.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-colors ${n===h.id?"bg-teal-500/20 text-teal-400":"text-midnight-400 hover:text-white hover:bg-midnight-700"}`,children:[e.jsx(a,{className:"w-5 h-5"}),h.label]},h.id)})}),n==="business"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Business Name"}),e.jsx("input",{type:"text",name:"name",value:W.name||"",onChange:j,className:"input-field",placeholder:"Your business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Address"}),e.jsx("textarea",{name:"address",value:W.address||"",onChange:j,className:"input-field min-h-[80px] resize-none",placeholder:"Business address"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"City"}),e.jsx("input",{type:"text",name:"city",value:W.city||"",onChange:j,className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"State"}),e.jsx("input",{type:"text",name:"state",value:W.state||"",onChange:j,className:"input-field",placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"PIN Code"}),e.jsx("input",{type:"text",name:"pincode",value:W.pincode||"",onChange:j,className:"input-field",placeholder:"PIN Code"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:W.phone||"",onChange:j,className:"input-field",placeholder:"Business phone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:W.email||"",onChange:j,className:"input-field",placeholder:"business@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax ID / Registration Number"}),e.jsx("input",{type:"text",name:"taxId",value:W.taxId||"",onChange:j,className:"input-field font-mono",placeholder:"Tax registration number"})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Business Logo"}),W.logo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:W.logo,alt:"Business logo",className:"w-full h-40 object-contain bg-white rounded-xl"}),e.jsx("button",{onClick:r,className:"absolute top-2 right-2 p-2 bg-coral-500 text-white rounded-lg hover:bg-coral-600 transition-colors",children:e.jsx(we,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-midnight-600 rounded-xl cursor-pointer hover:border-teal-500/50 transition-colors",children:[e.jsx(Gt,{className:"w-8 h-8 text-midnight-500 mb-2"}),e.jsx("span",{className:"text-midnight-400 text-sm",children:"Upload logo"}),e.jsx("span",{className:"text-midnight-500 text-xs mt-1",children:"PNG, JPG up to 2MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s,className:"hidden"})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Currency"}),e.jsx("div",{className:"space-y-2",children:Ns.map(h=>e.jsxs("button",{onClick:()=>d(a=>({...a,currency:h.symbol})),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${W.currency===h.symbol?"bg-teal-500/20 text-teal-400":"text-midnight-300 hover:bg-midnight-700"}`,children:[e.jsx("span",{className:"text-xl font-mono",children:h.symbol}),e.jsx("span",{className:"text-sm",children:h.name}),W.currency===h.symbol&&e.jsx(We,{className:"w-4 h-4 ml-auto"})]},h.symbol))})]})]})]}),n==="invoice"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Defaults"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Invoice Prefix"}),e.jsx("input",{type:"text",name:"invoicePrefix",value:p.invoicePrefix||"",onChange:m,className:"input-field font-mono",placeholder:"INV"}),e.jsxs("p",{className:"text-midnight-500 text-xs mt-1",children:["Your invoices will be numbered like ",p.invoicePrefix,"-2026-0001"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Default Tax Rate (%)"}),e.jsx("input",{type:"number",name:"taxRate",min:"0",max:"100",value:p.taxRate||0,onChange:m,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Tax Label"}),e.jsx("input",{type:"text",name:"taxLabel",value:p.taxLabel||"",onChange:m,className:"input-field",placeholder:"e.g., GST, VAT, Tax"})]})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Display"}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-midnight-800/50 rounded-xl cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Show Business Logo"}),e.jsx("p",{className:"text-midnight-400 text-sm",children:"Display your logo on invoices"})]}),e.jsx("div",{className:`w-12 h-7 rounded-full transition-colors ${p.showLogo?"bg-teal-500":"bg-midnight-600"}`,onClick:v,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform mt-1 ${p.showLogo?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"lg:col-span-2 glass rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Invoice Preview"}),e.jsxs("div",{className:"bg-white rounded-xl p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-4",children:[e.jsxs("div",{children:[p.showLogo&&W.logo&&e.jsx("img",{src:W.logo,alt:"Logo",className:"h-12 mb-2"}),e.jsx("h3",{className:"font-bold text-lg",children:W.name||"Your Business Name"}),e.jsx("p",{className:"text-gray-500 text-sm",children:W.address||"Business Address"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-sm uppercase",children:"Invoice"}),e.jsxs("p",{className:"font-mono font-bold",children:[p.invoicePrefix||"INV","-2026-0001"]})]})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:[p.taxLabel||"Tax"," Rate: ",p.taxRate||0,"%"]})})]})]})]})]})}function Cs(){const t=Ne(),{signIn:c}=fe(),[g,x]=L.useState(""),[E,b]=L.useState(""),[W,d]=L.useState(""),[p,P]=L.useState(!1),N=async l=>{l.preventDefault(),d(""),P(!0);try{const{error:o}=await c(g,E);o?d(o.message):t("/")}catch{d("An unexpected error occurred")}finally{P(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(st,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-midnight-400",children:"Sign in to access your invoices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[W&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:W})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:g,onChange:l=>x(l.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:E,onChange:l=>b(l.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"current-password"})]})]}),e.jsx("button",{type:"submit",disabled:p,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"w-5 h-5"}),"Sign In"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-center",children:[e.jsx(q,{to:"/forgot-password",className:"block text-sm text-teal-400 hover:text-teal-300 transition-colors",children:"Forgot your password?"}),e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Don't have an account?"," ",e.jsx(q,{to:"/signup",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign up"})]})]})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"Your data is securely synced across all your devices"})]})})}const pe={INVOICES:"invoiceflow_invoices",BUSINESS:"invoiceflow_business",SETTINGS:"invoiceflow_settings",CUSTOMERS:"invoiceflow_customers",PRODUCTS:"invoiceflow_products"},Ps=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,ce=t=>Ps.test(t),ve=t=>{try{const c=localStorage.getItem(t);return c?JSON.parse(c):null}catch(c){return console.error(`Error reading from storage: ${t}`,c),null}};async function Ds(){if(!ae)return{success:!1,message:"Cloud sync not configured."};const t=ve(pe.INVOICES)||[],c=ve(pe.CUSTOMERS)||[],g=ve(pe.PRODUCTS)||[],x=ve(pe.BUSINESS),E=ve(pe.SETTINGS);if(!(t.length>0||c.length>0||g.length>0||!!x))return{success:!0,message:"No local data to migrate."};const W=t.map(l=>({...l,id:ce(l.id)?l.id:ee(),items:l.items.map(o=>({...o,id:ce(o.id)?o.id:ee()}))})),d=c.map(l=>({...l,id:ce(l.id)?l.id:ee()})),p=g.map(l=>({...l,id:ce(l.id)?l.id:ee()}));let P=x;x&&(!x.id||!ce(x.id))&&(P={...x,id:ee()});let N=E;return E&&(!E.id||!ce(E.id))&&(N={...E,id:ee()}),ls({invoices:W,customers:d,products:p,business:P||{},settings:N||{}})}function ks(){const t=Ne(),{signUp:c}=fe(),[g,x]=L.useState(""),[E,b]=L.useState(""),[W,d]=L.useState(""),[p,P]=L.useState(""),[N,l]=L.useState(!1),o=async C=>{if(C.preventDefault(),P(""),E.length<6){P("Password must be at least 6 characters long");return}if(E!==W){P("Passwords do not match");return}l(!0);try{const{error:n}=await c(g,E);if(n)P(n.message);else{try{await Ds()}catch(R){console.error("Failed to sync local data:",R)}t("/")}}catch{P("An unexpected error occurred")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 mb-4",children:e.jsx(at,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Create Account"}),e.jsx("p",{className:"text-midnight-400",children:"Start managing your invoices across all devices"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[p&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:p})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:g,onChange:C=>x(C.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:E,onChange:C=>b(C.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password",minLength:6})]}),e.jsx("p",{className:"text-midnight-500 text-xs mt-1",children:"At least 6 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"password",value:W,onChange:C=>d(C.target.value),className:"input-field pl-12",placeholder:"••••••••",required:!0,autoComplete:"new-password"})]})]}),e.jsxs("div",{className:"bg-midnight-800/50 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(se,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Sync across all your devices"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(se,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Secure cloud backup"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-midnight-300",children:[e.jsx(se,{className:"w-4 h-4 text-teal-400"}),e.jsx("span",{children:"Access from anywhere"})]})]}),e.jsx("button",{type:"submit",disabled:N,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-5 h-5"}),"Create Account"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"text-midnight-400 text-sm",children:["Already have an account?"," ",e.jsx(q,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors font-medium",children:"Sign in"})]})})]}),e.jsx("p",{className:"text-center text-midnight-500 text-sm mt-8",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})]})})}function Is(){const{resetPassword:t}=fe(),[c,g]=L.useState(""),[x,E]=L.useState(""),[b,W]=L.useState(!1),[d,p]=L.useState(!1),P=async N=>{N.preventDefault(),E(""),p(!0);try{const{error:l}=await t(c);l?E(l.message):W(!0)}catch{E("An unexpected error occurred")}finally{p(!1)}};return b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500 to-blue-500 mb-4",children:e.jsx(se,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-midnight-400",children:["We've sent password reset instructions to ",e.jsx("strong",{className:"text-white",children:c})]})]}),e.jsxs("div",{className:"glass rounded-2xl p-8 space-y-4",children:[e.jsx("p",{className:"text-midnight-300 text-sm",children:"Click the link in the email to reset your password. If you don't see the email, check your spam folder."}),e.jsxs(q,{to:"/login",className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Back to Login"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 mb-4",children:e.jsx(de,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-display font-bold text-white mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-midnight-400",children:"Enter your email to reset your password"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8",children:[e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[x&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-coral-500/20 border border-coral-500/30 rounded-xl text-coral-400",children:[e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:x})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input-label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-midnight-500"}),e.jsx("input",{type:"email",value:c,onChange:N=>g(N.target.value),className:"input-field pl-12",placeholder:"you@example.com",required:!0,autoComplete:"email"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-5 h-5"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(q,{to:"/login",className:"inline-flex items-center gap-2 text-sm text-teal-400 hover:text-teal-300 transition-colors",children:[e.jsx(je,{className:"w-4 h-4"}),"Back to Login"]})})]}),e.jsxs("p",{className:"text-center text-midnight-500 text-sm mt-8",children:["Remember your password?"," ",e.jsx(q,{to:"/login",className:"text-teal-400 hover:text-teal-300 transition-colors",children:"Sign in"})]})]})})}function Ts(){return e.jsx(It,{children:e.jsx(ts,{children:e.jsx(ss,{children:e.jsxs(Ve,{children:[e.jsx(X,{path:"/login",element:e.jsx(Cs,{})}),e.jsx(X,{path:"/signup",element:e.jsx(ks,{})}),e.jsx(X,{path:"/forgot-password",element:e.jsx(Is,{})}),e.jsx(X,{path:"/*",element:e.jsx(as,{children:e.jsx(is,{children:e.jsxs(Ve,{children:[e.jsx(X,{path:"/",element:e.jsx(hs,{})}),e.jsx(X,{path:"/invoices",element:e.jsx(gs,{})}),e.jsx(X,{path:"/invoices/new",element:e.jsx(lt,{})}),e.jsx(X,{path:"/invoices/edit/:id",element:e.jsx(lt,{})}),e.jsx(X,{path:"/invoices/view/:id",element:e.jsx(vs,{})}),e.jsx(X,{path:"/products",element:e.jsx(js,{})}),e.jsx(X,{path:"/customers",element:e.jsx(bs,{})}),e.jsx(X,{path:"/settings",element:e.jsx(Ss,{})})]})})})})]})})})})}class Fs extends L.Component{constructor(){super(...arguments);Qe(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(g){return{hasError:!0,error:g}}componentDidCatch(g,x){console.error("Uncaught error:",g,x)}render(){var g;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-midnight-900 via-midnight-800 to-midnight-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-coral-500/20 mb-6",children:e.jsx(xe,{className:"w-8 h-8 text-coral-400"})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-midnight-400 mb-6",children:((g=this.state.error)==null?void 0:g.message)||"An unexpected error occurred. Please try refreshing the page."}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4"}),"Reload Application"]})]})}):this.props.children}}const Nt=document.getElementById("root");if(!Nt)throw new Error("Failed to find root element");Me.createRoot(Nt).render(e.jsx(Tt.StrictMode,{children:e.jsx(Fs,{children:e.jsx(Ts,{})})}));
